{"version":3,"file":"116.js","mappings":"sKAGe,MAAMA,EACnBC,WAAAA,CAAYC,GACVC,KAAKD,SAAWA,EAChBC,KAAKC,SAAUC,EAAAA,EAAAA,GAAE,iBAAiBC,QAClCH,KAAKI,cAAeF,EAAAA,EAAAA,GAAE,8BAA8BC,QACpDH,KAAKK,aAAcH,EAAAA,EAAAA,GAAE,6BAA6BC,QAClDH,KAAKM,YAAaJ,EAAAA,EAAAA,GAAE,4BAA4BC,QAChDH,KAAKO,kBAAmBL,EAAAA,EAAAA,GAAE,kCAAkCC,QAC5DH,KAAKQ,YAAaN,EAAAA,EAAAA,GAAE,6BAA6BC,QACjDH,KAAKQ,WAAWC,iBAAiB,sBAAuBT,KAAKU,gBAAgBC,KAAKX,OAClFA,KAAKY,aAAaV,EAAAA,EAAAA,GAAE,uBAAuBC,QAC3CH,KAAKa,OACP,CAEAA,KAAAA,GACEb,KAAKC,QAAQQ,iBAAiB,uBAAwBT,KAAKc,aAAaH,KAAKX,OAC7E,IAAIe,EAAAA,EAAUf,KAAKI,cACnB,IAAIW,EAAAA,EAAUf,KAAKK,aACnB,IAAIU,EAAAA,EAAUf,KAAKM,YACnB,IAAIS,EAAAA,EAAUf,KAAKO,iBACrB,CAEAG,eAAAA,CAAgBM,GACd,GAAIA,EAAKC,OAAQ,CACf,IAAIC,EAAOlB,KAAKY,YAAYO,cAAc,KACtCC,EAAOJ,EAAKC,QAAQI,KAAKC,KAAKC,MAAMH,KACxCF,EAAKM,aAAa,OAAO,YAAYJ,KACrCF,EAAKO,KAAOL,CACd,CAEF,CAEA,qBAAMM,EAAgB,OAACC,IACrB,IAAIC,EAAO5B,KAAK6B,IAAI7B,MACpB4B,EAAKD,EAAOG,QAAQC,QAAUJ,EAAOK,cACrBC,EAAAA,EAAAA,IAAK,kCAAmCL,EAC1D,CAEA,kBAAMd,CAAaoB,GACjB,IAAIH,EAAQG,EAAIjB,OAAOU,OAAOG,QAAQC,MACtC,IAAKA,EAAO,OACZ,IAAIH,EAAO5B,KAAK6B,IAAIK,GACpBN,EAAKG,GAASG,EAAIjB,OAAOkB,KAAKC,YACdH,EAAAA,EAAAA,IAAK,kCAAmCL,EAC1D,CAEAC,GAAAA,CAAIK,GACF,MAAO,CACLG,GAAIrC,KAAKD,SAAS+B,QAAQO,GAE9B,E","sources":["webpack://my-webpack-project/./public/src/Admin/Product/Fields.js"],"sourcesContent":["import SelectNew from \"../../components/select/SelectNew\";\r\nimport {$, post} from \"../../common\";\r\n\r\nexport default class Fields {\r\n  constructor($product) {\r\n    this.$product = $product;\r\n    this.$fields = $('.item_content').first();\r\n    this.$category_id = $(`[data-field=\"category_id\"]`).first();\r\n    this.$promotions = $(`[data-field=\"promotions\"]`).first();\r\n    this.$base_unit = $(`[data-field=\"base_unit\"]`).first();\r\n    this.$manufacturer_id = $(`[data-field=\"manufacturer_id\"]`).first();\r\n    this.$printName = $(`[data-field='print_name']`).first();\r\n    this.$printName.addEventListener('catalogItem.changed', this.changePrintName.bind(this))\r\n    this.$productUrl= $(`[data-field='slug']`).first();\r\n    this.setup()\r\n  }\r\n\r\n  setup() {\r\n    this.$fields.addEventListener('customSelect.changed', this.changeFields.bind(this));\r\n    new SelectNew(this.$category_id);\r\n    new SelectNew(this.$promotions);\r\n    new SelectNew(this.$base_unit);\r\n    new SelectNew(this.$manufacturer_id);\r\n  }\r\n\r\n  changePrintName(item) {\r\n    if (item.detail) {\r\n      let $url = this.$productUrl.querySelector('a')\r\n      let slug = item.detail?.res?.arr?.model.slug\r\n      $url.setAttribute('href',`/product/${slug}`)\r\n      $url.text = slug\r\n    }\r\n\r\n  }\r\n\r\n  async checkBoxChanged({target}) {\r\n    let data = this.dto(this);\r\n    data[target.dataset.field] = +target.checked;\r\n    let res = await post('/adminsc/product/updateOrCreate', data)\r\n  }\r\n\r\n  async changeFields(obj) {\r\n    let field = obj.detail.target.dataset.field;\r\n    if (!field) return;\r\n    let data = this.dto(obj);\r\n    data[field] = obj.detail.next.value;\r\n    let res = await post('/adminsc/product/updateOrCreate', data)\r\n  }\r\n\r\n  dto(obj) {\r\n    return {\r\n      id: this.$product.dataset.id,\r\n    }\r\n  }\r\n}"],"names":["Fields","constructor","$product","this","$fields","$","first","$category_id","$promotions","$base_unit","$manufacturer_id","$printName","addEventListener","changePrintName","bind","$productUrl","setup","changeFields","SelectNew","item","detail","$url","querySelector","slug","res","arr","model","setAttribute","text","checkBoxChanged","target","data","dto","dataset","field","checked","post","obj","next","value","id"],"sourceRoot":""}
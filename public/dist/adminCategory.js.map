{"version":3,"sources":["webpack://vitalik/./public/src/Adm_catalog/adm_category.js"],"names":["$","obj","action","token","val","url","model","table","pkey","pkeyVal","values","on","Obj","text","name","alias","title","keywords","description","core","props","prop","value","push","uniq","join","setTimeout","post","find","clone","removeClass","remove","not","insertBefore"],"mappings":"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","file":"adminCategory.js","sourcesContent":["$(function () {\r\n\r\n   function obj(action) {\r\n      return {\r\n         token: $('#token').val(),\r\n         url: '/adminsc',\r\n         model: 'category',\r\n         table: 'category',\r\n         action: action ? action : 'update',\r\n         pkey: 'id',\r\n         pkeyVal: 'nul',\r\n         values: {}\r\n      }\r\n   }\r\n   ;\r\n// изменение  / добавление названия значения \r\n   $('.category-update-btn').on('click', function () {\r\n\r\n      var Obj = new obj('update');\r\n      Obj.pkeyVal = $('#id').text();\r\n\r\n      Obj.values.name = $('#name').text();\r\n      Obj.values.alias = $('#alias').text();\r\n      Obj.values.title = $('#title').text();\r\n      Obj.values.keywords = $('#keywords').text();\r\n      Obj.values.description = $('#description').text();\r\n      Obj.values.core = $('#core').text();\r\n      Obj.values.text = $('#text').text();\r\n      var props = $('.properties select option:selected');\r\n//      debugger;\r\n      var prop = [];\r\n\r\n      for (let val of props) {\r\n         if (val.value)\r\n            prop.push(val.value);\r\n      }\r\n      prop = uniq(prop);\r\n\r\n      Obj.values.props = prop.join(',');\r\n      setTimeout(function () {\r\n         post(Obj.url, Obj)\r\n      }, 800);\r\n\r\n   });\r\n\r\n\r\n\r\n// создание нового селекта\r\n   $('.properties.column').on('change', '.new-prop', function () {\r\n      let val = $(this).find('option:selected').val();\r\n      let clone = $(this).clone(true);\r\n      $(this).removeClass('new-prop');\r\n      $(clone).find('option[value = ' + val + ']').remove();\r\n//      debugger;\r\n      $('.properties.column option[value= ' + val + ']').not($(this).find('option:selected')).remove();\r\n      $(clone).insertBefore($('.add-property'));\r\n\r\n      var Obj = new obj('update');\r\n      Obj.pkeyVal = $('#id').text();\r\n      var props = $('.properties select option:selected');\r\n//      debugger;\r\n      var prop = [];\r\n\r\n      for (let val of props) {\r\n         if (val.value)\r\n            prop.push(val.value);\r\n      }\r\n      prop = uniq(prop);\r\n      Obj.values.props = prop.join(',');\r\n\r\n      Obj.values.props = prop.join(',');\r\n      setTimeout(function () {\r\n         post(Obj.url, Obj)\r\n      }, 800);\r\n\r\n   });\r\n\r\n// редактирование текущего  селекта\r\n   $('.properties.column').on('change', 'select', function () {\r\n      var Obj = new obj('update');\r\n      Obj.pkeyVal = $('#id').text();\r\n      var props = $('.properties select option:selected');\r\n      debugger;\r\n      var prop = [];\r\n\r\n      for (let val of props) {\r\n         if (val.value)\r\n            prop.push(val.value);\r\n      }\r\n      prop = uniq(prop);\r\n      Obj.values.props = prop.join(',');\r\n\r\n      Obj.values.props = prop.join(',');\r\n      setTimeout(function () {\r\n         post(Obj.url, Obj)\r\n      }, 800);\r\n\r\n\r\n   });\r\n\r\n});\r\n"],"sourceRoot":""}
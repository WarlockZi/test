{"version":3,"file":"402.js","mappings":"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","sources":["webpack://my-webpack-project/./public/src/components/Modal/modal.js"],"sourcesContent":["import './check_mark.scss'\r\nimport './modal.scss'\r\nimport {$, createElement} from '../../common'\r\n\r\nexport default class Modal {\r\n\r\n  constructor(props) {\r\n    debugger\r\n    this.modal = $(`[data-modal='default']`).first();\r\n    if (!this.modal) return;\r\n    if (!props?.button) return;\r\n\r\n    this.button = props.button;\r\n    this.data = props.data;\r\n    this.callback = props.callback;\r\n\r\n    this.fieldsObj = {};\r\n\r\n    this.closeEl = $(this.modal).find('.modal-close');\r\n    this.title = $(this.modal).find('.title');\r\n    this.box = $(this.modal).find('.modal-box');\r\n    this.content = $(this.modal).find('.content');\r\n    this.footer = $(this.modal).find('.footer');\r\n    this.overlay = $(this.modal).find('.overlay');\r\n\r\n    this.check = $('.checkmark').first();\r\n\r\n    this.button.addEventListener('click', this.show.bind(this));\r\n    this.closeEl.addEventListener('click', this.close.bind(this));\r\n    this.overlay.addEventListener('click', this.close.bind(this));\r\n  }\r\n\r\n  async show() {\r\n    this.$submit = (new createElement()).tag('div').attr('type', 'submit').attr('class', 'button').attr('id', 'submit').text(this.data.submitText).get();\r\n    this.$submit.addEventListener('click', this.submit.bind(this));\r\n    this.content.innerHTML = '';\r\n    this.renderTitle();\r\n    await this.renderFields();\r\n    await this.renderContent();\r\n    await this.renderFooter();\r\n    this.renderSubmitText();\r\n\r\n    this.modal.style.display = 'flex';\r\n    setTimeout(function () {\r\n      this.overlay.style.opacity = 1;\r\n      this.box.style.opacity = 1;\r\n      this.box.classList.remove('transform-out');\r\n      this.box.classList.add('transform-in')\r\n    }.bind(this), 1)\r\n  }\r\n\r\n  async renderFields() {\r\n    let fields = this.data.fields;\r\n    for (let field in fields) {\r\n      this.fieldsObj[field] = fields[field].querySelector('input');\r\n      this.content.appendChild(fields[field])\r\n    }\r\n  }\r\n\r\n  async renderContent() {\r\n    for (let line in this.data.content) {\r\n      this.content.appendChild(this.data.content[line])\r\n    }\r\n  }\r\n\r\n  async renderFooter() {\r\n    for (let line in this.data.footer) {\r\n      this.footer.appendChild(this.data.footer[line])\r\n    }\r\n    this.footer.appendChild(this.$submit)\r\n  }\r\n\r\n  renderTitle() {\r\n    this.title.innerText = this.data.title ?? 'Заголовок';\r\n  }\r\n\r\n  renderSubmitText() {\r\n    this.$submit.innerText = this.data.submitText ?? 'ok';\r\n  }\r\n\r\n  async submit() {\r\n    this.callback(this.fieldsObj, this);\r\n  }\r\n\r\n  close() {\r\n    this.box.classList.remove('transform-in');\r\n    this.box.classList.add('transform-out');\r\n    this.overlay.style.opacity = 0;\r\n    this.box.style.opacity = 0;\r\n    setTimeout(function () {\r\n      this.modal.style.display = 'none';\r\n      this.footer.innerHTML = '';\r\n    }.bind(this), 500)\r\n  }\r\n\r\n}"],"names":["Modal","constructor","props","this","modal","$","first","button","data","callback","fieldsObj","closeEl","find","title","box","content","footer","overlay","check","addEventListener","show","bind","close","$submit","createElement","tag","attr","text","submitText","get","submit","innerHTML","renderTitle","renderFields","renderContent","renderFooter","renderSubmitText","style","display","setTimeout","opacity","classList","remove","add","fields","field","querySelector","appendChild","line","innerText"],"sourceRoot":""}
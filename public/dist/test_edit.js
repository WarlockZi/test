/*! For license information please see test_edit.js.LICENSE.txt */
!function(){"use strict";var e={996:function(e,t,n){var o=n(400);!function(e){switch(!0){case/\/adminsc\/test/.test(e):(0,o.$)(".module.test").addClass("activ");break;case/\/adminsc\/settings/.test(e):case/\/adminsc\/Sitemap/.test(e):(0,o.$)(".module.settings").addClass("activ");break;case/\/adminsc\/crm/.test(e):(0,o.$)(".module.crm").addClass("activ");break;case/\/adminsc\/catalog/.test(e):(0,o.$)(".module.catalog").addClass("activ");break;case/\/adminsc\/test/.test(e):(0,o.$)(".module.test").addClass("activ");break;default:(0,o.$)(".module.home").addClass("activ")}}(window.location.pathname)},404:function(e,t,n){var o=n(400);[...(0,o.$)(".search input").el].map((e=>{e&&e.addEventListener("input",(function(){!async function(e){let t=e.parentNode,n=(0,o.$)(t).find(".search__result");if(e.value.length<1)return void(n&&(n.innerHTML=""));let i=await fetch("/search?q="+e.value);i=await i.json(i),0!==n.childNodes.length&&(n.innerHTML=""),i.map((e=>{let t=document.createElement("a");t.href=e.alias,t.innerHTML=`<img src='/pic/${e.preview_pic}' alt='${e.name}'>`+e.name,n.appendChild(t)})),(0,o.$)("body").on("click",(function(e){n&&e.target!==n&&(n.innerHTML="")}))}(e)}))})),n(454),document.cookie.match("(^|;)?cn=([^;]*)")?(0,o.$)("#cookie-notice").css("bottom","-100%"):(0,o.$)("#cookie-notice").css("bottom","0"),(0,o.$)("#cn-accept-cookie").on("click",(function(){(function(){const e=new Date;e.setTime(e.getTime()+864e5),document.cookie="cn=1; expires="+e+"path=/; SameSite=lax"})(),(0,o.$)("#cookie-notice").css("bottom","-100%")}));var i=n(559),a=n(446);(0,o.$)(".question").removeClass("flex1"),(0,o.$)(".question:first-child").addClass("flex1"),(0,a.nl)(),(0,o.$)('[type="checkbox"]').on("click",(function(e){e.target.labels[0].classList.toggle("pushed")})),(0,o.$)("#prev").on("click",i.h.prevQ),(0,o.$)("#next").on("click",i.h.nextQ),window.location.pathname.match(/result/)&&(0,o.$)(".test-do__finish-btn").el[0].classList.add("inactive"),(0,o.$)(".test-do__finish-btn").on("click",(async function(e){let t=e.target;if(t.classList.contains("inactive"))return!1;if("btnn"!==t.id)return!1;if("ПРОЙТИ ТЕСТ ЗАНОВО"==t.text)return void location.reload();let n=await(0,o.v_)("/test/getCorrectAnswers",{});n=JSON.parse(n);let i=function(e){let t={token:document.querySelector('meta[name="token"]').getAttribute("content"),questionCnt:(0,o.$)(".question").el.length,errorCnt:e,pageCache:`<!DOCTYPE ${document.doctype.name}>`+document.documentElement.outerHTML,testId:(0,o.$)("[data-test-id]").el[0].dataset.testId,test_name:(0,o.$)(".test-name").el[0].innerText,userName:(0,o.$)(".user-menu__fio").el[0].innerText},n=new FormData;return n.append("token",t.token),n.append("questionCnt",t.questionCnt),n.append("errorCnt",t.errorCnt),n.append("pageCache",t.pageCache),n.append("testId",t.testId),n.append("test_name",t.test_name),n.append("userName",t.userName),n}(function(e){let t=(0,o.$)(".question").el;return Array.from(t).map(((t,n)=>{let i=t.querySelectorAll(".a"),a=[];Array.from(i).map((t=>{let n=t.getElementsByTagName("input")[0],o=n.id.replace("answer-",""),i=t.getElementsByTagName("label")[0];(function(e,t,n){return t.checked&&e?(n.classList.add("done"),!0):!(t.checked&&!e)&&(!t.checked&&e?(n.classList.add("done"),n.classList.add("done"),!1):!t.checked&&!e||void 0)})(-1!==e.indexOf(o),n,i)||a.push(!0)}));let r=+t.dataset.id,l=(0,o.$)('.pagination [data-pagination="'+r+'"]').el[0];a.length?(0,o.$)(l).addClass("redShadow"):(0,o.$)(l).addClass("greenShadow")})),(0,o.$)(".redShadow").el.length}(n));await(0,o.v_)("/test/cachePageSendEmail",i)&&((0,o.$)("#btnn").el[0].href=location.href,(0,o.$)("#btnn").el[0].text="ПРОЙТИ ТЕСТ ЗАНОВО")}))},310:function(e,t,n){n.d(t,{V:function(){return i}});var o=n(400);let i={el:e=>{let t=e.parentNode.querySelectorAll(".answer"),n=0;t.length&&(n=+(0,o.$)(t[t.length-1]).find(".answer__sort").innerText);let a=(0,o.$)(".answer__create").find(".answer").cloneNode(!0);return a.classList.add("answer"),a.classList.remove("answer__create"),{el:a,id:"new",q_id:+e.closest(".question-edit").id,previous_sort:n,sort:(0,o.$)(a).find(".answer__sort"),checked:(0,o.$)(a).find("input"),text:(0,o.$)(a).find(".answer__text"),delete:(0,o.$)((0,o.$)(a).find(".answer__delete")).on("click",(function(){i.del(this)}))}},getModelForServer:e=>({answer:"",parent_question:e.q_id,correct_answer:0,pica:""}),async create(e){let t=e.target,n=await async function(e){let t=i.getModelForServer(i.el(e)),n=await(0,o.v_)("/answer/create",t);return n=JSON.parse(n),n.id}(t);!function(e){let n=i.el(t);n.checked.checked=!1,n.el.dataset.answerId=e,n.text.innerText="",n.sort.innerText=n.previous_sort+1,n.el.style.display="flex",t.before(n.el),n.el.style.opacity=1}(n)},async del(e){let t=e.target;confirm("Удалить этот ответ?")&&(await async function(e){let t=+e.closest(".answer").dataset.answerId,n=await(0,o.v_)("/answer/delete",{a_id:t});n=JSON.parse(n),"ok"===n.msg&&o.gk.show("Ответ удален")}(t),function(e){e.closest(".answer").remove()}(t))}}},314:function(e,t,n){n.d(t,{A:function(){return a}});var o=n(400),i=n(310);let a={sort:async function(e){let t=[...a.questions()].filter((function(t,n){if(n+1<e)return t})),n=t.map((e=>e.id)),i=await(0,o.v_)("/question/sort",{toChange:n});i=JSON.parse(i),i.msg&&o.gk.show(i.msg),t.map(((e,t)=>{(0,o.$)(e).find(".question__sort").innerText=t+1}))},showTip:(e,t)=>{let n=t.target;document.createElement("div"),"save"===e&&(0,o.Z$)(n,"сохранить")},showFirst:()=>{let e=a.cloneEmptyModel();if(!e)return;let t=a.viewModel(e);t.sort.innerText="1",(0,o.$)(t.save).on("click",a.save),(0,o.$)(t.del).on("click",a.delete),(0,o.$)(e).addClass("question-edit"),(0,o.$)(e).removeClass("question__create"),(0,o.$)(".questions").el[0].prepend(e)},cloneEmptyModel:()=>{let e=(0,o.$)(".questions .question__create .question-edit").el[0];if(e)return e.cloneNode(!0)},showAnswers:e=>{let t=e.target,n=t.parentNode.parentNode,i=(0,o.$)(n).find(".question__answers");i.classList.toggle("height"),i.classList.toggle("scale"),t.classList.toggle("rotate")},viewModel:e=>({id:+e.id,el:e,sort:e.querySelector(".question__sort"),save:e.querySelector(".question__save"),text:e.querySelector(".question__text"),del:e.querySelector(".question__delete"),createAnswerButton:e.querySelector(".answer__create-button"),addButton:(0,o.$)((0,o.$)(".questions").el[0]).find(".question__create-button")}),serverModel:()=>({question:{id:null,qustion:"",parent:+window.location.href.split("/").pop(),sort:a.questionsCount()}}),questions:()=>(0,o.$)(".questions>.question-edit").el,questionsCount:()=>(0,o.$)(".questions>.question-edit").el.length,create:async e=>{let t=await a.createOnServer(e);t&&a.createOnView(t)},createOnServer:async()=>{let e=a.serverModel(),t=await(0,o.v_)("/question/updateOrCreate",{question:e.question,answers:{}});return t=await JSON.parse(t),t.id},createOnView:e=>{let t=a.cloneEmptyModel(),n=a.viewModel(t);(0,o.$)(n.save).on("click",a.save),(0,o.$)(n.del).on("click",a.delete),(0,o.$)(n.text).on("click",a.showAnswers),(0,o.$)(n.createAnswerButton).on("click",i.V.create),n.sort.innerText=a.questions().length+1,n.text.innerText="",n.el.id=e,n.addButton.before(t)},save:async e=>{let t=e.target.closest(".question-edit"),n=await(0,o.v_)("/question/UpdateOrCreate",{question:a.getModelForServer(t),answers:a.getAnswers(t)});n=await JSON.parse(n),o.gk.show(n.msg)},delete:async e=>{if(confirm("Удалить вопрос со всеми его ответами?")){let t=a.viewModel(e.target.closest(".question-edit")),n=t.id,i=await a.deleteFromServer(n);i&&(a.deleteFromView(t),o.gk.show(i.msg))}},deleteFromView:async e=>{e.el.remove()},deleteFromServer:async e=>{let t=await(0,o.v_)("/question/delete",{q_id:e});return JSON.parse(t)},getModelForServer:e=>({id:+e.id,parent:+(0,o.$)(".test-name").el[0].getAttribute("value"),picq:"",qustion:(0,o.$)(e).find(".question__text").innerText,sort:+(0,o.$)(e).find(".question__sort").innerText}),getAnswers:e=>[...e.querySelectorAll(".answer")].map((t=>({id:+t.dataset.answerId,answer:t.querySelector(".answer__text").innerText,correct_answer:+t.querySelector('[type="checkbox"]').checked,parent_question:+e.id,pica:""})),e)}},559:function(e,t,n){n.d(t,{h:function(){return i}});var o=n(400);const i={markCurrentInMenu:()=>{let e=(0,o.$)(".test-name").el[0];if(e){e=+e.getAttribute("value");let t=(0,o.$)(".accordion a").el;Array.from(t).filter((t=>{+t.dataset.id===e&&t.classList.add("current")}))}},nextQ:()=>{let e=i.currentQ();if(e.id>e.navLength-2)return!1;let t=i.aimNavIdFunction(e.id,"next"),n=i.aimQElFunction(e,"next");i.pushNav(e.id,t),i.pushQ(e.QEl,n)},prevQ:()=>{let e=i.currentQ();if(e.id<1)return!1;let t=i.aimNavIdFunction(e.id,"back"),n=i.aimQElFunction(e,"back");i.pushNav(e.id,t),i.pushQ(e.QEl,n)},pushNav:(e,t)=>{(0,o.$)("[data-pagination]").el[e].classList.toggle("nav-active"),(0,o.$)("[data-pagination]").el[t].classList.toggle("nav-active")},pushQ:(e,t)=>{e.classList.toggle("flex1"),t.classList.toggle("flex1")},aimNavIdFunction:(e,t)=>{let n=e;switch(!0){case"next"===t:return n+1;case"back"===t:return n-1}},aimQElFunction:(e,t)=>{switch(!0){case"next"===t:return e.QNextEl;case"back"===t:return e.QPrevc}},currentQ:()=>({id:(0,o.$)(".nav-active").el[0].innerText-1,QEl:(0,o.$)(".question.flex1").el[0],navLength:(0,o.$)("[data-pagination]").el.length,QPrevc:(0,o.$)(".question.flex1").el[0].previousElementSibling,QNextEl:(0,o.$)(".question.flex1").el[0].nextElementSibling}),serverModel:()=>({id:+window.location.href.split("/").pop(),test_name:(0,o.$)("#test_name").el[0].value,enable:+(0,o.$)("#enable").el[0].checked,isTest:+(0,o.$)("[isTest]").el[0].getAttribute("isTest"),parent:(0,o.$)("select").selectedIndexValue()}),viewModel:()=>({id:+window.location.href.split("/").pop(),test_name:(0,o.$)("#test_name").text(),enable:(0,o.$)("#enable").el[0],parent:(0,o.$)("select").selectedIndexValue()}),id:e=>e??(0,o.$)(".test-name").value(),children:()=>{let e=(0,o.$)(".children").el;return"не содержит"===!e[0].innerText&&e.length},path_create:async()=>{let e=i.serverModel();e.id=0,e.isTest=0;let t=await(0,o.v_)("/test/create",e);t=await JSON.parse(t),t&&(window.location.href="/adminsc/test/edit/"+(t.id-1))},name:()=>(0,o.$)(".test-name").el[0].innerText,create:async()=>{let e=i.serverModel();e.id=0,e.isTest=1;let t=await(0,o.v_)("/test/updateOrCreate",e);t=await JSON.parse(t),t&&(window.location.href="/adminsc/test/edit/"+(t.id-1))},update:async()=>{let e=i.serverModel(),t=`/adminsc/test/update/${e.id}`,n=await(0,o.v_)(t,e);n=await JSON.parse(n),n&&(window.location.href=`/adminsc/test/edit/${e.id}`)},delete:async function(){if(i.children())return o.gk.show("Сначала удалите все тесты из папки"),!1;i.viewModel().enable.checked=!1;let e=i.serverModel(),t=await(0,o.v_)("/test/delete",{test:e});t=await JSON.parse(t),t.notAdmin?(o.gk.show("Видимость теста скрыта. Чтобы удалить полностью - обратитесь к ГД"),setTimeout((()=>{window.location="/adminsc/test/edit/400"}),4e3)):window.location="/adminsc/test/edit/400"}}},333:function(e,t,n){n(404),n(446)},400:function(e,t,n){n.d(t,{Z$:function(){return l},gk:function(){return o},v_:function(){return i},$:function(){return r}});let o={show:function(e,t){let n=this.el("div","popup__close");n.innerText="X";let o=this.el("div","popup__item");o.innerText=e,o.append(n);let i=r(".popup").el[0];i||(i=this.el("div","popup")),i.append(o),i.addEventListener("click",this.close),document.body.append(i),setTimeout((()=>{o.classList.remove("popup__item"),o.classList.add("popup-hide")}),5e3),setTimeout((()=>{o.remove(),t&&t()}),5950)},close:function(e){e.target.classList.contains("popup__close")&&this.closest(".popup").remove()},el:function(e,t){let n=document.createElement(e);return n.classList.add(t),n}};async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,o){t.token=document.querySelector('meta[name="token"]').getAttribute("content");let i=new XMLHttpRequest;i.open("POST",e,!0),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),t instanceof FormData?i.send(t):(i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send("param="+JSON.stringify(t))),i.onerror=function(){o(Error("Network Error"))},i.onload=async function(){n(i.response)}}))}function a(e){this.el=e,this.elType={}.toString.call(e),this.on=function(t,n){this.el&&("[object HTMLDivElement]"===this.elType&&this.el.addEventListener(t,n),"[object NodeList]"===this.elType&&e.forEach((e=>e.addEventListener(t,n))))},this.value=function(){return this.el[0].getAttribute("value")},this.attr=function(e,t){return t&&this.el[0].setAttribute(e,t),this.el[0].getAttribute(e)},this.selectedIndexValue=function(){if(this.el.length)return this.el[0].selectedOptions[0].value},this.options=function(){if(this.el.length)return this.el[0].options},this.count=function(){return this.el.length},this.text=function(){if(this.el.length)return this.el[0].innerText},this.checked=function(){if(this.el.length)return this.el[0].checked},this.getWithStyle=function(t,n){let o=[];return e.forEach((e=>{e.style[t]===n&&o.push(e)})),o},this.addClass=function(e){"[object HTMLDivElement]"===this.elType&&this.el.classList.add(e),["[object NodeList]","[object Array]"].includes(this.elType)&&this.el.forEach((t=>{t.classList.add(e)}))},this.removeClass=function(e){"[object HTMLDivElement]"===this.elType&&this.el.classList.remove(e),["[object NodeList]","[object Array]"].includes(this.elType)&&this.el.forEach((t=>{t.classList.remove(e)}))},this.hasClass=function(e){if(this.el.classList.contains(e))return!0},this.append=function(e){this.el[0].appendChild(e)},this.find=function(e){return["[object HTMLDivElement]","[object HTMLInputElement]"].includes(this.elType)?this.el.querySelector(e):["[object NodeList]","[object Array]"].includes(this.elType)?this.el[0].querySelector(e):void 0},this.css=function(t,n){if(!n)return this.el[0].style[t];"[object HTMLDivElement]"===this.elType&&(this.el.style[t]=n),"[object NodeList]"===this.elType&&e.forEach((e=>{e.style[t]=n}))}}function r(e){let t="";return t="string"==typeof e?document.querySelectorAll(e):e,new a(t)}function l(e){[...e.els].map((t=>{t.onmouseenter=function(){let n=document.createElement("div");r(n).addClass("tip"),n.innerText=e.message,t.append(n),n.addEventListener("mousemove",(()=>n.remove()).bind(n))}.bind(e),t.onmouseleave=()=>{t.querySelector(".tip").remove()}}),[e])}},454:function(e,t,n){var o=n(400);function i(e){a();let t=e.target;t.append(function(e){let t=document.createElement("a"),n=e.target.dataset.id??e.target.getAttribute("for");return t.classList.add("update"),t.href=`/adminsc/test/update/${n}`,t}(e)),t.addEventListener("mouseleave",a.bind(null,this))}function a(){document.querySelectorAll(".accordion .update").forEach((e=>e.remove()))}function r(e,t,n){e.style.maxHeight="0px",n&&n()}(0,o.$)(".accordion label").on("click",(function(e){let t=e.target.previousElementSibling,n=t.closest("ul"),o=t.nextElementSibling.nextElementSibling;if(t.checked)r(o);else{n.style.height="auto";let e=function(e,t,n){return e.style.maxHeight=e.scrollHeight+"px",e.scrollHeight}(o);!function(e,t){if(!e.classList.contains("accordion")){let n=t+parseInt(e.style.maxHeight);e.style.maxHeight=n+"px"}}(n,e),function(e){Array.from(e.children).map((e=>{Array.from(e.children).map((e=>{e.type&&"checkbox"===e.type&&e.checked&&r(e.nextElementSibling.nextElementSibling,0,(function(){e.checked=!1}))}))}))}(n)}})),(0,o.$)(".test-edit__accordion .accordion a").on("mouseenter",i),(0,o.$)(".test-edit__accordion .accordion label").on("mouseenter",i)},446:function(e,t,n){n.d(t,{nl:function(){return a}});var o=n(400),i=n(314);function a(){let e=(0,o.$)("[data-pagination]").el;if(!e[0])return!1;Array.from(e).map((e=>{e.classList.remove("nav-active")})),e[0].classList.add("nav-active")}n(310),(0,o.$)("[data-pagination]:first-child").addClass("nav-active"),(0,o.$)(".test-edit__content").addClass("flex1"),(0,o.$)(".pagination").on("click",(function(e){e.target.classList.contains("add-question")?async function(e){let t=+(0,o.$)(".test-name").value(),n=(0,o.$)("[data-pagination]").count(),a=await(0,o.v_)("/question/show",{testid:t,questCount:n});a=JSON.parse(a);let r=a.block;(0,o.$)(".blocks").el[0].insertAdjacentHTML("afterBegin",r);let l=(0,o.$)(".blocks .block:first-child").el[0];document.querySelector(".flex1").classList.remove("flex1"),(0,o.$)(l).addClass("flex1");let s=(0,o.$)(l).find(".question__save");(0,o.$)(s).on("click",(0,i.A)().save)}():e.target.getAttribute("data-pagination")&&function(e){if(e.classList.contains("nav-active"))return;let t=(0,o.$)(".pagination .nav-active").el[0];t.classList.remove("nav-active"),e.classList.add("nav-active");let n=t.dataset.pagination;(0,o.$)(`#question-${n}`).removeClass("flex1");let i=e.dataset.pagination;(0,o.$)(`#question-${i}`).addClass("flex1")}(e.target)}))}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){const e="select_show",t="select__option_selected",o=".select_show",i=".select__option_selected";class a{constructor(e,t){this._elRoot="string"==typeof e?document.querySelector(e):e,this._params=t||{},this._params.options&&(this._elRoot.classList.add("select"),this._elRoot.innerHTML=a.template(this._params)),this._elToggle=this._elRoot.querySelector('[data-select="toggle"]'),this._elRoot.addEventListener("click",this._onClick.bind(this))}_onClick(e){const t=e.target;switch(t.closest("[data-select]").dataset.select){case"toggle":this.toggle();break;case"option":this._changeValue(t)}}_update(e){const n=this._elRoot.querySelector(i);return n&&n.classList.remove(t),e.classList.add(t),this._elToggle.textContent=e.textContent,this._elToggle.value=e.dataset.value,this._elToggle.dataset.index=e.dataset.index,this._elRoot.dispatchEvent(new CustomEvent("select.change")),this._params.onSelected&&this._params.onSelected(this,e),e.dataset.value}_reset(){const e=this._elRoot.querySelector(i);return e&&e.classList.remove(t),this._elToggle.textContent="Выберите из списка",this._elToggle.value="",this._elToggle.dataset.index=-1,this._elRoot.dispatchEvent(new CustomEvent("select.change")),this._params.onSelected&&this._params.onSelected(this,null),""}_changeValue(e){e.classList.contains(t)||(this._update(e),this.hide())}show(){document.querySelectorAll(o).forEach((t=>{t.classList.remove(e)})),this._elRoot.classList.add(e)}hide(){this._elRoot.classList.remove(e)}toggle(){this._elRoot.classList.contains(e)?this.hide():this.show()}dispose(){this._elRoot.removeEventListener("click",this._onClick)}get value(){return this._elToggle.value}set value(e){let t=!1;if(this._elRoot.querySelectorAll(".select__option").forEach((n=>{if(n.dataset.value===e)return t=!0,this._update(n)})),!t)return this._reset()}get selectedIndex(){return this._elToggle.dataset.index}set selectedIndex(e){const t=this._elRoot.querySelector(`.select__option[data-index="${e}"]`);return t?this._update(t):this._reset()}}a.template=e=>{const t=e.name,n=e.options,o=e.targetValue;let i=[],a=-1,r="",l="Выберите из списка";return n.forEach(((e,t)=>{let n="";e[0]===o&&(n=" select__option_selected",a=t,r=e[0],l=e[1]),i.push(`<li class='select__option${n}' data-select='option' data-value='${e[0]}' data-index='${t}'>${e[1]}</li>`)})),`<label for="">Папка</label>\n<button \nclass="select__toggle" \nname="${t}" \nvalue="${r}" \ndata-select="toggle" \ndata-index="${a}">\n${l}\n</button>\n  <div class="select__dropdown">\n    <ul class="select__options">\n${i.join("")}</ul>\n  </div>`},document.addEventListener("click",(t=>{t.target.closest(".select")||document.querySelectorAll(o).forEach((t=>{t.classList.remove(e)}))})),n(333);var r=n(400),l=n(559);(0,r.$)(".test__save").on("click",l.h.update),(0,r.$)(".test__delete").on("click",l.h.delete),(0,r.$)(".test-path__create").on("click",l.h.path_create),(0,r.$)(".test__create").on("click",l.h.create);var s=n(314),c=n(310);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f.apply(this,arguments)}function g(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function v(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var m=v(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),b=v(/Edge/i),_=v(/firefox/i),w=v(/safari/i)&&!v(/chrome/i)&&!v(/android/i),y=v(/iP(ad|od|hone)/i),E=v(/chrome/i)&&v(/android/i),S={capture:!1,passive:!1};function T(e,t,n){e.addEventListener(t,n,!m&&S)}function x(e,t,n){e.removeEventListener(t,n,!m&&S)}function C(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function $(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function k(e,t,n,o){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&C(e,t):C(e,t))||o&&e===n)return e;if(e===n)break}while(e=$(e))}return null}var D,A=/\s+/g;function q(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(A," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(A," ")}}function N(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in o||-1!==t.indexOf("webkit")||(t="-webkit-"+t),o[t]=n+("string"==typeof n?"":"px")}}function O(e,t){var n="";if("string"==typeof e)n=e;else do{var o=N(e,"transform");o&&"none"!==o&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function M(e,t,n){if(e){var o=e.getElementsByTagName(t),i=0,a=o.length;if(n)for(;i<a;i++)n(o[i],i);return o}return[]}function L(){return document.scrollingElement||document.documentElement}function I(e,t,n,o,i){if(e.getBoundingClientRect||e===window){var a,r,l,s,c,d,u;if(e!==window&&e.parentNode&&e!==L()?(r=(a=e.getBoundingClientRect()).top,l=a.left,s=a.bottom,c=a.right,d=a.height,u=a.width):(r=0,l=0,s=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!m))do{if(i&&i.getBoundingClientRect&&("none"!==N(i,"transform")||n&&"static"!==N(i,"position"))){var h=i.getBoundingClientRect();r-=h.top+parseInt(N(i,"border-top-width")),l-=h.left+parseInt(N(i,"border-left-width")),s=r+a.height,c=l+a.width;break}}while(i=i.parentNode);if(o&&e!==window){var p=O(i||e),f=p&&p.a,g=p&&p.d;p&&(s=(r/=g)+(d/=g),c=(l/=f)+(u/=f))}return{top:r,left:l,bottom:s,right:c,width:u,height:d}}}function P(e,t,n){for(var o=j(e,!0),i=I(e)[t];o;){var a=I(o)[n];if(!("top"===n||"left"===n?i>=a:i<=a))return o;if(o===L())break;o=j(o,!1)}return!1}function R(e,t,n,o){for(var i=0,a=0,r=e.children;a<r.length;){if("none"!==r[a].style.display&&r[a]!==Be.ghost&&(o||r[a]!==Be.dragged)&&k(r[a],n.draggable,e,!1)){if(i===t)return r[a];i++}a++}return null}function F(e,t){for(var n=e.lastElementChild;n&&(n===Be.ghost||"none"===N(n,"display")||t&&!C(n,t));)n=n.previousElementSibling;return n||null}function X(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Be.clone||t&&!C(e,t)||n++;return n}function H(e){var t=0,n=0,o=L();if(e)do{var i=O(e),a=i.a,r=i.d;t+=e.scrollLeft*a,n+=e.scrollTop*r}while(e!==o&&(e=e.parentNode));return[t,n]}function j(e,t){if(!e||!e.getBoundingClientRect)return L();var n=e,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=N(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return L();if(o||t)return n;o=!0}}}while(n=n.parentNode);return L()}function Y(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function B(e,t){return function(){if(!D){var n=arguments,o=this;1===n.length?e.call(o,n[0]):e.apply(o,n),D=setTimeout((function(){D=void 0}),t)}}}function Q(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function V(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var W="Sortable"+(new Date).getTime();var z=[],J={initializeByDefault:!0},Z={mount:function(e){for(var t in J)J.hasOwnProperty(t)&&!(t in e)&&(e[t]=J[t]);z.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),z.push(e)},pluginEvent:function(e,t,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var i=e+"Global";z.forEach((function(o){t[o.pluginName]&&(t[o.pluginName][i]&&t[o.pluginName][i](u({sortable:t},n)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](u({sortable:t},n)))}))},initializePlugins:function(e,t,n,o){for(var i in z.forEach((function(o){var i=o.pluginName;if(e.options[i]||o.initializeByDefault){var a=new o(e,t,e.options);a.sortable=e,a.options=e.options,e[i]=a,f(n,a.defaults)}})),e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);void 0!==a&&(e.options[i]=a)}},getEventProperties:function(e,t){var n={};return z.forEach((function(o){"function"==typeof o.eventProperties&&f(n,o.eventProperties.call(t[o.pluginName],e))})),n},modifyOption:function(e,t,n){var o;return z.forEach((function(i){e[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[t]&&(o=i.optionListeners[t].call(e[i.pluginName],n))})),o}};var G=["evt"],U=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.evt,i=g(n,G);Z.pluginEvent.bind(Be)(e,t,u({dragEl:ee,parentEl:te,ghostEl:ne,rootEl:oe,nextEl:ie,lastDownEl:ae,cloneEl:re,cloneHidden:le,dragStarted:we,putSortable:pe,activeSortable:Be.active,originalEvent:o,oldIndex:se,oldDraggableIndex:de,newIndex:ce,newDraggableIndex:ue,hideGhostForTarget:Xe,unhideGhostForTarget:He,cloneNowHidden:function(){le=!0},cloneNowShown:function(){le=!1},dispatchSortableEvent:function(e){K({sortable:t,name:e,originalEvent:o})}},i))};function K(e){!function(e){var t=e.sortable,n=e.rootEl,o=e.name,i=e.targetEl,a=e.cloneEl,r=e.toEl,l=e.fromEl,s=e.oldIndex,c=e.newIndex,d=e.oldDraggableIndex,h=e.newDraggableIndex,p=e.originalEvent,f=e.putSortable,g=e.extraEventProperties;if(t=t||n&&n[W]){var v,_=t.options,w="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||m||b?(v=document.createEvent("Event")).initEvent(o,!0,!0):v=new CustomEvent(o,{bubbles:!0,cancelable:!0}),v.to=r||n,v.from=l||n,v.item=i||n,v.clone=a,v.oldIndex=s,v.newIndex=c,v.oldDraggableIndex=d,v.newDraggableIndex=h,v.originalEvent=p,v.pullMode=f?f.lastPutMode:void 0;var y=u(u({},g),Z.getEventProperties(o,t));for(var E in y)v[E]=y[E];n&&n.dispatchEvent(v),_[w]&&_[w].call(t,v)}}(u({putSortable:pe,cloneEl:re,targetEl:ee,rootEl:oe,oldIndex:se,oldDraggableIndex:de,newIndex:ce,newDraggableIndex:ue},e))}var ee,te,ne,oe,ie,ae,re,le,se,ce,de,ue,he,pe,fe,ge,ve,me,be,_e,we,ye,Ee,Se,Te,xe=!1,Ce=!1,$e=[],ke=!1,De=!1,Ae=[],qe=!1,Ne=[],Oe="undefined"!=typeof document,Me=y,Le=b||m?"cssFloat":"float",Ie=Oe&&!E&&!y&&"draggable"in document.createElement("div"),Pe=function(){if(Oe){if(m)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Re=function(e,t){var n=N(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=R(e,0,t),a=R(e,1,t),r=i&&N(i),l=a&&N(a),s=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+I(i).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+I(a).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&r.float&&"none"!==r.float){var d="left"===r.float?"left":"right";return!a||"both"!==l.clear&&l.clear!==d?"horizontal":"vertical"}return i&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||s>=o&&"none"===n[Le]||a&&"none"===n[Le]&&s+c>o)?"vertical":"horizontal"},Fe=function(e){function t(e,n){return function(o,i,a,r){var l=o.options.group.name&&i.options.group.name&&o.options.group.name===i.options.group.name;if(null==e&&(n||l))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(o,i,a,r),n)(o,i,a,r);var s=(n?o:i).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},o=e.group;o&&"object"==h(o)||(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},Xe=function(){!Pe&&ne&&N(ne,"display","none")},He=function(){!Pe&&ne&&N(ne,"display","")};Oe&&document.addEventListener("click",(function(e){if(Ce)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Ce=!1,!1}),!0);var je=function(e){if(ee){e=e.touches?e.touches[0]:e;var t=(i=e.clientX,a=e.clientY,$e.some((function(e){var t=e[W].options.emptyInsertThreshold;if(t&&!F(e)){var n=I(e),o=i>=n.left-t&&i<=n.right+t,l=a>=n.top-t&&a<=n.bottom+t;return o&&l?r=e:void 0}})),r);if(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[W]._onDragOver(n)}}var i,a,r},Ye=function(e){ee&&ee.parentNode[W]._isOutsideThisEl(e.target)};function Be(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=f({},t),e[W]=this;var n,o,i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Re(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Be.supportPointer&&"PointerEvent"in window&&!w,emptyInsertThreshold:5};for(var a in Z.initializePlugins(this,e,i),i)!(a in t)&&(t[a]=i[a]);for(var r in Fe(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&Ie,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?T(e,"pointerdown",this._onTapStart):(T(e,"mousedown",this._onTapStart),T(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(T(e,"dragover",this),T(e,"dragenter",this)),$e.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),f(this,(o=[],{captureAnimationState:function(){o=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(e){if("none"!==N(e,"display")&&e!==Be.ghost){o.push({target:e,rect:I(e)});var t=u({},o[o.length-1].rect);if(e.thisAnimationDuration){var n=O(e,!0);n&&(t.top-=n.f,t.left-=n.e)}e.fromRect=t}}))},addAnimationState:function(e){o.push(e)},removeAnimationState:function(e){o.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n);return-1}(o,{target:e}),1)},animateAll:function(e){var t=this;if(!this.options.animation)return clearTimeout(n),void("function"==typeof e&&e());var i=!1,a=0;o.forEach((function(e){var n=0,o=e.target,r=o.fromRect,l=I(o),s=o.prevFromRect,c=o.prevToRect,d=e.rect,u=O(o,!0);u&&(l.top-=u.f,l.left-=u.e),o.toRect=l,o.thisAnimationDuration&&Y(s,l)&&!Y(r,l)&&(d.top-l.top)/(d.left-l.left)==(r.top-l.top)/(r.left-l.left)&&(n=function(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}(d,s,c,t.options)),Y(l,r)||(o.prevFromRect=r,o.prevToRect=l,n||(n=t.options.animation),t.animate(o,d,l,n)),n&&(i=!0,a=Math.max(a,n),clearTimeout(o.animationResetTimer),o.animationResetTimer=setTimeout((function(){o.animationTime=0,o.prevFromRect=null,o.fromRect=null,o.prevToRect=null,o.thisAnimationDuration=null}),n),o.thisAnimationDuration=n)})),clearTimeout(n),i?n=setTimeout((function(){"function"==typeof e&&e()}),a):"function"==typeof e&&e(),o=[]},animate:function(e,t,n,o){if(o){N(e,"transition",""),N(e,"transform","");var i=O(this.el),a=i&&i.a,r=i&&i.d,l=(t.left-n.left)/(a||1),s=(t.top-n.top)/(r||1);e.animatingX=!!l,e.animatingY=!!s,N(e,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),N(e,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),N(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){N(e,"transition",""),N(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),o)}}}))}function Qe(e,t,n,o,i,a,r,l){var s,c,d=e[W],u=d.options.onMove;return!window.CustomEvent||m||b?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=o,s.related=i||t,s.relatedRect=a||I(t),s.willInsertAfter=l,s.originalEvent=r,e.dispatchEvent(s),u&&(c=u.call(d,s,r)),c}function Ve(e){e.draggable=!1}function We(){qe=!1}function ze(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function Je(e){return setTimeout(e,0)}function Ze(e){return clearTimeout(e)}Be.prototype={constructor:Be,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(ye=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,ee):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,o=this.options,i=o.preventOnFilter,a=e.type,r=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(r||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=o.filter;if(function(e){Ne.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&Ne.push(o)}}(n),!ee&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||o.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!w||!l||"SELECT"!==l.tagName.toUpperCase())&&!((l=k(l,o.draggable,n,!1))&&l.animated||ae===l)){if(se=X(l),de=X(l,o.draggable),"function"==typeof c){if(c.call(this,e,l,this))return K({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:n,fromEl:n}),U("filter",t,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(o){if(o=k(s,o.trim(),n,!1))return K({sortable:t,rootEl:o,name:"filter",targetEl:l,fromEl:n,toEl:n}),U("filter",t,{evt:e}),!0}))))return void(i&&e.cancelable&&e.preventDefault());o.handle&&!k(s,o.handle,n,!1)||this._prepareDragStart(e,r,l)}}},_prepareDragStart:function(e,t,n){var o,i=this,a=i.el,r=i.options,l=a.ownerDocument;if(n&&!ee&&n.parentNode===a){var s=I(n);if(oe=a,te=(ee=n).parentNode,ie=ee.nextSibling,ae=n,he=r.group,Be.dragged=ee,fe={target:ee,clientX:(t||e).clientX,clientY:(t||e).clientY},be=fe.clientX-s.left,_e=fe.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,ee.style["will-change"]="all",o=function(){U("delayEnded",i,{evt:e}),Be.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!_&&i.nativeDraggable&&(ee.draggable=!0),i._triggerDragStart(e,t),K({sortable:i,name:"choose",originalEvent:e}),q(ee,r.chosenClass,!0))},r.ignore.split(",").forEach((function(e){M(ee,e.trim(),Ve)})),T(l,"dragover",je),T(l,"mousemove",je),T(l,"touchmove",je),T(l,"mouseup",i._onDrop),T(l,"touchend",i._onDrop),T(l,"touchcancel",i._onDrop),_&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ee.draggable=!0),U("delayStart",this,{evt:e}),!r.delay||r.delayOnTouchOnly&&!t||this.nativeDraggable&&(b||m))o();else{if(Be.eventCanceled)return void this._onDrop();T(l,"mouseup",i._disableDelayedDrag),T(l,"touchend",i._disableDelayedDrag),T(l,"touchcancel",i._disableDelayedDrag),T(l,"mousemove",i._delayedDragTouchMoveHandler),T(l,"touchmove",i._delayedDragTouchMoveHandler),r.supportPointer&&T(l,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(o,r.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ee&&Ve(ee),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;x(e,"mouseup",this._disableDelayedDrag),x(e,"touchend",this._disableDelayedDrag),x(e,"touchcancel",this._disableDelayedDrag),x(e,"mousemove",this._delayedDragTouchMoveHandler),x(e,"touchmove",this._delayedDragTouchMoveHandler),x(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?T(document,"pointermove",this._onTouchMove):T(document,t?"touchmove":"mousemove",this._onTouchMove):(T(ee,"dragend",this),T(oe,"dragstart",this._onDragStart));try{document.selection?Je((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(xe=!1,oe&&ee){U("dragStarted",this,{evt:t}),this.nativeDraggable&&T(document,"dragover",Ye);var n=this.options;!e&&q(ee,n.dragClass,!1),q(ee,n.ghostClass,!0),Be.active=this,e&&this._appendGhost(),K({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ge){this._lastX=ge.clientX,this._lastY=ge.clientY,Xe();for(var e=document.elementFromPoint(ge.clientX,ge.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ge.clientX,ge.clientY))!==t;)t=e;if(ee.parentNode[W]._isOutsideThisEl(e),t)do{if(t[W]&&t[W]._onDragOver({clientX:ge.clientX,clientY:ge.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break;e=t}while(t=t.parentNode);He()}},_onTouchMove:function(e){if(fe){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,i=e.touches?e.touches[0]:e,a=ne&&O(ne,!0),r=ne&&a&&a.a,l=ne&&a&&a.d,s=Me&&Te&&H(Te),c=(i.clientX-fe.clientX+o.x)/(r||1)+(s?s[0]-Ae[0]:0)/(r||1),d=(i.clientY-fe.clientY+o.y)/(l||1)+(s?s[1]-Ae[1]:0)/(l||1);if(!Be.active&&!xe){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(ne){a?(a.e+=c-(ve||0),a.f+=d-(me||0)):a={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");N(ne,"webkitTransform",u),N(ne,"mozTransform",u),N(ne,"msTransform",u),N(ne,"transform",u),ve=c,me=d,ge=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ne){var e=this.options.fallbackOnBody?document.body:oe,t=I(ee,!0,Me,!0,e),n=this.options;if(Me){for(Te=e;"static"===N(Te,"position")&&"none"===N(Te,"transform")&&Te!==document;)Te=Te.parentNode;Te!==document.body&&Te!==document.documentElement?(Te===document&&(Te=L()),t.top+=Te.scrollTop,t.left+=Te.scrollLeft):Te=L(),Ae=H(Te)}q(ne=ee.cloneNode(!0),n.ghostClass,!1),q(ne,n.fallbackClass,!0),q(ne,n.dragClass,!0),N(ne,"transition",""),N(ne,"transform",""),N(ne,"box-sizing","border-box"),N(ne,"margin",0),N(ne,"top",t.top),N(ne,"left",t.left),N(ne,"width",t.width),N(ne,"height",t.height),N(ne,"opacity","0.8"),N(ne,"position",Me?"absolute":"fixed"),N(ne,"zIndex","100000"),N(ne,"pointerEvents","none"),Be.ghost=ne,e.appendChild(ne),N(ne,"transform-origin",be/parseInt(ne.style.width)*100+"% "+_e/parseInt(ne.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,i=n.options;U("dragStart",this,{evt:e}),Be.eventCanceled?this._onDrop():(U("setupClone",this),Be.eventCanceled||((re=V(ee)).draggable=!1,re.style["will-change"]="",this._hideClone(),q(re,this.options.chosenClass,!1),Be.clone=re),n.cloneId=Je((function(){U("clone",n),Be.eventCanceled||(n.options.removeCloneOnHide||oe.insertBefore(re,ee),n._hideClone(),K({sortable:n,name:"clone"}))})),!t&&q(ee,i.dragClass,!0),t?(Ce=!0,n._loopId=setInterval(n._emulateDragOver,50)):(x(document,"mouseup",n._onDrop),x(document,"touchend",n._onDrop),x(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",i.setData&&i.setData.call(n,o,ee)),T(document,"drop",n),N(ee,"transform","translateZ(0)")),xe=!0,n._dragStartId=Je(n._dragStarted.bind(n,t,e)),T(document,"selectstart",n),we=!0,w&&N(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,o,i,a=this.el,r=e.target,l=this.options,s=l.group,c=Be.active,d=he===s,h=l.sort,p=pe||c,f=this,g=!1;if(!qe){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),r=k(r,l.draggable,a,!0),O("dragOver"),Be.eventCanceled)return g;if(ee.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||f._ignoreWhileAnimating===r)return L(!1);if(Ce=!1,c&&!l.disabled&&(d?h||(o=te!==oe):pe===this||(this.lastPutMode=he.checkPull(this,c,ee,e))&&s.checkPut(this,c,ee,e))){if(i="vertical"===this._getDirection(e,r),t=I(ee),O("dragOverValid"),Be.eventCanceled)return g;if(o)return te=oe,M(),this._hideClone(),O("revert"),Be.eventCanceled||(ie?oe.insertBefore(ee,ie):oe.appendChild(ee)),L(!0);var v=F(a,l.draggable);if(!v||function(e,t,n){var o=I(F(n.el,n.options.draggable));return t?e.clientX>o.right+10||e.clientX<=o.right&&e.clientY>o.bottom&&e.clientX>=o.left:e.clientX>o.right&&e.clientY>o.top||e.clientX<=o.right&&e.clientY>o.bottom+10}(e,i,this)&&!v.animated){if(v===ee)return L(!1);if(v&&a===e.target&&(r=v),r&&(n=I(r)),!1!==Qe(oe,a,ee,t,r,n,e,!!r))return M(),a.appendChild(ee),te=a,H(),L(!0)}else if(v&&function(e,t,n){var o=I(R(n.el,0,n.options,!0));return t?e.clientX<o.left-10||e.clientY<o.top&&e.clientX<o.right:e.clientY<o.top-10||e.clientY<o.bottom&&e.clientX<o.left}(e,i,this)){var m=R(a,0,l,!0);if(m===ee)return L(!1);if(n=I(r=m),!1!==Qe(oe,a,ee,t,r,n,e,!1))return M(),a.insertBefore(ee,m),te=a,H(),L(!0)}else if(r.parentNode===a){n=I(r);var b,_,w,y=ee.parentNode!==a,E=!function(e,t,n){var o=n?e.left:e.top,i=n?e.right:e.bottom,a=n?e.width:e.height,r=n?t.left:t.top,l=n?t.right:t.bottom,s=n?t.width:t.height;return o===r||i===l||o+a/2===r+s/2}(ee.animated&&ee.toRect||t,r.animated&&r.toRect||n,i),S=i?"top":"left",T=P(r,"top","top")||P(ee,"top","top"),x=T?T.scrollTop:void 0;if(ye!==r&&(_=n[S],ke=!1,De=!E&&l.invertSwap||y),b=function(e,t,n,o,i,a,r,l){var s=o?e.clientY:e.clientX,c=o?n.height:n.width,d=o?n.top:n.left,u=o?n.bottom:n.right,h=!1;if(!r)if(l&&Se<c*i){if(!ke&&(1===Ee?s>d+c*a/2:s<u-c*a/2)&&(ke=!0),ke)h=!0;else if(1===Ee?s<d+Se:s>u-Se)return-Ee}else if(s>d+c*(1-i)/2&&s<u-c*(1-i)/2)return function(e){return X(ee)<X(e)?1:-1}(t);return(h=h||r)&&(s<d+c*a/2||s>u-c*a/2)?s>d+c/2?1:-1:0}(e,r,n,i,E?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,De,ye===r),0!==b){var C=X(ee);do{C-=b,w=te.children[C]}while(w&&("none"===N(w,"display")||w===ne))}if(0===b||w===r)return L(!1);ye=r,Ee=b;var $=r.nextElementSibling,D=!1,A=Qe(oe,a,ee,t,r,n,e,D=1===b);if(!1!==A)return 1!==A&&-1!==A||(D=1===A),qe=!0,setTimeout(We,30),M(),D&&!$?a.appendChild(ee):r.parentNode.insertBefore(ee,D?$:r),T&&Q(T,0,x-T.scrollTop),te=ee.parentNode,void 0===_||De||(Se=Math.abs(_-I(r)[S])),H(),L(!0)}if(a.contains(ee))return L(!1)}return!1}function O(l,s){U(l,f,u({evt:e,isOwner:d,axis:i?"vertical":"horizontal",revert:o,dragRect:t,targetRect:n,canSort:h,fromSortable:p,target:r,completed:L,onMove:function(n,o){return Qe(oe,a,ee,t,n,I(n),e,o)},changed:H},s))}function M(){O("dragOverAnimationCapture"),f.captureAnimationState(),f!==p&&p.captureAnimationState()}function L(t){return O("dragOverCompleted",{insertion:t}),t&&(d?c._hideClone():c._showClone(f),f!==p&&(q(ee,pe?pe.options.ghostClass:c.options.ghostClass,!1),q(ee,l.ghostClass,!0)),pe!==f&&f!==Be.active?pe=f:f===Be.active&&pe&&(pe=null),p===f&&(f._ignoreWhileAnimating=r),f.animateAll((function(){O("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(r===ee&&!ee.animated||r===a&&!r.animated)&&(ye=null),l.dragoverBubble||e.rootEl||r===document||(ee.parentNode[W]._isOutsideThisEl(e.target),!t&&je(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function H(){ce=X(ee),ue=X(ee,l.draggable),K({sortable:f,name:"change",toEl:a,newIndex:ce,newDraggableIndex:ue,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){x(document,"mousemove",this._onTouchMove),x(document,"touchmove",this._onTouchMove),x(document,"pointermove",this._onTouchMove),x(document,"dragover",je),x(document,"mousemove",je),x(document,"touchmove",je)},_offUpEvents:function(){var e=this.el.ownerDocument;x(e,"mouseup",this._onDrop),x(e,"touchend",this._onDrop),x(e,"pointerup",this._onDrop),x(e,"touchcancel",this._onDrop),x(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;ce=X(ee),ue=X(ee,n.draggable),U("drop",this,{evt:e}),te=ee&&ee.parentNode,ce=X(ee),ue=X(ee,n.draggable),Be.eventCanceled||(xe=!1,De=!1,ke=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ze(this.cloneId),Ze(this._dragStartId),this.nativeDraggable&&(x(document,"drop",this),x(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),w&&N(document.body,"user-select",""),N(ee,"transform",""),e&&(we&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),ne&&ne.parentNode&&ne.parentNode.removeChild(ne),(oe===te||pe&&"clone"!==pe.lastPutMode)&&re&&re.parentNode&&re.parentNode.removeChild(re),ee&&(this.nativeDraggable&&x(ee,"dragend",this),Ve(ee),ee.style["will-change"]="",we&&!xe&&q(ee,pe?pe.options.ghostClass:this.options.ghostClass,!1),q(ee,this.options.chosenClass,!1),K({sortable:this,name:"unchoose",toEl:te,newIndex:null,newDraggableIndex:null,originalEvent:e}),oe!==te?(ce>=0&&(K({rootEl:te,name:"add",toEl:te,fromEl:oe,originalEvent:e}),K({sortable:this,name:"remove",toEl:te,originalEvent:e}),K({rootEl:te,name:"sort",toEl:te,fromEl:oe,originalEvent:e}),K({sortable:this,name:"sort",toEl:te,originalEvent:e})),pe&&pe.save()):ce!==se&&ce>=0&&(K({sortable:this,name:"update",toEl:te,originalEvent:e}),K({sortable:this,name:"sort",toEl:te,originalEvent:e})),Be.active&&(null!=ce&&-1!==ce||(ce=se,ue=de),K({sortable:this,name:"end",toEl:te,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){U("nulling",this),oe=ee=te=ne=ie=re=ae=le=fe=ge=we=ce=ue=se=de=ye=Ee=pe=he=Be.dragged=Be.ghost=Be.clone=Be.active=null,Ne.forEach((function(e){e.checked=!0})),Ne.length=ve=me=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ee&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,o=0,i=n.length,a=this.options;o<i;o++)k(e=n[o],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||ze(e));return t},sort:function(e,t){var n={},o=this.el;this.toArray().forEach((function(e,t){var i=o.children[t];k(i,this.options.draggable,o,!1)&&(n[e]=i)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(o.removeChild(n[e]),o.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return k(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var o=Z.modifyOption(this,e,t);n[e]=void 0!==o?o:t,"group"===e&&Fe(n)},destroy:function(){U("destroy",this);var e=this.el;e[W]=null,x(e,"mousedown",this._onTapStart),x(e,"touchstart",this._onTapStart),x(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(x(e,"dragover",this),x(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),$e.splice($e.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!le){if(U("hideClone",this),Be.eventCanceled)return;N(re,"display","none"),this.options.removeCloneOnHide&&re.parentNode&&re.parentNode.removeChild(re),le=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(le){if(U("showClone",this),Be.eventCanceled)return;ee.parentNode!=oe||this.options.group.revertClone?ie?oe.insertBefore(re,ie):oe.appendChild(re):oe.insertBefore(re,ee),this.options.group.revertClone&&this.animate(ee,re),N(re,"display",""),le=!1}}else this._hideClone()}},Oe&&T(document,"touchmove",(function(e){(Be.active||xe)&&e.cancelable&&e.preventDefault()})),Be.utils={on:T,off:x,css:N,find:M,is:function(e,t){return!!k(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:B,closest:k,toggleClass:q,clone:V,index:X,nextTick:Je,cancelNextTick:Ze,detectDirection:Re,getChild:R},Be.get=function(e){return e[W]},Be.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Be.utils=u(u({},Be.utils),e.utils)),Z.mount(e)}))},Be.create=function(e,t){return new Be(e,t)},Be.version="1.14.0";var Ge,Ue,Ke,et,tt,nt,ot=[],it=!1;function at(){ot.forEach((function(e){clearInterval(e.pid)})),ot=[]}function rt(){clearInterval(nt)}var lt=B((function(e,t,n,o){if(t.scroll){var i,a=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,c=L(),d=!1;Ue!==n&&(Ue=n,at(),Ge=t.scroll,i=t.scrollFn,!0===Ge&&(Ge=j(n,!0)));var u=0,h=Ge;do{var p=h,f=I(p),g=f.top,v=f.bottom,m=f.left,b=f.right,_=f.width,w=f.height,y=void 0,E=void 0,S=p.scrollWidth,T=p.scrollHeight,x=N(p),C=p.scrollLeft,$=p.scrollTop;p===c?(y=_<S&&("auto"===x.overflowX||"scroll"===x.overflowX||"visible"===x.overflowX),E=w<T&&("auto"===x.overflowY||"scroll"===x.overflowY||"visible"===x.overflowY)):(y=_<S&&("auto"===x.overflowX||"scroll"===x.overflowX),E=w<T&&("auto"===x.overflowY||"scroll"===x.overflowY));var k=y&&(Math.abs(b-a)<=l&&C+_<S)-(Math.abs(m-a)<=l&&!!C),D=E&&(Math.abs(v-r)<=l&&$+w<T)-(Math.abs(g-r)<=l&&!!$);if(!ot[u])for(var A=0;A<=u;A++)ot[A]||(ot[A]={});ot[u].vx==k&&ot[u].vy==D&&ot[u].el===p||(ot[u].el=p,ot[u].vx=k,ot[u].vy=D,clearInterval(ot[u].pid),0==k&&0==D||(d=!0,ot[u].pid=setInterval(function(){o&&0===this.layer&&Be.active._onTouchMove(tt);var t=ot[this.layer].vy?ot[this.layer].vy*s:0,n=ot[this.layer].vx?ot[this.layer].vx*s:0;"function"==typeof i&&"continue"!==i.call(Be.dragged.parentNode[W],n,t,e,tt,ot[this.layer].el)||Q(ot[this.layer].el,n,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&h!==c&&(h=j(h,!1)));it=d}}),30),st=function(e){var t=e.originalEvent,n=e.putSortable,o=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,r=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=n||i;r();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);l(),s&&!s.el.contains(d)&&(a("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function ct(){}function dt(){}ct.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=R(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:st},f(ct,{pluginName:"revertOnSpill"}),dt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:st},f(dt,{pluginName:"removeOnSpill"}),Be.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?T(document,"dragover",this._handleAutoScroll):this.options.supportPointer?T(document,"pointermove",this._handleFallbackAutoScroll):t.touches?T(document,"touchmove",this._handleFallbackAutoScroll):T(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):(x(document,"pointermove",this._handleFallbackAutoScroll),x(document,"touchmove",this._handleFallbackAutoScroll),x(document,"mousemove",this._handleFallbackAutoScroll)),rt(),at(),clearTimeout(D),D=void 0},nulling:function(){tt=Ue=Ge=it=nt=Ke=et=null,ot.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,o=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(o,i);if(tt=e,t||this.options.forceAutoScrollFallback||b||m||w){lt(e,this.options,a,t);var r=j(a,!0);!it||nt&&o===Ke&&i===et||(nt&&rt(),nt=setInterval((function(){var a=j(document.elementFromPoint(o,i),!0);a!==r&&(r=a,at()),lt(e,n.options,a,t)}),10),Ke=o,et=i)}else{if(!this.options.bubbleScroll||j(a,!0)===L())return void at();lt(e,this.options,j(a,!1),!1)}}},f(e,{pluginName:"scroll",initializeByDefault:!0})}),Be.mount(dt,ct);var ut=Be;n(454),n(996),(0,r.$)(".select").el[0]&&new a(".select",{name:"service_id-btn",defaultValue:"Ford",options:[["volkswagen","Volkswagen"],["ford","Ford"],["toyota","Toyota"],["nissan","Nissan"]],onSelected(e){console.log(`Выбранное значение: ${e.textContent}`)}}),l.h.markCurrentInMenu(),(e=>{let t=(0,r.$)(e).el[0];t&&ut.create(t,{animation:150,onEnd:function(e){let t=e.oldIndex,n=e.newIndex;t>n?(s.A.questions(),s.A.sort(t)):(s.A.questions(),s.A.sort(n))}})})(".questions"),!s.A.questions().length&&/\/adminsc\/test\/edit/.test(window.location.pathname)&&s.A.showFirst(),(0,r.$)(".test__update").on("click",l.h.update),(0,r.$)(".test-path__update").on("click",l.h.update),(0,r.$)(".question__save").on("click",s.A.save),(0,r.$)(".question__show-answers").on("click",s.A.showAnswers),(0,r.$)(".question__delete").on("click",s.A.delete),(0,r.$)(".question__create-button").on("click",s.A.create),(0,r.$)(".answer__delete").on("click",c.V.del),(0,r.$)(".answer__create-button").on("click",c.V.create),(0,r.Z$)({els:(0,r.$)(".question__save").el,message:"Сохранить вопросы и ответы"}),(0,r.Z$)({els:(0,r.$)(".question__delete").el,message:"Удалить вопросы и ответы"}),(0,r.Z$)({els:(0,r.$)(".question__show-answers").el,message:"Показать ответы"}),(0,r.Z$)({els:(0,r.$)(".test-edit-menu__params").el,message:"Редактировать"})}()}();
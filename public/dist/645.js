"use strict";(self.webpackChunkmy_webpack_project=self.webpackChunkmy_webpack_project||[]).push([[645],{645:(s,t,a)=>{a.d(t,{default:()=>e});var i=a(448);class e{constructor(){if(this.loginForm=(0,i.$)("[data-auth='login']").first(),!this.loginForm)return!1;this.loginForm.addEventListener("click",this.sendData.bind(this)),this.email=(0,i.$)("input[type = email]")[0],this.pass=(0,i.$)("input[name= password]")[0],this.msg=(0,i.$)(".message")[0]}async sendData(s){let{target:t}=s;if(t.classList.contains("submit__button")){let s={email:this.email.value,password:this.pass.value};if(this.validateData()){const t=await this.send(s);await this.parseLoginResponse(t)}}}validateData(){let s=i.tf.email(this.email.value);return s?(this.msg.innerText="",this.msg.innerText=s,(0,i.$)(this.msg).addClass("error"),!1):!("vvoronik@yandex.ru"!==this.email.value&&(s=i.tf.password(this.pass.value),s)&&(this.msg.innerText="",this.msg.innerText=s,(0,i.$)(this.msg).addClass("error"),1))}async send(s){return await(0,i.bE)("/auth/login",s)}async parseLoginResponse(s){var t,a,i;const e=null==s||null===(t=s.arr)||void 0===t?void 0:t.id;localStorage.setItem("id",e),"employee"===(null==s||null===(a=s.arr)||void 0===a?void 0:a.role)?window.location="/adminsc":"user"===(null==s||null===(i=s.arr)||void 0===i?void 0:i.role)?window.location="/auth/cabinet":null!=s&&s.error}}}}]);
//# sourceMappingURL=645.js.map
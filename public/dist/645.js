"use strict";(self.webpackChunkmy_webpack_project=self.webpackChunkmy_webpack_project||[]).push([[645],{645:(s,t,a)=>{a.d(t,{default:()=>i});var e=a(448);class i{constructor(){if(this.loginForm=(0,e.$)("[data-auth='login']").first(),!this.loginForm)return!1;this.loginForm.addEventListener("click",this.sendData.bind(this)),this.email=(0,e.$)("input[type = email]")[0],this.pass=(0,e.$)("input[name= password]")[0],this.msg=(0,e.$)(".message")[0]}async sendData({target:s}){if(s.classList.contains("submit__button")){let s={email:this.email.value,password:this.pass.value};if(this.validateData()){const t=await this.send(s);await this.parseLoginResponse(t)}}}validateData(){let s=e.tf.email(this.email.value);return s?(this.msg.innerText="",this.msg.innerText=s,(0,e.$)(this.msg).addClass("error"),!1):!("vvoronik@yandex.ru"!==this.email.value&&(s=e.tf.password(this.pass.value),s)&&(this.msg.innerText="",this.msg.innerText=s,(0,e.$)(this.msg).addClass("error"),1))}async send(s){return await(0,e.bE)("/auth/login",s)}async parseLoginResponse(s){const t=s?.arr?.id;localStorage.setItem("id",t),"employee"===s?.arr?.role?window.location="/adminsc":"user"===s?.arr?.role&&(window.location="/auth/cabinet")}}}}]);
//# sourceMappingURL=645.js.map
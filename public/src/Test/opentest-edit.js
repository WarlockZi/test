import './test-edit.scss'
import '../components/footer/footer.scss'

import './test-edit-menu.scss'
import '../components/popup.scss'

import './test-update'
import '../Admin/admin'

import {$} from '../common'

import {_question} from "./model/question"
import sortable from "../components/sortable"
import WDSSelect from "../components/select/WDSSelect"
import accordionShow from "./accordion-show";

import opentestEditActions from "./opentestEditActions";

export default function opentestEdit() {
  let opentestEdit = $('.opentest-edit-wrapper')[0]
  if (opentestEdit) {

    sortable('.opentest-edit-wrapper .questions')
    // accordionShow()

    // debugger
    // let customSelects = $('[custom-select]');
    // [].forEach.call(customSelects, function (select) {
    //   new WDSSelect(select)
    // });

// при создании нового теста показать пустой вопрос
    if (!_question.questions().length
      && /\/adminsc\/test\/edit/.test(window.location.pathname)) {
      _question.showFirst()
    }

    // debugger

    opentestEdit.addEventListener('click',
      ({target}) => {
        opentestEditActions(target, 'click')
      }
    )
    opentestEdit.addEventListener('change',
      ({target}) => {
        opentestEditActions(target, 'change')
      }
    )
  }


}





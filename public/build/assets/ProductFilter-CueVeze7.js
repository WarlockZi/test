import"./admin-BhZGLmLA.js";import{q as l,a as n,l as a,S as c,p as o,$ as i}from"./search-vH85qEqy.js";import"./MyQuill-veZF1Y7X.js";import"./table-DLkGotsO.js";import"./Promotion--t8u3m_F.js";class w{constructor(t){t&&(this.wrap=t,this.panel=t[l](".list-filter"),this.url="/adminsc/report/filter",this.wrap[n]("click",this.handleClick.bind(this)),this.setSelects())}setSelects(){const t=this.wrap[a]("[select-new]");[].map.call(t,e=>{new c(e)})}async handleClick(t){if(t.target.classList.contains("filter-button")){t.preventDefault();const r=this.getClickedFilters(),s=await o(this.url,r);this.renderDataFromResponce(s)}}getClickedFilters(){const t={},e=this.wrap[a]("[select-new]");[].map.call(e,s=>(t[s.getAttribute("name")]=s.dataset.value,null));const r=this.panel[a]("[type='checkbox']:checked");return[].forEach.call(r,s=>{t[s.name]="on"}),t}renderDataFromResponce(t){i(".used-filters").first().innerHTML=t?.arr?.filterString,i(".list-filter").first().innerHTML=t?.arr?.filterPanel;const e=i("[custom-table]").first();e.innerHTML=t?.arr?.productsTable,this.setSelects()}}export{w as default};
//# sourceMappingURL=ProductFilter-CueVeze7.js.map

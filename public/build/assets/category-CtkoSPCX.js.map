{"version":3,"mappings":";mPAMe,MAAMA,CAAS,CAC5B,aAAc,CAEZ,GADA,KAAK,SAAW,SAASC,CAAE,EAAE,WAAW,EACpC,CAAC,KAAK,SAAU,MAAO,GAE3B,KAAK,aAAc,EAAC,KAAM,EAC1B,KAAK,mBAAoB,EAEzB,IAAIC,EAAQ,cAAc,EAC1B,KAAK,SAASC,CAAG,EAAE,QAAS,KAAK,YAAY,KAAK,IAAI,CAAC,CAC3D,CAEE,MAAM,cAAe,CAEnB,GADkB,SAASF,CAAE,EAAE,aAAa,EAC7B,CACb,KAAM,CAAE,QAASG,CAAU,EAAK,wCAAM,QACpC,0BACD,iBAAAA,CAAA,6CACD,KAAK,UAAY,IAAIA,CAC3B,CACA,CAEE,YAAY,CAAE,OAAAC,GAAU,CAClBA,EAAO,UAAU,SAAS,aAAa,GAC3BA,EAAO,QAAQ,kBAAkB,EAG7CA,EAAO,aAAa,WAAW,EACjC,KAAK,WAAWA,CAAM,EACbA,EAAO,aAAa,cAAc,EAC3C,KAAK,cAAcA,CAAM,EAChBA,EAAO,UAAU,SAAS,YAAY,GAC/C,KAAK,UAAU,UAAUA,CAAM,CAErC,CAEE,MAAM,cAAcA,EAAQ,CACrBA,EAAO,QAAQ,SAKlBA,EAAO,QAAQ,QAAU,IACb,MAAMC,EAChB,0BACA,KAAK,WAAWD,CAAM,CACvB,IACQ,KAAK,UAAUA,EAAO,UAAU,OAAO,OAAO,IATvDA,EAAO,QAAQ,QAAU,IACb,MAAMC,EAAK,eAAgB,KAAK,WAAWD,CAAM,CAAC,IACrD,KAAK,aAAaA,EAAO,UAAU,OAAO,OAAO,EAShE,CAEE,MAAM,WAAWA,EAAQ,CAClBA,EAAO,QAAQ,MAKlBA,EAAO,QAAQ,KAAO,IACV,MAAMC,EAAK,uBAAwB,KAAK,WAAWD,CAAM,CAAC,IAC7D,KAAK,OAAOA,EAAO,UAAU,OAAO,KAAK,IANlDA,EAAO,QAAQ,KAAO,IACV,MAAMC,EAAK,YAAa,KAAK,WAAWD,CAAM,CAAC,IAClD,KAAK,UAAUA,EAAO,UAAU,OAAO,KAAK,EAM3D,CAEE,WAAWA,EAAQ,CACjB,MAAME,EAAM,IAAIC,EAAIH,CAAM,EAC1B,OAAAE,EAAI,OAAS,CACX,WAAYF,EAAO,QAAQ,aAAa,EAAE,QAAQ,MAAM,CACzD,EACME,CACX,CAEE,oBAAqB,CACnB,CAAC,GAAG,KAAK,SAASE,CAAE,EAAE,kBAAkB,CAAC,EAAE,QAASC,GAAU,CAC5D,IAAIC,EAAeD,CAAK,CAC9B,CAAK,CACL,CACA","names":["Category","qs","MyQuill","ael","Card_panel","target","post","dto","DTO","qa","table","shippableTable"],"ignoreList":[],"sources":["../../src/Category/category.js"],"sourcesContent":["import { ael, qa, qs } from \"../constants\";\nimport shippableTable from \"@components/shippable/shippableUnitsTable\";\nimport MyQuill from \"../components/quill/MyQuill.js\";\nimport { post } from \"@src/common.js\";\nimport DTO from \"@src/Admin/DTO.js\";\n\nexport default class Category {\n  constructor() {\n    this.category = document[qs](\".category\");\n    if (!this.category) return false;\n\n    this.setCardPanel().then();\n    this.mapShippableTables();\n\n    new MyQuill(\"#seo_article\");\n    this.category[ael](\"click\", this.handleClick.bind(this));\n  }\n\n  async setCardPanel() {\n    const cardPanel = document[qs](`.card-panel`);\n    if (cardPanel) {\n      const { default: Card_panel } = await import(\n        \"@components/card_panel/card_panel\"\n      );\n      this.cardPanel = new Card_panel();\n    }\n  }\n\n  handleClick({ target }) {\n    if (target.classList.contains(\"blue-button\")) {\n      const table = target.closest(\"[shipable-table]\");\n    }\n\n    if (target.hasAttribute(\"data-like\")) {\n      this.handleLike(target);\n    } else if (target.hasAttribute(\"data-compare\")) {\n      this.handleCompare(target);\n    } else if (target.classList.contains(\"short-link\")) {\n      this.cardPanel.shortLink(target);\n    }\n  }\n\n  async handleCompare(target) {\n    if (!target.dataset.compare) {\n      target.dataset.compare = false;\n      const res = await post(\"/compare/del\", this.productDTO(target));\n      if (res?.arr?.discompared) target.classList.toggle(\"green\");\n    } else {\n      target.dataset.compare = true;\n      const res = await post(\n        \"/compare/updateOrCreate\",\n        this.productDTO(target),\n      );\n      if (res?.arr?.compared) target.classList.toggle(\"green\");\n    }\n  }\n\n  async handleLike(target) {\n    if (!target.dataset.like) {\n      target.dataset.like = false;\n      const res = await post(\"/like/del\", this.productDTO(target));\n      if (res?.arr?.disliked) target.classList.toggle(\"red\");\n    } else {\n      target.dataset.like = true;\n      const res = await post(\"/like/updateOrCreate\", this.productDTO(target));\n      if (res?.arr?.liked) target.classList.toggle(\"red\");\n    }\n  }\n\n  productDTO(target) {\n    const dto = new DTO(target);\n    dto.fields = {\n      product_id: target.closest(`[data-1sid]`).dataset[\"1sid\"],\n    };\n    return dto;\n  }\n\n  mapShippableTables() {\n    [...this.category[qa](\".shippable-table\")].forEach((table) => {\n      new shippableTable(table);\n    });\n  }\n}\n"],"file":"assets/category-CtkoSPCX.js"}
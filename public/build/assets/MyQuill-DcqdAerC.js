import{$ as s,I as r,p as l}from"./common-NvRRxPie.js";import{Q as d}from"./quill-B80OphAl.js";import{D as h}from"./search-Z_be1yRK.js";class b{constructor(t="#detail-text",i=!1,n=!1,a=!1,c="snow",e=null){const o=s(t).first();if(!o)return!1;this.el=o,this.model=s("[data-model]").first()?.dataset?.model??e?.model??null,this.id=this.model?.dataset?.id??e?.id??null,this.button=s("#button").first(),this.selector=t,this.autosave=i,this.editable=a,this.contents=s(t).first().innerText??"\\n",this.toolbar=n?this.setToolbar():!1,this.options=this.setOptions(),this.init()}setToolbar(){return[["bold","italic","underline","strike"],["blockquote"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]]}setOptions(){return{theme:"snow",placeholder:"Начните писать...",modules:{toolbar:this.toolbar}}}dto(){return new h(this.id,this.el)}init(){if(this.quill=new d(this.selector,this.options),r(this.contents)){const t=JSON.parse(this.contents+`
`);this.quill.setContents(t)}else this.quill.setText(this.contents);this.quill.enable(this.editable),this.autosave&&this.quill.on("text-change",function(t){l(`/adminsc/${this.model}/updateOrCreate`,this.dto())}.bind(this)),this.button&&this.button.addEventListener("click",function(){const t=s(".item-wrap[data-model='product']")[0].dataset.id,i=JSON.stringify(this.quill.getContents());l("/adminsc/product/updateOrCreate",{txt:i,id:t}).then()})}}export{b as M};
//# sourceMappingURL=MyQuill-DcqdAerC.js.map

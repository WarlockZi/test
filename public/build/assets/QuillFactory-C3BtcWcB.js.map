{"version":3,"file":"QuillFactory-C3BtcWcB.js","sources":["../../src/components/quill/QuillConstans.js","../../src/components/quill/AdminQuill.js","../../src/components/quill/AdminProductDescrioption.js","../../src/components/quill/AdminProductSeoArticle.js","../../src/components/quill/QuillFactory.js"],"sourcesContent":["export const QuillConst = {\r\n  ADMIN_PRODUCT_DESCRIPTION: \"description\",\r\n  ADMIN_PRODUCT_SEO_ARTICLE: \"seo-article\",\r\n  ADMIN_CATEGORY_SEO_ARTICLE: \"seo-article\",\r\n};\r\n","import { $, debounce, IsJson, post } from \"@src/common.js\";\r\nimport DTO from \"@src/Admin/DTO.js\";\r\nimport Quill from \"quill\";\r\nimport { ael } from \"@src/constants.js\";\r\n\r\nexport default class AdminQuill {\r\n  constructor(selector, options) {\r\n    const el = $(selector).first();\r\n    if (!el) return;\r\n    this.el = el;\r\n    this.autosave = options?.autosave || true;\r\n    this.editable = options?.editable || true;\r\n    this.theme = options?.theme || \"snow\";\r\n    this.placeholder = options?.theme || \"Начните писать...\";\r\n\r\n    this.options = this.setOptions();\r\n    this.quill = new Quill(selector, this.options);\r\n    this.dto = this.setDTO();\r\n    this.setContent();\r\n    if (this.autosave) this.el[ael](\"keyup\", debounce(this.save.bind(this)));\r\n  }\r\n\r\n  async save() {\r\n    this.dto.relation.fields[this.el?.dataset?.field] = JSON.stringify(\r\n      this.quill.getContents(),\r\n    );\r\n    const res = await post(\r\n      `/adminsc/${this.dto.model}/updateOrCreate`,\r\n      this.dto,\r\n    );\r\n  }\r\n\r\n  setContent() {\r\n    if (IsJson(this.el.innerText)) {\r\n      this.quill.setContents(JSON.parse(this.el.innerText + \"\\n\"));\r\n    } else {\r\n      this.quill.setText(this.el.innerText);\r\n    }\r\n  }\r\n\r\n  setDTO() {\r\n    const parent = this.el.closest(`[data-model]`);\r\n    const model = parent?.dataset.model;\r\n    const id = parent.dataset.id;\r\n    const dto = new DTO(id);\r\n    dto.model = model;\r\n    dto.relation.name = this.el.dataset.relation;\r\n    return dto;\r\n  }\r\n\r\n  setToolbar() {\r\n    return [\r\n      [{ header: [2, 3, 4, false] }],\r\n      [\"bold\", \"italic\", \"underline\", \"strike\"], // toggled buttons\r\n      // ['blockquote'],\r\n\r\n      // [{ 'header': 1 }, { 'header': 2 }],               // custom button values\r\n      [{ list: \"ordered\" }, { list: \"bullet\" }],\r\n      [{ script: \"sub\" }, { script: \"super\" }], // superscript/subscript\r\n      [{ indent: \"-1\" }, { indent: \"+1\" }], // outdent/indent\r\n      // [{ 'direction': 'rtl' }],                         // text direction\r\n\r\n      [{ size: [\"small\", false, \"large\", \"huge\"] }], // custom dropdown\r\n\r\n      [{ color: [] }, { background: [] }], // dropdown with defaults from theme\r\n      [{ font: [] }],\r\n      [{ align: [] }],\r\n\r\n      [\"clean\"], // remove formatting button\r\n    ];\r\n  }\r\n\r\n  setOptions() {\r\n    return {\r\n      theme: this.theme,\r\n      // theme: 'bubble',\r\n      placeholder: this.placeholder,\r\n      modules: {\r\n        toolbar: this.setToolbar(),\r\n      },\r\n    };\r\n  }\r\n}\r\n","import AdminQuill from \"@src/components/quill/AdminQuill.js\";\r\n\r\nexport default class AdminProductDescrioption extends AdminQuill {\r\n  constructor(selector, options) {\r\n    super(selector, options);\r\n  }\r\n}\r\n","import AdminQuill from \"@src/components/quill/AdminQuill.js\";\r\n\r\nexport default class AdminProductSeoArticle extends AdminQuill {\r\n  constructor(selector, options) {\r\n    super(selector, options);\r\n  }\r\n}\r\n","import Quill from \"quill\";\r\nimport { QuillConst } from \"@src/components/quill/QuillConstans.js\";\r\nimport AdminProductDescrioption from \"@src/components/quill/AdminProductDescrioption.js\";\r\nimport AdminProductSeoArticle from \"@src/components/quill/AdminProductSeoArticle.js\";\r\n\r\nexport default class QuillFactory {\r\n  constructor() {\r\n    this.quill = new Quill();\r\n    debugger;\r\n  }\r\n\r\n  static create(selector, type, options) {\r\n    if (type === QuillConst.ADMIN_PRODUCT_DESCRIPTION) {\r\n      return new AdminProductDescrioption(selector, options);\r\n    } else if (type === QuillConst.ADMIN_PRODUCT_SEO_ARTICLE) {\r\n    }\r\n    return new AdminProductSeoArticle(selector, options);\r\n  }\r\n}\r\n"],"names":["QuillConst","AdminQuill","selector","options","el","$","Quill","ael","debounce","post","IsJson","parent","model","id","dto","DTO","AdminProductDescrioption","AdminProductSeoArticle","QuillFactory","type"],"mappings":"6LAAY,MAACA,EAAa,CACxB,0BAA2B,cAC3B,0BAA2B,cAC3B,2BAA4B,aAC9B,ECCe,MAAMC,CAAW,CAC9B,YAAYC,EAAUC,EAAS,CAC7B,MAAMC,EAAKC,EAAEH,CAAQ,EAAE,MAAK,EACvBE,IACL,KAAK,GAAKA,EACV,KAAK,SAAWD,GAAS,UAAY,GACrC,KAAK,SAAWA,GAAS,UAAY,GACrC,KAAK,MAAQA,GAAS,OAAS,OAC/B,KAAK,YAAcA,GAAS,OAAS,oBAErC,KAAK,QAAU,KAAK,aACpB,KAAK,MAAQ,IAAIG,EAAMJ,EAAU,KAAK,OAAO,EAC7C,KAAK,IAAM,KAAK,SAChB,KAAK,WAAU,EACX,KAAK,UAAU,KAAK,GAAGK,CAAG,EAAE,QAASC,EAAS,KAAK,KAAK,KAAK,IAAI,CAAC,CAAC,EACxE,CAED,MAAM,MAAO,CACX,KAAK,IAAI,SAAS,OAAO,KAAK,IAAI,SAAS,KAAK,EAAI,KAAK,UACvD,KAAK,MAAM,YAAa,CAC9B,EACgB,MAAMC,EAChB,YAAY,KAAK,IAAI,KAAK,kBAC1B,KAAK,GACL,CACH,CAED,YAAa,CACPC,EAAO,KAAK,GAAG,SAAS,EAC1B,KAAK,MAAM,YAAY,KAAK,MAAM,KAAK,GAAG,UAAY;AAAA,CAAI,CAAC,EAE3D,KAAK,MAAM,QAAQ,KAAK,GAAG,SAAS,CAEvC,CAED,QAAS,CACP,MAAMC,EAAS,KAAK,GAAG,QAAQ,cAAc,EACvCC,EAAQD,GAAQ,QAAQ,MACxBE,EAAKF,EAAO,QAAQ,GACpBG,EAAM,IAAIC,EAAIF,CAAE,EACtB,OAAAC,EAAI,MAAQF,EACZE,EAAI,SAAS,KAAO,KAAK,GAAG,QAAQ,SAC7BA,CACR,CAED,YAAa,CACX,MAAO,CACL,CAAC,CAAE,OAAQ,CAAC,EAAG,EAAG,EAAG,EAAK,EAAG,EAC7B,CAAC,OAAQ,SAAU,YAAa,QAAQ,EAIxC,CAAC,CAAE,KAAM,SAAS,EAAI,CAAE,KAAM,QAAQ,CAAE,EACxC,CAAC,CAAE,OAAQ,KAAK,EAAI,CAAE,OAAQ,OAAO,CAAE,EACvC,CAAC,CAAE,OAAQ,IAAI,EAAI,CAAE,OAAQ,IAAI,CAAE,EAGnC,CAAC,CAAE,KAAM,CAAC,QAAS,GAAO,QAAS,MAAM,EAAG,EAE5C,CAAC,CAAE,MAAO,CAAE,CAAA,EAAI,CAAE,WAAY,CAAE,CAAA,CAAE,EAClC,CAAC,CAAE,KAAM,CAAA,EAAI,EACb,CAAC,CAAE,MAAO,CAAA,EAAI,EAEd,CAAC,OAAO,CACd,CACG,CAED,YAAa,CACX,MAAO,CACL,MAAO,KAAK,MAEZ,YAAa,KAAK,YAClB,QAAS,CACP,QAAS,KAAK,WAAY,CAC3B,CACP,CACG,CACH,CChFe,MAAME,UAAiCf,CAAW,CAC/D,YAAYC,EAAUC,EAAS,CAC7B,MAAMD,EAAUC,CAAO,CACxB,CACH,CCJe,MAAMc,UAA+BhB,CAAW,CAC7D,YAAYC,EAAUC,EAAS,CAC7B,MAAMD,EAAUC,CAAO,CACxB,CACH,CCDe,MAAMe,CAAa,CAChC,aAAc,CACZ,KAAK,MAAQ,IAAIZ,EACjB,QACD,CAED,OAAO,OAAOJ,EAAUiB,EAAMhB,EAAS,CACrC,OAAIgB,IAASnB,EAAW,0BACf,IAAIgB,EAAyBd,EAAUC,CAAO,EAGhD,IAAIc,EAAuBf,EAAUC,CAAO,CACpD,CACH"}
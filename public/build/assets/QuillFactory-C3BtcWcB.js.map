{"version":3,"file":"QuillFactory-C3BtcWcB.js","sources":["../../src/components/quill/QuillConstans.js","../../src/components/quill/AdminQuill.js","../../src/components/quill/AdminProductDescrioption.js","../../src/components/quill/AdminProductSeoArticle.js","../../src/components/quill/QuillFactory.js"],"sourcesContent":["export const QuillConst = {\n  ADMIN_PRODUCT_DESCRIPTION: \"description\",\n  ADMIN_PRODUCT_SEO_ARTICLE: \"seo-article\",\n  ADMIN_CATEGORY_SEO_ARTICLE: \"seo-article\",\n};\n","import { $, debounce, IsJson, post } from \"@src/common.js\";\nimport DTO from \"@src/Admin/DTO.js\";\nimport Quill from \"quill\";\nimport { ael } from \"@src/constants.js\";\n\nexport default class AdminQuill {\n  constructor(selector, options) {\n    const el = $(selector).first();\n    if (!el) return;\n    this.el = el;\n    this.autosave = options?.autosave || true;\n    this.editable = options?.editable || true;\n    this.theme = options?.theme || \"snow\";\n    this.placeholder = options?.theme || \"Начните писать...\";\n\n    this.options = this.setOptions();\n    this.quill = new Quill(selector, this.options);\n    this.dto = this.setDTO();\n    this.setContent();\n    if (this.autosave) this.el[ael](\"keyup\", debounce(this.save.bind(this)));\n  }\n\n  async save() {\n    this.dto.relation.fields[this.el?.dataset?.field] = JSON.stringify(\n      this.quill.getContents(),\n    );\n    const res = await post(\n      `/adminsc/${this.dto.model}/updateOrCreate`,\n      this.dto,\n    );\n  }\n\n  setContent() {\n    if (IsJson(this.el.innerText)) {\n      this.quill.setContents(JSON.parse(this.el.innerText + \"\\n\"));\n    } else {\n      this.quill.setText(this.el.innerText);\n    }\n  }\n\n  setDTO() {\n    const parent = this.el.closest(`[data-model]`);\n    const model = parent?.dataset.model;\n    const id = parent.dataset.id;\n    const dto = new DTO(id);\n    dto.model = model;\n    dto.relation.name = this.el.dataset.relation;\n    return dto;\n  }\n\n  setToolbar() {\n    return [\n      [{ header: [2, 3, 4, false] }],\n      [\"bold\", \"italic\", \"underline\", \"strike\"], // toggled buttons\n      // ['blockquote'],\n\n      // [{ 'header': 1 }, { 'header': 2 }],               // custom button values\n      [{ list: \"ordered\" }, { list: \"bullet\" }],\n      [{ script: \"sub\" }, { script: \"super\" }], // superscript/subscript\n      [{ indent: \"-1\" }, { indent: \"+1\" }], // outdent/indent\n      // [{ 'direction': 'rtl' }],                         // text direction\n\n      [{ size: [\"small\", false, \"large\", \"huge\"] }], // custom dropdown\n\n      [{ color: [] }, { background: [] }], // dropdown with defaults from theme\n      [{ font: [] }],\n      [{ align: [] }],\n\n      [\"clean\"], // remove formatting button\n    ];\n  }\n\n  setOptions() {\n    return {\n      theme: this.theme,\n      // theme: 'bubble',\n      placeholder: this.placeholder,\n      modules: {\n        toolbar: this.setToolbar(),\n      },\n    };\n  }\n}\n","import AdminQuill from \"@src/components/quill/AdminQuill.js\";\n\nexport default class AdminProductDescrioption extends AdminQuill {\n  constructor(selector, options) {\n    super(selector, options);\n  }\n}\n","import AdminQuill from \"@src/components/quill/AdminQuill.js\";\n\nexport default class AdminProductSeoArticle extends AdminQuill {\n  constructor(selector, options) {\n    super(selector, options);\n  }\n}\n","import Quill from \"quill\";\nimport { QuillConst } from \"@src/components/quill/QuillConstans.js\";\nimport AdminProductDescrioption from \"@src/components/quill/AdminProductDescrioption.js\";\nimport AdminProductSeoArticle from \"@src/components/quill/AdminProductSeoArticle.js\";\n\nexport default class QuillFactory {\n  constructor() {\n    this.quill = new Quill();\n    debugger;\n  }\n\n  static create(selector, type, options) {\n    if (type === QuillConst.ADMIN_PRODUCT_DESCRIPTION) {\n      return new AdminProductDescrioption(selector, options);\n    } else if (type === QuillConst.ADMIN_PRODUCT_SEO_ARTICLE) {\n    }\n    return new AdminProductSeoArticle(selector, options);\n  }\n}\n"],"names":["QuillConst","AdminQuill","selector","options","el","$","Quill","ael","debounce","post","IsJson","parent","model","id","dto","DTO","AdminProductDescrioption","AdminProductSeoArticle","QuillFactory","type"],"mappings":"6LAAY,MAACA,EAAa,CACxB,0BAA2B,cAC3B,0BAA2B,cAC3B,2BAA4B,aAC9B,ECCe,MAAMC,CAAW,CAC9B,YAAYC,EAAUC,EAAS,CAC7B,MAAMC,EAAKC,EAAEH,CAAQ,EAAE,MAAO,EACzBE,IACL,KAAK,GAAKA,EACV,KAAK,SAAWD,GAAS,UAAY,GACrC,KAAK,SAAWA,GAAS,UAAY,GACrC,KAAK,MAAQA,GAAS,OAAS,OAC/B,KAAK,YAAcA,GAAS,OAAS,oBAErC,KAAK,QAAU,KAAK,WAAY,EAChC,KAAK,MAAQ,IAAIG,EAAMJ,EAAU,KAAK,OAAO,EAC7C,KAAK,IAAM,KAAK,OAAQ,EACxB,KAAK,WAAY,EACb,KAAK,UAAU,KAAK,GAAGK,CAAG,EAAE,QAASC,EAAS,KAAK,KAAK,KAAK,IAAI,CAAC,CAAC,EAC3E,CAEE,MAAM,MAAO,CACX,KAAK,IAAI,SAAS,OAAO,KAAK,IAAI,SAAS,KAAK,EAAI,KAAK,UACvD,KAAK,MAAM,YAAa,CACzB,EACW,MAAMC,EAChB,YAAY,KAAK,IAAI,KAAK,kBAC1B,KAAK,GACX,CACA,CAEE,YAAa,CACPC,EAAO,KAAK,GAAG,SAAS,EAC1B,KAAK,MAAM,YAAY,KAAK,MAAM,KAAK,GAAG,UAAY;AAAA,CAAI,CAAC,EAE3D,KAAK,MAAM,QAAQ,KAAK,GAAG,SAAS,CAE1C,CAEE,QAAS,CACP,MAAMC,EAAS,KAAK,GAAG,QAAQ,cAAc,EACvCC,EAAQD,GAAQ,QAAQ,MACxBE,EAAKF,EAAO,QAAQ,GACpBG,EAAM,IAAIC,EAAIF,CAAE,EACtB,OAAAC,EAAI,MAAQF,EACZE,EAAI,SAAS,KAAO,KAAK,GAAG,QAAQ,SAC7BA,CACX,CAEE,YAAa,CACX,MAAO,CACL,CAAC,CAAE,OAAQ,CAAC,EAAG,EAAG,EAAG,EAAK,EAAG,EAC7B,CAAC,OAAQ,SAAU,YAAa,QAAQ,EAIxC,CAAC,CAAE,KAAM,SAAS,EAAI,CAAE,KAAM,QAAQ,CAAE,EACxC,CAAC,CAAE,OAAQ,KAAK,EAAI,CAAE,OAAQ,OAAO,CAAE,EACvC,CAAC,CAAE,OAAQ,IAAI,EAAI,CAAE,OAAQ,IAAI,CAAE,EAGnC,CAAC,CAAE,KAAM,CAAC,QAAS,GAAO,QAAS,MAAM,EAAG,EAE5C,CAAC,CAAE,MAAO,CAAE,CAAA,EAAI,CAAE,WAAY,CAAE,CAAA,CAAE,EAClC,CAAC,CAAE,KAAM,CAAA,EAAI,EACb,CAAC,CAAE,MAAO,CAAA,EAAI,EAEd,CAAC,OAAO,CACT,CACL,CAEE,YAAa,CACX,MAAO,CACL,MAAO,KAAK,MAEZ,YAAa,KAAK,YAClB,QAAS,CACP,QAAS,KAAK,WAAY,CAC3B,CACF,CACL,CACA,CChFe,MAAME,UAAiCf,CAAW,CAC/D,YAAYC,EAAUC,EAAS,CAC7B,MAAMD,EAAUC,CAAO,CAC3B,CACA,CCJe,MAAMc,UAA+BhB,CAAW,CAC7D,YAAYC,EAAUC,EAAS,CAC7B,MAAMD,EAAUC,CAAO,CAC3B,CACA,CCDe,MAAMe,CAAa,CAChC,aAAc,CACZ,KAAK,MAAQ,IAAIZ,EACjB,QACJ,CAEE,OAAO,OAAOJ,EAAUiB,EAAMhB,EAAS,CACrC,OAAIgB,IAASnB,EAAW,0BACf,IAAIgB,EAAyBd,EAAUC,CAAO,EAGhD,IAAIc,EAAuBf,EAAUC,CAAO,CACvD,CACA"}
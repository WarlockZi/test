import{a as s,d as c,$ as a,p as h}from"./constants-ufk865tC.js";import{D as d}from"./admin-kImGN_0D.js";import"./Promotion-DdMHf4I5.js";import"./MyQuill-C0Uqs4nx.js";import"./search-Dnb8tly4.js";class l{constructor(e){this.id=e.id,this.checkbox=e,e[s]("change",this.changed.bind(this))}async changed({target:e}){e.dataset.pivotValue=+e.checked,this.checkbox.dispatchEvent(new CustomEvent("checkbox.changed",{bubbles:!0,detail:e.checked}))}}class C{constructor(e){if(!e)return!1;this.model=e.dataset.model,this.id=+e.dataset.id,this.setCheckboxes(),e[s]("click",this.handleClick.bind(this)),e[s]("keyup",c(this.handleKeyup.bind(this))),e[s]("date.changed",this.handleDateChange.bind(this)),e[s]("customSelect.changed",this.handleSelectChange.bind(this)),e[s]("checkbox.changed",this.handleChexboxChange.bind(this))}setCheckboxes(){const e=a("[my-checkbox]");[].forEach.call(e,function(t){new l(t)})}async handleChexboxChange({target:e}){this.update(e)}async handleSelectChange({target:e}){this.update(e)}async handleDateChange({target:e}){this.update(e)}async handleKeyup({target:e}){if(!e.hasAttribute("contenteditable")||!e.dataset.field)return!1;const t=new d(this.id,e),i=await h(`/adminsc/${this.model}/updateOrCreate`,t);i&&e.dispatchEvent(new CustomEvent("catalogItem.changed",{bubbles:!0,detail:{res:i}}))}async handleClick({target:e}){e.classList.contains("tab")&&this.handleTabClick(e)}handleTabClick(e){a("[data-tab].show").first().classList.toggle("show"),a(`[data-tab='${e.dataset.tabId}']`).first().classList.toggle("show"),a(".tab.active").first().classList.toggle("active"),e.classList.toggle("active")}async update(e){const t=new d(this.id,e);await h(`/adminsc/${this.model}/updateorcreate`,t)}}export{C as default};
//# sourceMappingURL=catalog-item-CpjMUxnC.js.map

{"version":3,"file":"ProductFilter-D2oLEEqg.js","sources":["../../src/Admin/ProductFilter/ProductFilter.js"],"sourcesContent":["import \"./ProductFilter.css\";\nimport { ael, qa, qs } from \"@src/constants.js\";\nimport { $, post } from \"@src/common.js\";\nimport SelectNew from \"@src/components/select/SelectNew.js\";\n\nexport default class ProductFilter {\n  constructor(productsFilter) {\n    if (!productsFilter) return;\n    this.wrap = productsFilter;\n    this.panel = productsFilter[qs](\".list-filter\");\n    this.url = \"/adminsc/report/filter\";\n    this.wrap[ael](\"click\", this.handleClick.bind(this));\n    this.setSelects();\n  }\n\n  setSelects() {\n    const selects = this.wrap[qa](`[select-new]`);\n    [].map.call(selects, (select) => {\n      new SelectNew(select);\n    });\n  }\n\n  async handleClick(e) {\n    const target = e.target;\n    if (target.classList.contains(\"filter-button\")) {\n      e.preventDefault();\n      const req = this.getClickedFilters();\n      const res = await post(this.url, req);\n      this.renderDataFromResponce(res);\n    }\n  }\n\n  getClickedFilters() {\n    const req = {};\n\n    const selected = this.wrap[qa](`[select-new]`);\n    [].map.call(selected, (select) => {\n      req[select.getAttribute(\"name\")] = select.dataset.value;\n      return null;\n    });\n\n    const checked = this.panel[qa](`[type='checkbox']:checked`);\n    [].forEach.call(checked, (check) => {\n      req[check.name] = \"on\";\n    });\n    return req;\n  }\n\n  renderDataFromResponce(res) {\n    $(\".used-filters\").first().innerHTML = res?.arr?.filterString;\n    $(\".list-filter\").first().innerHTML = res?.arr?.filterPanel;\n    const table = $(\"[custom-table]\").first();\n    table.innerHTML = res?.arr?.productsTable;\n    this.setSelects();\n  }\n}\n"],"names":["ProductFilter","productsFilter","qs","ael","selects","qa","select","SelectNew","e","req","res","post","selected","checked","check","$","table"],"mappings":"6OAKe,MAAMA,CAAc,CACjC,YAAYC,EAAgB,CACrBA,IACL,KAAK,KAAOA,EACZ,KAAK,MAAQA,EAAeC,CAAE,EAAE,cAAc,EAC9C,KAAK,IAAM,yBACX,KAAK,KAAKC,CAAG,EAAE,QAAS,KAAK,YAAY,KAAK,IAAI,CAAC,EACnD,KAAK,WAAY,EACrB,CAEE,YAAa,CACX,MAAMC,EAAU,KAAK,KAAKC,CAAE,EAAE,cAAc,EAC5C,CAAA,EAAG,IAAI,KAAKD,EAAUE,GAAW,CAC/B,IAAIC,EAAUD,CAAM,CAC1B,CAAK,CACL,CAEE,MAAM,YAAYE,EAAG,CAEnB,GADeA,EAAE,OACN,UAAU,SAAS,eAAe,EAAG,CAC9CA,EAAE,eAAgB,EAClB,MAAMC,EAAM,KAAK,kBAAmB,EAC9BC,EAAM,MAAMC,EAAK,KAAK,IAAKF,CAAG,EACpC,KAAK,uBAAuBC,CAAG,CACrC,CACA,CAEE,mBAAoB,CAClB,MAAMD,EAAM,CAAE,EAERG,EAAW,KAAK,KAAKP,CAAE,EAAE,cAAc,EAC7C,CAAA,EAAG,IAAI,KAAKO,EAAWN,IACrBG,EAAIH,EAAO,aAAa,MAAM,CAAC,EAAIA,EAAO,QAAQ,MAC3C,KACR,EAED,MAAMO,EAAU,KAAK,MAAMR,CAAE,EAAE,2BAA2B,EAC1D,OAAA,EAAG,QAAQ,KAAKQ,EAAUC,GAAU,CAClCL,EAAIK,EAAM,IAAI,EAAI,IACxB,CAAK,EACML,CACX,CAEE,uBAAuBC,EAAK,CAC1BK,EAAE,eAAe,EAAE,MAAK,EAAG,UAAYL,GAAK,KAAK,aACjDK,EAAE,cAAc,EAAE,MAAK,EAAG,UAAYL,GAAK,KAAK,YAChD,MAAMM,EAAQD,EAAE,gBAAgB,EAAE,MAAO,EACzCC,EAAM,UAAYN,GAAK,KAAK,cAC5B,KAAK,WAAY,CACrB,CACA"}
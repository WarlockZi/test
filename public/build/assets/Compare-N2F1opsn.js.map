{"version":3,"file":"Compare-N2F1opsn.js","sources":["../../src/Compare/Compare.js"],"sourcesContent":["import \"./compare.scss\";\n\nimport { $, post } from \"@src/common.js\";\nimport { ael } from \"@src/constants.js\";\nimport DTO from \"@src/Admin/DTO.js\";\n\nexport default class Compare {\n  constructor() {\n    const compare = $(\"[data-compare]\").first();\n    if (!compare) return false;\n\n    compare[ael](\"click\", this.handleClick.bind(this));\n  }\n\n  handleClick({ target }) {\n    if (target.classList.contains(\"compare\")) {\n      this.remove(target);\n    }\n  }\n\n  async remove(target) {\n    const productCard = target.closest(\".column\");\n    const res = await post(\"/compare/del\", this.productDTO(target));\n    if (res?.arr?.discompared) productCard.remove();\n  }\n\n  productDTO(target) {\n    const dto = new DTO(target);\n    dto.fields = {\n      product_id: target.closest(`[data-1sid]`).dataset[\"1sid\"],\n    };\n    return dto;\n  }\n}\n"],"names":["Compare","compare","$","ael","target","productCard","post","dto","DTO"],"mappings":"qIAMe,MAAMA,CAAQ,CAC3B,aAAc,CACZ,MAAMC,EAAUC,EAAE,gBAAgB,EAAE,MAAO,EAC3C,GAAI,CAACD,EAAS,MAAO,GAErBA,EAAQE,CAAG,EAAE,QAAS,KAAK,YAAY,KAAK,IAAI,CAAC,CACrD,CAEE,YAAY,CAAE,OAAAC,GAAU,CAClBA,EAAO,UAAU,SAAS,SAAS,GACrC,KAAK,OAAOA,CAAM,CAExB,CAEE,MAAM,OAAOA,EAAQ,CACnB,MAAMC,EAAcD,EAAO,QAAQ,SAAS,GAChC,MAAME,EAAK,eAAgB,KAAK,WAAWF,CAAM,CAAC,IACrD,KAAK,aAAaC,EAAY,OAAQ,CACnD,CAEE,WAAWD,EAAQ,CACjB,MAAMG,EAAM,IAAIC,EAAIJ,CAAM,EAC1B,OAAAG,EAAI,OAAS,CACX,WAAYH,EAAO,QAAQ,aAAa,EAAE,QAAQ,MAAM,CACzD,EACMG,CACX,CACA"}
{"version":3,"file":"modal-GfK2hrWP.js","sources":["../../src/components/Modal/modal.js"],"sourcesContent":["import \"./modal.scss\";\nimport { $ } from \"../../common\";\nimport { ael, cqs, qa, qs } from \"../../constants.js\";\n\nexport default class Modal {\n  constructor(props) {\n    this.modal = $(`[data-modal='default']`).first();\n\n    if (!props?.triggers || !props?.boxes || !this.modal) return;\n    this.triggers = props.triggers;\n    this.boxes = props.boxes;\n\n    this.overlay = $(this.modal).find(\".overlay\");\n    this.wrap = $(this.modal).find(\".wrap\");\n    this.content = $(this.modal).find(\".content\");\n    this.box = $(this.modal).find(\".box\");\n    this.closeEl = $(this.modal).find(\".modal-close\");\n\n    this.triggers.forEach((trigger) => {\n      if (cqs(trigger)) cqs(trigger)[ael](\"click\", this.show.bind(this));\n    });\n\n    this.overlay[ael](\"click\", this.close.bind(this));\n    this.modal[ael](\"modal.switch\", this.switch.bind(this));\n  }\n\n  switch({ target }) {\n    const box = target.closest(\".box\");\n    box[ael](\"transitionend\", this.removeClasses, { once: true });\n    box.classList.add(\"translate-left\");\n    const targe = target.dataset.target;\n    const registerBox = this.wrap[qs](`[id='${targe}']`);\n    registerBox.classList.add(\"transform-in\");\n  }\n\n  removeClasses({ target }) {\n    target.classList.remove(\"transform-in\");\n    target.classList.remove(\"translate-left\");\n  }\n\n  show() {\n    this.renderBoxes();\n    this.modal.classList.remove(\"invisible\");\n    this.overlay.classList.add(\"blur\");\n    this.wrap[qs](\".box:nth-child(2)\").classList.add(\"transform-in\");\n  }\n\n  close({ target }) {\n    if (\n      !target.classList.contains(\"modal-close\") &&\n      !target.classList.contains(\"overlay\")\n    )\n      return;\n    const openedBox = this.wrap[qs](\".transform-in\");\n    openedBox[ael](\"transitionend\", this.transitionHandler.bind(this));\n    openedBox?.removeEventListener(\"transitionend\", this.transitionHandler, {\n      once: true,\n    });\n    openedBox?.classList.remove(\"transform-in\");\n    this.overlay.classList.remove(\"blur\");\n  }\n\n  transitionHandler() {\n    this.modal.classList.add(\"invisible\");\n    this.wrap[qa](\".box[id]\").forEach((box) => box.remove());\n  }\n\n  renderBoxes() {\n    for (let index in this.boxes) {\n      const box = this.boxes[index];\n      const boxClone = this.box.cloneNode(true);\n      boxClone[ael](\"click\", this.close.bind(this));\n      boxClone.id = index;\n      boxClone[qs](\".title\").innerText = box[0][0];\n      for (let i in box) {\n        const row = box[i];\n        for (let j in row) {\n          if (j > 0) {\n            boxClone[qs](\".content\").appendChild(row[j]);\n          }\n        }\n      }\n      this.wrap.appendChild(boxClone);\n    }\n  }\n}\n"],"names":["Modal","props","$","trigger","cqs","ael","target","box","targe","qs","openedBox","qa","index","boxClone","i","row","j"],"mappings":"0GAIe,MAAMA,CAAM,CACzB,YAAYC,EAAO,CACjB,KAAK,MAAQC,EAAE,wBAAwB,EAAE,MAAO,EAE5C,GAACD,GAAO,UAAY,CAACA,GAAO,OAAS,CAAC,KAAK,SAC/C,KAAK,SAAWA,EAAM,SACtB,KAAK,MAAQA,EAAM,MAEnB,KAAK,QAAUC,EAAE,KAAK,KAAK,EAAE,KAAK,UAAU,EAC5C,KAAK,KAAOA,EAAE,KAAK,KAAK,EAAE,KAAK,OAAO,EACtC,KAAK,QAAUA,EAAE,KAAK,KAAK,EAAE,KAAK,UAAU,EAC5C,KAAK,IAAMA,EAAE,KAAK,KAAK,EAAE,KAAK,MAAM,EACpC,KAAK,QAAUA,EAAE,KAAK,KAAK,EAAE,KAAK,cAAc,EAEhD,KAAK,SAAS,QAASC,GAAY,CAC7BC,EAAID,CAAO,GAAGC,EAAID,CAAO,EAAEE,CAAG,EAAE,QAAS,KAAK,KAAK,KAAK,IAAI,CAAC,CACvE,CAAK,EAED,KAAK,QAAQA,CAAG,EAAE,QAAS,KAAK,MAAM,KAAK,IAAI,CAAC,EAChD,KAAK,MAAMA,CAAG,EAAE,eAAgB,KAAK,OAAO,KAAK,IAAI,CAAC,EAC1D,CAEE,OAAO,CAAE,OAAAC,GAAU,CACjB,MAAMC,EAAMD,EAAO,QAAQ,MAAM,EACjCC,EAAIF,CAAG,EAAE,gBAAiB,KAAK,cAAe,CAAE,KAAM,GAAM,EAC5DE,EAAI,UAAU,IAAI,gBAAgB,EAClC,MAAMC,EAAQF,EAAO,QAAQ,OACT,KAAK,KAAKG,CAAE,EAAE,QAAQD,CAAK,IAAI,EACvC,UAAU,IAAI,cAAc,CAC5C,CAEE,cAAc,CAAE,OAAAF,GAAU,CACxBA,EAAO,UAAU,OAAO,cAAc,EACtCA,EAAO,UAAU,OAAO,gBAAgB,CAC5C,CAEE,MAAO,CACL,KAAK,YAAa,EAClB,KAAK,MAAM,UAAU,OAAO,WAAW,EACvC,KAAK,QAAQ,UAAU,IAAI,MAAM,EACjC,KAAK,KAAKG,CAAE,EAAE,mBAAmB,EAAE,UAAU,IAAI,cAAc,CACnE,CAEE,MAAM,CAAE,OAAAH,GAAU,CAChB,GACE,CAACA,EAAO,UAAU,SAAS,aAAa,GACxC,CAACA,EAAO,UAAU,SAAS,SAAS,EAEpC,OACF,MAAMI,EAAY,KAAK,KAAKD,CAAE,EAAE,eAAe,EAC/CC,EAAUL,CAAG,EAAE,gBAAiB,KAAK,kBAAkB,KAAK,IAAI,CAAC,EACjEK,GAAW,oBAAoB,gBAAiB,KAAK,kBAAmB,CACtE,KAAM,EACZ,CAAK,EACDA,GAAW,UAAU,OAAO,cAAc,EAC1C,KAAK,QAAQ,UAAU,OAAO,MAAM,CACxC,CAEE,mBAAoB,CAClB,KAAK,MAAM,UAAU,IAAI,WAAW,EACpC,KAAK,KAAKC,CAAE,EAAE,UAAU,EAAE,QAASJ,GAAQA,EAAI,QAAQ,CAC3D,CAEE,aAAc,CACZ,QAASK,KAAS,KAAK,MAAO,CAC5B,MAAML,EAAM,KAAK,MAAMK,CAAK,EACtBC,EAAW,KAAK,IAAI,UAAU,EAAI,EACxCA,EAASR,CAAG,EAAE,QAAS,KAAK,MAAM,KAAK,IAAI,CAAC,EAC5CQ,EAAS,GAAKD,EACdC,EAASJ,CAAE,EAAE,QAAQ,EAAE,UAAYF,EAAI,CAAC,EAAE,CAAC,EAC3C,QAASO,KAAKP,EAAK,CACjB,MAAMQ,EAAMR,EAAIO,CAAC,EACjB,QAASE,KAAKD,EACRC,EAAI,GACNH,EAASJ,CAAE,EAAE,UAAU,EAAE,YAAYM,EAAIC,CAAC,CAAC,CAGvD,CACM,KAAK,KAAK,YAAYH,CAAQ,CACpC,CACA,CACA"}
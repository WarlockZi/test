import{d as c,$ as a,p as h}from"./common-DGD66q32.js";import{a as t}from"./constants-D_Ps4z6O.js";import{D as d}from"./admin-D3_JhNmL.js";import"./Promotion-CK6VXB02.js";import"./MyQuill-D5J0PKWf.js";import"./search-CLw-RMVN.js";class o{constructor(e){this.id=e.id,this.checkbox=e,e[t]("change",this.changed.bind(this))}async changed({target:e}){e.dataset.pivotValue=+e.checked,this.checkbox.dispatchEvent(new CustomEvent("checkbox.changed",{bubbles:!0,detail:e.checked}))}}class f{constructor(e){if(!e)return!1;this.model=e.dataset.model,this.id=+e.dataset.id,this.setCheckboxes(),e[t]("click",this.handleClick.bind(this)),e[t]("keyup",c(this.handleKeyup.bind(this))),e[t]("date.changed",this.handleDateChange.bind(this)),e[t]("customSelect.changed",this.handleSelectChange.bind(this)),e[t]("checkbox.changed",this.handleChexboxChange.bind(this))}setCheckboxes(){const e=a("[my-checkbox]");[].forEach.call(e,function(s){new o(s)})}async handleChexboxChange({target:e}){this.update(e)}async handleSelectChange({target:e}){this.update(e)}async handleDateChange({target:e}){this.update(e)}async handleKeyup({target:e}){if(!e.hasAttribute("contenteditable")||!e.dataset.field)return!1;const s=new d(this.id,e),i=await h(`/adminsc/${this.model}/updateOrCreate`,s);i&&e.dispatchEvent(new CustomEvent("catalogItem.changed",{bubbles:!0,detail:{res:i}}))}async handleClick({target:e}){e.classList.contains("tab")&&this.handleTabClick(e)}handleTabClick(e){a("[data-tab].show").first().classList.toggle("show"),a(`[data-tab='${e.dataset.tabId}']`).first().classList.toggle("show"),a(".tab.active").first().classList.toggle("active"),e.classList.toggle("active")}async update(e){const s=new d(this.id,e);await h(`/adminsc/${this.model}/updateorcreate`,s)}}export{f as default};
//# sourceMappingURL=catalog-item-W0b6lfpN.js.map

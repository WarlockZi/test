import{$ as i,c as e}from"./common-Boy4RmlM.js";class o{constructor(t){this.modal=i("[data-modal='default']").first(),this.modal&&t?.button&&(this.button=t.button,this.data=t.data,this.callback=t.callback,this.fieldsObj={},this.closeEl=i(this.modal).find(".modal-close"),this.title=i(this.modal).find(".title"),this.box=i(this.modal).find(".modal-box"),this.content=i(this.modal).find(".content"),this.footer=i(this.modal).find(".footer"),this.overlay=i(this.modal).find(".overlay"),this.check=i(".checkmark").first(),this.button.addEventListener("click",this.show.bind(this)),this.closeEl.addEventListener("click",this.close.bind(this)),this.overlay.addEventListener("click",this.close.bind(this)))}async show(){this.$submit=new e().tag("div").attr("type","submit").attr("class","button").attr("id","submit").text(this.data.submitText).get(),this.$submit.addEventListener("click",this.submit.bind(this)),this.content.innerHTML="",this.renderTitle(),await this.renderFields(),await this.renderContent(),await this.renderFooter(),this.renderSubmitText(),this.modal.style.display="flex",setTimeout(function(){this.overlay.style.opacity=1,this.box.style.opacity=1,this.box.classList.remove("transform-out"),this.box.classList.add("transform-in")}.bind(this),1)}async renderFields(){let t=this.data.fields;for(let s in t)this.fieldsObj[s]=t[s].querySelector("input"),this.content.appendChild(t[s])}async renderContent(){for(let t in this.data.content)this.content.appendChild(this.data.content[t])}async renderFooter(){for(let t in this.data.footer)this.footer.appendChild(this.data.footer[t]);this.footer.appendChild(this.$submit)}renderTitle(){this.title.innerText=this.data.title??"Заголовок"}renderSubmitText(){this.$submit.innerText=this.data.submitText??"ok"}async submit(){this.callback(this.fieldsObj,this)}close(){this.box.classList.remove("transform-in"),this.box.classList.add("transform-out"),this.overlay.style.opacity=0,this.box.style.opacity=0,setTimeout(function(){this.modal.style.display="none",this.footer.innerHTML=""}.bind(this),500)}}export{o as default};

{"version":3,"file":"catalog-item-DBhGUWZn.js","sources":["../../src/components/checkbox/checkbox.js","../../src/Admin/components/catalog-item/catalog-item.js"],"sourcesContent":["import {ael} from \"@src/constants.js\";\r\n\r\nexport default class Checkbox {\r\n   constructor(checkbox) {\r\n      this.id = checkbox.id;\r\n      this.checkbox = checkbox;\r\n      checkbox[ael]('change', this.changed.bind(this));\r\n   }\r\n\r\n   async changed({target}) {\r\n      target.dataset.pivotValue= +target.checked\r\n      this.checkbox.dispatchEvent(\r\n         new CustomEvent('checkbox.changed', {\r\n            bubbles:true,\r\n            detail: target.checked})\r\n      );\r\n   }\r\n}","import './catalog-item.scss';\r\nimport {$, debounce, post} from '@src/common.js';\r\nimport {ael} from \"@src/constants.js\";\r\nimport DTO from \"@src/Admin/DTO.js\";\r\nimport Checkbox from \"@src/components/checkbox/checkbox.js\";\r\n\r\nexport default class CatalogItem {\r\n   constructor(catalogItem) {\r\n      if (!catalogItem) return false\r\n\r\n      this.model = catalogItem.dataset.model;\r\n      this.id = +catalogItem.dataset.id;\r\n      this.setCheckboxes()\r\n\r\n      catalogItem[ael]('click', this.handleClick.bind(this))\r\n      catalogItem[ael]('keyup', debounce(this.handleKeyup.bind(this)))\r\n      catalogItem[ael]('date.changed', this.handleDateChange.bind(this))\r\n      catalogItem[ael]('customSelect.changed', this.handleSelectChange.bind(this))\r\n      catalogItem[ael]('checkbox.changed', this.handleChexboxChange.bind(this))\r\n   }\r\n   setCheckboxes() {\r\n      const checks = $('[my-checkbox]');\r\n      [].forEach.call(checks, function (check){\r\n         new Checkbox(check)\r\n      })\r\n   }\r\n   async handleChexboxChange({target}) {\r\n      this.update(target)\r\n   }\r\n   async handleSelectChange({target}) {\r\n      this.update(target)\r\n   }\r\n\r\n   async handleDateChange({target}) {\r\n      this.update(target)\r\n   }\r\n\r\n   async handleKeyup({target}) {\r\n      if (!target.hasAttribute('contenteditable') ||\r\n         !target.dataset.field) return false\r\n      const dto = new DTO(this.id, target)\r\n      const res = await post(`/adminsc/${this.model}/updateOrCreate`, dto)\r\n      if (res) {\r\n         target.dispatchEvent(new CustomEvent('catalogItem.changed',\r\n            {bubbles: true, detail: {res}})\r\n         )\r\n      }\r\n   }\r\n\r\n   async handleClick({target}) {\r\n      if ((target.classList.contains('tab'))) {\r\n         this.handleTabClick(target)\r\n      }\r\n   }\r\n\r\n   handleTabClick(target) {\r\n      $(`[data-tab].show`).first().classList.toggle('show');\r\n      $(`[data-tab='${target.dataset.tabId}']`).first().classList.toggle('show');\r\n      $(`.tab.active`).first().classList.toggle('active');\r\n      target.classList.toggle('active')\r\n   }\r\n\r\n   async update(target) {\r\n      const dto = new DTO(this.id, target)\r\n      let res = await post(`/adminsc/${this.model}/updateorcreate`, dto)\r\n   }\r\n}"],"names":["Checkbox","checkbox","ael","target","CatalogItem","catalogItem","debounce","checks","$","check","dto","DTO","res","post"],"mappings":"oMAEe,MAAMA,CAAS,CAC3B,YAAYC,EAAU,CACnB,KAAK,GAAKA,EAAS,GACnB,KAAK,SAAWA,EAChBA,EAASC,CAAG,EAAE,SAAU,KAAK,QAAQ,KAAK,IAAI,CAAC,CACjD,CAED,MAAM,QAAQ,CAAC,OAAAC,CAAM,EAAG,CACrBA,EAAO,QAAQ,WAAY,CAACA,EAAO,QACnC,KAAK,SAAS,cACX,IAAI,YAAY,mBAAoB,CACjC,QAAQ,GACR,OAAQA,EAAO,OAAO,CAAC,CACnC,CACI,CACJ,CCXe,MAAMC,CAAY,CAC9B,YAAYC,EAAa,CACtB,GAAI,CAACA,EAAa,MAAO,GAEzB,KAAK,MAAQA,EAAY,QAAQ,MACjC,KAAK,GAAK,CAACA,EAAY,QAAQ,GAC/B,KAAK,cAAe,EAEpBA,EAAYH,CAAG,EAAE,QAAS,KAAK,YAAY,KAAK,IAAI,CAAC,EACrDG,EAAYH,CAAG,EAAE,QAASI,EAAS,KAAK,YAAY,KAAK,IAAI,CAAC,CAAC,EAC/DD,EAAYH,CAAG,EAAE,eAAgB,KAAK,iBAAiB,KAAK,IAAI,CAAC,EACjEG,EAAYH,CAAG,EAAE,uBAAwB,KAAK,mBAAmB,KAAK,IAAI,CAAC,EAC3EG,EAAYH,CAAG,EAAE,mBAAoB,KAAK,oBAAoB,KAAK,IAAI,CAAC,CAC1E,CACD,eAAgB,CACb,MAAMK,EAASC,EAAE,eAAe,EAChC,CAAA,EAAG,QAAQ,KAAKD,EAAQ,SAAUE,EAAM,CACrC,IAAIT,EAASS,CAAK,CAC3B,CAAO,CACH,CACD,MAAM,oBAAoB,CAAC,OAAAN,CAAM,EAAG,CACjC,KAAK,OAAOA,CAAM,CACpB,CACD,MAAM,mBAAmB,CAAC,OAAAA,CAAM,EAAG,CAChC,KAAK,OAAOA,CAAM,CACpB,CAED,MAAM,iBAAiB,CAAC,OAAAA,CAAM,EAAG,CAC9B,KAAK,OAAOA,CAAM,CACpB,CAED,MAAM,YAAY,CAAC,OAAAA,CAAM,EAAG,CACzB,GAAI,CAACA,EAAO,aAAa,iBAAiB,GACvC,CAACA,EAAO,QAAQ,MAAO,MAAO,GACjC,MAAMO,EAAM,IAAIC,EAAI,KAAK,GAAIR,CAAM,EAC7BS,EAAM,MAAMC,EAAK,YAAY,KAAK,KAAK,kBAAmBH,CAAG,EAC/DE,GACDT,EAAO,cAAc,IAAI,YAAY,sBAClC,CAAC,QAAS,GAAM,OAAQ,CAAC,IAAAS,CAAG,CAAC,CAAC,CAChC,CAEN,CAED,MAAM,YAAY,CAAC,OAAAT,CAAM,EAAG,CACpBA,EAAO,UAAU,SAAS,KAAK,GACjC,KAAK,eAAeA,CAAM,CAE/B,CAED,eAAeA,EAAQ,CACpBK,EAAE,iBAAiB,EAAE,MAAO,EAAC,UAAU,OAAO,MAAM,EACpDA,EAAE,cAAcL,EAAO,QAAQ,KAAK,IAAI,EAAE,MAAK,EAAG,UAAU,OAAO,MAAM,EACzEK,EAAE,aAAa,EAAE,MAAO,EAAC,UAAU,OAAO,QAAQ,EAClDL,EAAO,UAAU,OAAO,QAAQ,CAClC,CAED,MAAM,OAAOA,EAAQ,CAClB,MAAMO,EAAM,IAAIC,EAAI,KAAK,GAAIR,CAAM,EACzB,MAAMU,EAAK,YAAY,KAAK,KAAK,kBAAmBH,CAAG,CACnE,CACJ"}
var v=Object.defineProperty;var E=(t,n,e)=>n in t?v(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var l=(t,n,e)=>(E(t,typeof n!="symbol"?n+"":n,e),e);function T(t){let n=c(".adm-content")[0];if(!n)return;let e=document.createElement("div");e.classList.add("message"),e.classList.add("error"),e.innerText=t,n.prepend(e),setTimeout(r.bind(this),3e3);function r(){function s(){e.remove()}e.style.scale=0,setTimeout(s.bind(this),500)}}const L=()=>{const t=document.documentElement.scrollTop||document.body.scrollTop;t>0&&(window.requestAnimationFrame(L),window.scrollTo(0,t-t/8))},C=new Intl.NumberFormat("ru",{style:"currency",currency:"RUB",minimumFractionDigits:2});function M(t,n,e=new FormData){if(self.formData=e,typeof n=="FileList")for(let r=0;r<n.length;r++)self.formData.append(r,n[r]);else self.formData.append("file",n);return self.createFormData=function(r,s=""){for(let a in r){let o=r[a],i=s?s+"["+a+"]":a;typeof o=="string"||typeof o=="number"?self.formData.append(i,o):typeof o=="object"&&self.createFormData(o,i)}},self.createFormData(t),self.formData}const F=(t,n=700)=>{let e;return function(){const r=()=>t.apply(this,arguments);clearTimeout(e),e=setTimeout(r,n)}};function _(t){try{JSON.parse(t)}catch{return!1}return!0}function b(t){var n=new RegExp("&nbsp;?","g");return t.replace(n," ")}function D(t){var n=new RegExp("\\n?","g");return t.replace(n,"")}function w(t){var n=new RegExp("\\t?","g");return t.replace(n,"")}function x(t){return t.trim()}function S(t){return t=b(t),t=D(t),t=w(t),t=x(t),t}function k(t){let n=c(t)[0].outerHTML;return S(n)}let q={show:function(t,n){let e=this.el("div","popup__close");e.innerText="X";let r=this.el("div","popup__item");r.innerText=t,r.append(e);let s=c(".popup")[0];s||(s=this.el("div","popup")),s.append(r),s.addEventListener("click",this.close,!0),document.body.append(s);let a=5e3;setTimeout(()=>{r.classList.remove("popup__item"),r.classList.add("popup-hide")},a);let o=a+950;setTimeout(()=>{r.remove(),n&&n()},o)},close:function(t){t.target.classList.contains("popup__close")&&this.closest(".popup").remove()},el:function(t,n){let e=document.createElement(t);return e.classList.add(n),e}};function N(){return document.querySelector('meta[name="token"]').getAttribute("content")??null}function H(){return!localStorage.getItem("id")}function J(t,n="",e=""){let r=document.createElement(t);return n&&r.classList.add(n),r.innerText=e||"",r}class O{constructor(){this.attributes=[]}tag(n){return this.tag=n,this}className(n){return this._className=n,this}field(n){return this._field=n,this}text(n){return this._text=n,this}html(n){debugger;return this._html=n,this}attr(n,e){return this.attributes.push([n,e]),this}get(){let n=document.createElement(this.tag);return this._text&&(n.innerText=this._text),this._html&&(n.innerHTML=this._html),this._className&&n.classList.add(this._className),this._field&&(n.dataset.field=this._field),this.attributes.forEach((e,r)=>{n.setAttribute(e[0],e[1])}),n}}async function I(t,n={}){return new Promise(async function(e,r){n.token=document.querySelector('meta[name="token"]').getAttribute("content");let s=new XMLHttpRequest;s.open("POST",t,!0),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),n instanceof FormData?s.send(n):(s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send("param="+JSON.stringify(n))),s.onerror=function(a){r(Error("Network Error"+a.message))},s.onload=function(){var a,o;try{if(!_(s.response)){console.log(s.response);return}const i=JSON.parse(s.response);let u=c(".message")[0];i!=null&&i.popup||(a=i==null?void 0:i.arr)!=null&&a.popup?q.show(i.popup??((o=i==null?void 0:i.arr)==null?void 0:o.popup)):i.msg?u&&(u.innerHTML=i.msg,c(u).removeClass("success"),c(u).removeClass("error")):i.success?u&&(u.innerHTML=i.success,c(u).addClass("success"),c(u).removeClass("error")):i.error&&(u.innerHTML=i.error,c(u).addClass("error"),c(u).removeClass("success"),T(i.error)),e(i)}catch{return console.log("////////////********* REQUEST ERROR ***********//////////////////////"),console.log(s.response),!1}}})}class p extends Array{constructor(){super(...arguments);l(this,"value",function(){return this[0].getAttribute("value")});l(this,"first",function(){return this[0]});l(this,"attr",function(e,r){return r&&this[0].setAttribute(e,r),this[0].getAttribute(e)});l(this,"selectedIndexValue",function(){if(this.length)return this[0].selectedOptions[0].value});l(this,"options",function(){if(this.length)return this[0].options});l(this,"count",function(){return this.length});l(this,"text",function(){if(this.length)return this[0].innerText});l(this,"checked",function(){if(this.length)return this[0].checked});l(this,"getWithStyle",function(e,r){let s=[];return this.forEach(a=>{a.style[e]===r&&s.push(a)}),s});l(this,"addClass",function(e){this.forEach(r=>{r.classList.add(e)})});l(this,"removeClass",function(e){this.forEach(r=>{r.classList.remove(e)})});l(this,"hasClass",function(e){if(this.classList.contains(e))return!0});l(this,"append",function(e){this[0].appendChild(e)});l(this,"find",function(e){return typeof e=="string"?this[0].querySelector(e):this[0].filter(s=>s===e)[0]});l(this,"findAll",function(e){if(typeof e=="string")return this[0].querySelectorAll(e)});l(this,"css",function(e,r){if(!r)return this[0].style[e];this.forEach(s=>{s.style[e]=r})})}on(e,r,s){typeof r=="function"?this.forEach(a=>a.addEventListener(e,r)):this[0].querySelectorAll(r).forEach(o=>{o.addEventListener(e,s)})}ready(e){this.some(s=>s.readyState!=null&&s.readyState!="loading")?e():document.addEventListener("DOMContentLoaded",e)}}function c(t){return typeof t=="string"||t instanceof String?new p(...document.querySelectorAll(t)):new p(t)}function X(t){return A(t)&&(document.cookie=t+"=; Max-Age=-1;"),!1}function A(t){return!!document.cookie.match("(^|;)?"+t+"=([^;]*)")}function P(t,n,e,r,s,a){let o=new Date(t),i=["January","February","March","April","May","June","July","August","September","October","November","December"],u=["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],m=o.getFullYear(),f=o.getMonth()+1,d=o.getDate(),h=i[o.getMonth()],g=o.getDay(),y=u[o.getDay()];return d<10&&(d="0"+d),f<10&&(f="0"+f),{yyyy:m,mm:f,dd:d,M:h,D:g,wd:y}}const j="querySelector",B="querySelectorAll",U="addEventListener",W="innerText";export{c as $,q as a,U as b,k as c,F as d,O as e,P as f,B as g,J as h,W as i,C as j,X as k,N as l,H as m,M as o,I as p,j as q,L as s};

import"./admin-DFVIS8Rt.js";import{q as l,a as n,d as a}from"./search-Btw97w8w.js";import{post as c,$ as i}from"./common-CWUZwUnI.js";import{S as o}from"./SelectNew-DQsOGtuz.js";import"./MyQuill-CqTUtJle.js";class w{constructor(t){t&&(this.wrap=t,this.panel=t[l](".list-filter"),this.url="/adminsc/report/filter",this.wrap[n]("click",this.handleClick.bind(this)),this.setSelects())}setSelects(){const t=this.wrap[a]("[select-new]");[].map.call(t,e=>{new o(e)})}async handleClick(t){if(t.target.classList.contains("filter-button")){t.preventDefault();const s=this.getClickedFilters(),r=await c(this.url,s);this.renderDataFromResponce(r)}}getClickedFilters(){const t={},e=this.wrap[a]("[select-new]");[].map.call(e,r=>(t[r.getAttribute("name")]=r.dataset.value,null));const s=this.panel[a]("[type='checkbox']:checked");return[].forEach.call(s,r=>{t[r.name]="on"}),t}renderDataFromResponce(t){i(".used-filters").first().innerHTML=t?.arr?.filterString,i(".list-filter").first().innerHTML=t?.arr?.filterPanel;const e=i("[custom-table]").first();e.innerHTML=t?.arr?.productsTable,this.setSelects()}}export{w as default};
//# sourceMappingURL=ProductFilter-QrOhCWcm.js.map

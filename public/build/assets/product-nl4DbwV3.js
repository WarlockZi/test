import{$ as a,p as m}from"./constants-D6t7YzCi.js";import{Q as u}from"./quill.snow-BxDoWBhC.js";import g from"./card_panel-CTzoWkTg.js";import{s as b}from"./shippableUnitsTable-C_znsOA6.js";const h=()=>{let r=a(".zoom").first();r&&(r.onmousemove=function(e){let i=0,o=0;var s=e.currentTarget;e.offsetX?i=e.offsetX:i=e.touches[0].pageX,e.offsetY?o=e.offsetY:o=e.touches[0].pageY;let c=i/s.offsetWidth*100,f=o/s.offsetHeight*100;s.style.backgroundPosition=c+"% "+f+"%"})},w=()=>{let r=".detail-text",e=a(r)[0];e&&o();function i(){const t=window.location.pathname.split("/").includes("adminsc");return{debug:"warn",modules:t?{toolbar:[["bold","italic","underline","blockquote"],[{align:"justify"},{align:"center"},{align:"right"}]]}:{toolbar:!1},placeholder:"Нет информации...",readOnly:!t,theme:"snow"}}function o(){let t=new u(r,i());t.getContents(),c(t),t.on(u.events.TEXT_CHANGE,s.bind(t))}function s(t){let n=this.getContents(),l=JSON.stringify(n);f(l)}function c(t,n){let l=e.innerText;if(d(l)){let p=JSON.parse(l);t.setContents(p)}}async function f(t){let n=a('[data-field="id"]').first();n=+n.innerText,await m("/adminsc/product/updateOrCreate",{id:n,txt:t})}function d(t){try{JSON.parse(t)}catch{return!1}return!0}};class O{__construct(){if(!a(".product-card").first())return!1;const i=a(".shippable-table").first();debugger;new b(i);const o=a(".short-link").first();o&&o.addEventListener("click",function({target:s}){new g().shortLink(s)}),h(),w()}}export{O as default};

import{q as l,a as c,b as a}from"./constants-D_Ps4z6O.js";import{p as n,$ as s}from"./common-Cc2XXPhh.js";import{S as o}from"./SelectNew-BDoAN2x4.js";import"./search-F4TblbjR.js";class d{constructor(t){t&&(this.wrap=t,this.panel=t[l](".list-filter"),this.url="/adminsc/report/updateFilter",this.wrap[c]("click",this.handleClick.bind(this)),this.checkboxes=Array.from(this.panel[a]("[type='checkbox']")),this.selects=Array.from(this.wrap[a]("[select-new]")),this.setSelects())}setSelects(){[].map.call(this.selects,t=>{new o(t)})}async handleClick(t){if(t.target.classList.contains("filter-button")){t.preventDefault();const r=this.getClickedFilters(),i=await n(this.url,r);this.renderDataFromResponce(i)}}getClickedFilters(){const t={};return t.toSelect=this.selects.filter(e=>e.dataset.value!=="0").reduce((e,r)=>(e[r.getAttribute("name")]=r.dataset.value,e),{}),t.toSave=this.checkboxes.filter(e=>e.checked===!0).map(e=>e.name),t}renderDataFromResponce(t){s(".used-filters").first().innerHTML=t?.arr?.filterString,s(".list-filter").first().innerHTML=t?.arr?.filterPanel;const e=s("[custom-table]").first();e.innerHTML=t?.arr?.productsTable,this.setSelects()}}export{d as default};
//# sourceMappingURL=ProductFilter-EpXNm8kj.js.map

{"version":3,"file":"modal-akugiGBu.js","sources":["../../src/components/Modal/modal.js"],"sourcesContent":["import './modal.scss'\r\nimport {$} from '../../common'\r\nimport {ael, cqs, qa, qs} from \"../../constants.js\";\r\n\r\nexport default class Modal {\r\n   constructor(props) {\r\n      this.modal = $(`[data-modal='default']`).first();\r\n\r\n      if (!props?.triggers || !props?.boxes || !this.modal) return;\r\n      this.triggers = props.triggers;\r\n      this.boxes = props.boxes;\r\n\r\n      this.overlay = $(this.modal).find('.overlay');\r\n      this.wrap = $(this.modal).find('.wrap');\r\n      this.content = $(this.modal).find('.content');\r\n      this.box = $(this.modal).find('.box');\r\n      this.closeEl = $(this.modal).find('.modal-close');\r\n\r\n      this.triggers.forEach((trigger) => {\r\n         if (cqs(trigger)) cqs(trigger).addEventListener('click', this.show.bind(this));\r\n      })\r\n\r\n      this.overlay.addEventListener('click', this.close.bind(this));\r\n      this.modal.addEventListener('modal.switch', this.switch.bind(this));\r\n   }\r\n\r\n   switch({target}) {\r\n      const box = target.closest('.box')\r\n      box[ael]('transitionend', this.removeClasses, {once: true})\r\n      box.classList.add('translate-left')\r\n      const targe = target.dataset.target;\r\n      const registerBox = this.wrap[qs](`[id='${targe}']`)\r\n      registerBox.classList.add('transform-in')\r\n   }\r\n\r\n   removeClasses({target}) {\r\n      target.classList.remove('transform-in')\r\n      target.classList.remove('translate-left')\r\n   }\r\n\r\n   show() {\r\n      this.renderBoxes();\r\n      this.modal.classList.remove('invisible');\r\n      this.overlay.classList.add('blur')\r\n      this.wrap[qs]('.box:nth-child(2)').classList.add('transform-in');\r\n   }\r\n\r\n   close({target}) {\r\n      if (!target.classList.contains('modal-close') && !target.classList.contains('overlay')) return\r\n      const openedBox = this.wrap[qs]('.transform-in')\r\n      openedBox[ael]('transitionend', this.transitionHandler.bind(this))\r\n      openedBox.removeEventListener('transitionend', this.transitionHandler, {once:true})\r\n      openedBox.classList.remove('transform-in');\r\n      this.overlay.classList.remove('blur')\r\n   }\r\n\r\n   transitionHandler() {\r\n      this.modal.classList.add('invisible');\r\n      this.wrap[qa]('.box[id]').forEach(box => box.remove())\r\n   }\r\n\r\n   renderBoxes() {\r\n      for (let index in this.boxes) {\r\n         const box = this.boxes[index];\r\n         const boxClone = this.box.cloneNode(true)\r\n         boxClone[ael]('click', this.close.bind(this))\r\n         boxClone.id = index;\r\n         boxClone[qs]('.title').innerText = box[0][0]\r\n         for (let i in box) {\r\n            const row = box[i];\r\n            for (let j in row) {\r\n               if (j > 0) {\r\n                  boxClone[qs]('.content').appendChild(row[j])\r\n               }\r\n            }\r\n         }\r\n         this.wrap.appendChild(boxClone)\r\n      }\r\n   }\r\n\r\n}"],"names":["Modal","props","$","trigger","cqs","target","box","ael","targe","qs","openedBox","qa","index","boxClone","i","row","j"],"mappings":"qGAIe,MAAMA,CAAM,CACxB,YAAYC,EAAO,CAChB,KAAK,MAAQC,EAAE,wBAAwB,EAAE,QAErC,GAACD,GAAO,UAAY,CAACA,GAAO,OAAS,CAAC,KAAK,SAC/C,KAAK,SAAWA,EAAM,SACtB,KAAK,MAAQA,EAAM,MAEnB,KAAK,QAAUC,EAAE,KAAK,KAAK,EAAE,KAAK,UAAU,EAC5C,KAAK,KAAOA,EAAE,KAAK,KAAK,EAAE,KAAK,OAAO,EACtC,KAAK,QAAUA,EAAE,KAAK,KAAK,EAAE,KAAK,UAAU,EAC5C,KAAK,IAAMA,EAAE,KAAK,KAAK,EAAE,KAAK,MAAM,EACpC,KAAK,QAAUA,EAAE,KAAK,KAAK,EAAE,KAAK,cAAc,EAEhD,KAAK,SAAS,QAASC,GAAY,CAC5BC,EAAID,CAAO,GAAGC,EAAID,CAAO,EAAE,iBAAiB,QAAS,KAAK,KAAK,KAAK,IAAI,CAAC,CACtF,CAAO,EAED,KAAK,QAAQ,iBAAiB,QAAS,KAAK,MAAM,KAAK,IAAI,CAAC,EAC5D,KAAK,MAAM,iBAAiB,eAAgB,KAAK,OAAO,KAAK,IAAI,CAAC,EACpE,CAED,OAAO,CAAC,OAAAE,CAAM,EAAG,CACd,MAAMC,EAAMD,EAAO,QAAQ,MAAM,EACjCC,EAAIC,CAAG,EAAE,gBAAiB,KAAK,cAAe,CAAC,KAAM,EAAI,CAAC,EAC1DD,EAAI,UAAU,IAAI,gBAAgB,EAClC,MAAME,EAAQH,EAAO,QAAQ,OACT,KAAK,KAAKI,CAAE,EAAE,QAAQD,CAAK,IAAI,EACvC,UAAU,IAAI,cAAc,CAC1C,CAED,cAAc,CAAC,OAAAH,CAAM,EAAG,CACrBA,EAAO,UAAU,OAAO,cAAc,EACtCA,EAAO,UAAU,OAAO,gBAAgB,CAC1C,CAED,MAAO,CACJ,KAAK,YAAW,EAChB,KAAK,MAAM,UAAU,OAAO,WAAW,EACvC,KAAK,QAAQ,UAAU,IAAI,MAAM,EACjC,KAAK,KAAKI,CAAE,EAAE,mBAAmB,EAAE,UAAU,IAAI,cAAc,CACjE,CAED,MAAM,CAAC,OAAAJ,CAAM,EAAG,CACb,GAAI,CAACA,EAAO,UAAU,SAAS,aAAa,GAAK,CAACA,EAAO,UAAU,SAAS,SAAS,EAAG,OACxF,MAAMK,EAAY,KAAK,KAAKD,CAAE,EAAE,eAAe,EAC/CC,EAAUH,CAAG,EAAE,gBAAiB,KAAK,kBAAkB,KAAK,IAAI,CAAC,EACjEG,EAAU,oBAAoB,gBAAiB,KAAK,kBAAmB,CAAC,KAAK,EAAI,CAAC,EAClFA,EAAU,UAAU,OAAO,cAAc,EACzC,KAAK,QAAQ,UAAU,OAAO,MAAM,CACtC,CAED,mBAAoB,CACjB,KAAK,MAAM,UAAU,IAAI,WAAW,EACpC,KAAK,KAAKC,CAAE,EAAE,UAAU,EAAE,QAAQL,GAAOA,EAAI,QAAQ,CACvD,CAED,aAAc,CACX,QAASM,KAAS,KAAK,MAAO,CAC3B,MAAMN,EAAM,KAAK,MAAMM,CAAK,EACtBC,EAAW,KAAK,IAAI,UAAU,EAAI,EACxCA,EAASN,CAAG,EAAE,QAAS,KAAK,MAAM,KAAK,IAAI,CAAC,EAC5CM,EAAS,GAAKD,EACdC,EAASJ,CAAE,EAAE,QAAQ,EAAE,UAAYH,EAAI,CAAC,EAAE,CAAC,EAC3C,QAASQ,KAAKR,EAAK,CAChB,MAAMS,EAAMT,EAAIQ,CAAC,EACjB,QAASE,KAAKD,EACPC,EAAI,GACLH,EAASJ,CAAE,EAAE,UAAU,EAAE,YAAYM,EAAIC,CAAC,CAAC,CAGnD,CACD,KAAK,KAAK,YAAYH,CAAQ,CAChC,CACH,CAEJ"}
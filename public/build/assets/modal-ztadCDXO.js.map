{"version":3,"file":"modal-ztadCDXO.js","sources":["../../src/components/Modal/modal.js"],"sourcesContent":["import \"./modal.scss\";\r\nimport { $ } from \"../../common\";\r\nimport { ael, cqs, qa, qs } from \"../../constants.js\";\r\n\r\nexport default class Modal {\r\n  constructor(props) {\r\n    this.modal = $(`[data-modal='default']`).first();\r\n\r\n    if (!props?.triggers || !props?.boxes || !this.modal) return;\r\n    this.triggers = props.triggers;\r\n    this.boxes = props.boxes;\r\n\r\n    this.overlay = $(this.modal).find(\".overlay\");\r\n    this.wrap = $(this.modal).find(\".wrap\");\r\n    this.content = $(this.modal).find(\".content\");\r\n    this.box = $(this.modal).find(\".box\");\r\n    this.closeEl = $(this.modal).find(\".modal-close\");\r\n\r\n    this.triggers.forEach((trigger) => {\r\n      if (cqs(trigger)) cqs(trigger)[ael](\"click\", this.show.bind(this));\r\n    });\r\n\r\n    this.overlay[ael](\"click\", this.close.bind(this));\r\n    this.modal[ael](\"modal.switch\", this.switch.bind(this));\r\n  }\r\n\r\n  switch({ target }) {\r\n    const box = target.closest(\".box\");\r\n    box[ael](\"transitionend\", this.removeClasses, { once: true });\r\n    box.classList.add(\"translate-left\");\r\n    const targe = target.dataset.target;\r\n    const registerBox = this.wrap[qs](`[id='${targe}']`);\r\n    registerBox.classList.add(\"transform-in\");\r\n  }\r\n\r\n  removeClasses({ target }) {\r\n    target.classList.remove(\"transform-in\");\r\n    target.classList.remove(\"translate-left\");\r\n  }\r\n\r\n  show() {\r\n    this.renderBoxes();\r\n    this.modal.classList.remove(\"invisible\");\r\n    this.overlay.classList.add(\"blur\");\r\n    this.wrap[qs](\".box:nth-child(2)\").classList.add(\"transform-in\");\r\n  }\r\n\r\n  close({ target }) {\r\n    if (\r\n      !target.classList.contains(\"modal-close\") &&\r\n      !target.classList.contains(\"overlay\")\r\n    )\r\n      return;\r\n    const openedBox = this.wrap[qs](\".transform-in\");\r\n    openedBox[ael](\"transitionend\", this.transitionHandler.bind(this));\r\n    openedBox?.removeEventListener(\"transitionend\", this.transitionHandler, {\r\n      once: true,\r\n    });\r\n    openedBox?.classList.remove(\"transform-in\");\r\n    this.overlay.classList.remove(\"blur\");\r\n  }\r\n\r\n  transitionHandler() {\r\n    this.modal.classList.add(\"invisible\");\r\n    this.wrap[qa](\".box[id]\").forEach((box) => box.remove());\r\n  }\r\n\r\n  renderBoxes() {\r\n    for (let index in this.boxes) {\r\n      const box = this.boxes[index];\r\n      const boxClone = this.box.cloneNode(true);\r\n      boxClone[ael](\"click\", this.close.bind(this));\r\n      boxClone.id = index;\r\n      boxClone[qs](\".title\").innerText = box[0][0];\r\n      for (let i in box) {\r\n        const row = box[i];\r\n        for (let j in row) {\r\n          if (j > 0) {\r\n            boxClone[qs](\".content\").appendChild(row[j]);\r\n          }\r\n        }\r\n      }\r\n      this.wrap.appendChild(boxClone);\r\n    }\r\n  }\r\n}\r\n"],"names":["Modal","props","$","trigger","cqs","ael","target","box","targe","qs","openedBox","qa","index","boxClone","i","row","j"],"mappings":"0GAIe,MAAMA,CAAM,CACzB,YAAYC,EAAO,CACjB,KAAK,MAAQC,EAAE,wBAAwB,EAAE,QAErC,GAACD,GAAO,UAAY,CAACA,GAAO,OAAS,CAAC,KAAK,SAC/C,KAAK,SAAWA,EAAM,SACtB,KAAK,MAAQA,EAAM,MAEnB,KAAK,QAAUC,EAAE,KAAK,KAAK,EAAE,KAAK,UAAU,EAC5C,KAAK,KAAOA,EAAE,KAAK,KAAK,EAAE,KAAK,OAAO,EACtC,KAAK,QAAUA,EAAE,KAAK,KAAK,EAAE,KAAK,UAAU,EAC5C,KAAK,IAAMA,EAAE,KAAK,KAAK,EAAE,KAAK,MAAM,EACpC,KAAK,QAAUA,EAAE,KAAK,KAAK,EAAE,KAAK,cAAc,EAEhD,KAAK,SAAS,QAASC,GAAY,CAC7BC,EAAID,CAAO,GAAGC,EAAID,CAAO,EAAEE,CAAG,EAAE,QAAS,KAAK,KAAK,KAAK,IAAI,CAAC,CACvE,CAAK,EAED,KAAK,QAAQA,CAAG,EAAE,QAAS,KAAK,MAAM,KAAK,IAAI,CAAC,EAChD,KAAK,MAAMA,CAAG,EAAE,eAAgB,KAAK,OAAO,KAAK,IAAI,CAAC,EACvD,CAED,OAAO,CAAE,OAAAC,GAAU,CACjB,MAAMC,EAAMD,EAAO,QAAQ,MAAM,EACjCC,EAAIF,CAAG,EAAE,gBAAiB,KAAK,cAAe,CAAE,KAAM,EAAI,CAAE,EAC5DE,EAAI,UAAU,IAAI,gBAAgB,EAClC,MAAMC,EAAQF,EAAO,QAAQ,OACT,KAAK,KAAKG,CAAE,EAAE,QAAQD,CAAK,IAAI,EACvC,UAAU,IAAI,cAAc,CACzC,CAED,cAAc,CAAE,OAAAF,GAAU,CACxBA,EAAO,UAAU,OAAO,cAAc,EACtCA,EAAO,UAAU,OAAO,gBAAgB,CACzC,CAED,MAAO,CACL,KAAK,YAAW,EAChB,KAAK,MAAM,UAAU,OAAO,WAAW,EACvC,KAAK,QAAQ,UAAU,IAAI,MAAM,EACjC,KAAK,KAAKG,CAAE,EAAE,mBAAmB,EAAE,UAAU,IAAI,cAAc,CAChE,CAED,MAAM,CAAE,OAAAH,GAAU,CAChB,GACE,CAACA,EAAO,UAAU,SAAS,aAAa,GACxC,CAACA,EAAO,UAAU,SAAS,SAAS,EAEpC,OACF,MAAMI,EAAY,KAAK,KAAKD,CAAE,EAAE,eAAe,EAC/CC,EAAUL,CAAG,EAAE,gBAAiB,KAAK,kBAAkB,KAAK,IAAI,CAAC,EACjEK,GAAW,oBAAoB,gBAAiB,KAAK,kBAAmB,CACtE,KAAM,EACZ,CAAK,EACDA,GAAW,UAAU,OAAO,cAAc,EAC1C,KAAK,QAAQ,UAAU,OAAO,MAAM,CACrC,CAED,mBAAoB,CAClB,KAAK,MAAM,UAAU,IAAI,WAAW,EACpC,KAAK,KAAKC,CAAE,EAAE,UAAU,EAAE,QAASJ,GAAQA,EAAI,OAAM,CAAE,CACxD,CAED,aAAc,CACZ,QAASK,KAAS,KAAK,MAAO,CAC5B,MAAML,EAAM,KAAK,MAAMK,CAAK,EACtBC,EAAW,KAAK,IAAI,UAAU,EAAI,EACxCA,EAASR,CAAG,EAAE,QAAS,KAAK,MAAM,KAAK,IAAI,CAAC,EAC5CQ,EAAS,GAAKD,EACdC,EAASJ,CAAE,EAAE,QAAQ,EAAE,UAAYF,EAAI,CAAC,EAAE,CAAC,EAC3C,QAASO,KAAKP,EAAK,CACjB,MAAMQ,EAAMR,EAAIO,CAAC,EACjB,QAASE,KAAKD,EACRC,EAAI,GACNH,EAASJ,CAAE,EAAE,UAAU,EAAE,YAAYM,EAAIC,CAAC,CAAC,CAGhD,CACD,KAAK,KAAK,YAAYH,CAAQ,CAC/B,CACF,CACH"}
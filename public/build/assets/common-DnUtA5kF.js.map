{"version":3,"file":"common-DnUtA5kF.js","sources":["../../src/common.js"],"sourcesContent":["\"use strict\";\r\n\r\nconst scrollToTop = () => {\r\n  const c = document.documentElement.scrollTop || document.body.scrollTop;\r\n  if (c > 0) {\r\n    window.requestAnimationFrame(scrollToTop);\r\n    window.scrollTo(0, c - c / 8);\r\n  }\r\n};\r\nexport const formatter = new Intl.NumberFormat(\"ru\", {\r\n  style: \"currency\",\r\n  currency: \"RUB\",\r\n  minimumFractionDigits: 2,\r\n});\r\n\r\nexport function objAndFiles2FormData(obj, files, formData = new FormData()) {\r\n  self.formData = formData;\r\n  if (typeof files === \"FileList\") {\r\n    for (let i = 0; i < files.length; i++) {\r\n      self.formData.append(i, files[i]);\r\n    }\r\n  } else {\r\n    self.formData.append(\"file\", files);\r\n  }\r\n  self.createFormData = function (obj, subKeyStr = \"\") {\r\n    for (let i in obj) {\r\n      let value = obj[i];\r\n      let subKeyStrTrans = subKeyStr ? subKeyStr + \"[\" + i + \"]\" : i;\r\n\r\n      if (typeof value === \"string\" || typeof value === \"number\") {\r\n        self.formData.append(subKeyStrTrans, value);\r\n      } else if (typeof value === \"object\") {\r\n        self.createFormData(value, subKeyStrTrans);\r\n      }\r\n    }\r\n  };\r\n  self.createFormData(obj);\r\n  return self.formData;\r\n}\r\n\r\nconst debounce = (fn, time = 700) => {\r\n  let timeout;\r\n  return function () {\r\n    const functionCall = () => fn.apply(this, arguments);\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(functionCall, time);\r\n  };\r\n};\r\n\r\nfunction IsJson(str) {\r\n  try {\r\n    JSON.parse(str);\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction replaceNbsps(str) {\r\n  var re = new RegExp(\"&nbsp;?\", \"g\");\r\n  return str.replace(re, \" \");\r\n}\r\n\r\nfunction replaceNs(str) {\r\n  var re = new RegExp(\"\\\\n?\", \"g\");\r\n  return str.replace(re, \"\");\r\n}\r\n\r\nfunction replaceTs(str) {\r\n  var re = new RegExp(\"\\\\t?\", \"g\");\r\n  return str.replace(re, \"\");\r\n}\r\n\r\nfunction replaceSpace(str) {\r\n  var re = new RegExp(\"s\", \"g\");\r\n  return str.replace(re, \"\");\r\n}\r\n\r\nfunction replaceBackSpace(str) {\r\n  return str.trim();\r\n}\r\n\r\nfunction formatDate(date = 1, time) {\r\n  let t = new Date();\r\n  let now = t.now();\r\n  let dateArr = now.split(\"-\");\r\n  let formattedDate = dateArr.forEach((s) => {\r\n    if (s === \"yyyy\") return t.getFullYear;\r\n    if (s === \"m\") return t.getMonth;\r\n  });\r\n}\r\n\r\nfunction trimStr(str) {\r\n  str = replaceNbsps(str);\r\n  str = replaceNs(str);\r\n  str = replaceTs(str);\r\n  // str = replaceSpace(str)\r\n  str = replaceBackSpace(str);\r\n  return str;\r\n}\r\n\r\nfunction setMorph(data) {\r\n  if (!data.model) return;\r\n  if (!data.id) return;\r\n  if (!data.morph) return;\r\n  let url = getMorphUrl(data.model, data.id);\r\n}\r\n\r\nfunction getMorphUrl(model, id) {\r\n  return `/adminsc/${model}/createOrUpdate/${id}`;\r\n}\r\n\r\nfunction cachePage(className) {\r\n  const html = $(className).first().outerHTML;\r\n  // return html\r\n  return damn_ampersand(trimStr(html));\r\n}\r\n\r\nconst validate = {\r\n  sort: () => {\r\n    const error = this.nextElementSibling;\r\n    const ar = this.value.match(/\\D+/);\r\n    if (ar) {\r\n      error.innerText = \"Только цифры\";\r\n      error.style.opacity = \"1\";\r\n    } else {\r\n      if (error.style.opacity === \"1\") {\r\n        error.style.opacity = \"0\";\r\n      }\r\n    }\r\n  },\r\n  email: (email) => {\r\n    if (!email) return false;\r\n    const text = \"Неправильный формат почты\";\r\n    const re =\r\n      /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    const res = re.test(String(email).toLowerCase());\r\n    if (!res) return text;\r\n    return false;\r\n  },\r\n  password: (password) => {\r\n    if (!password) return false;\r\n    let text =\r\n      \"Пароль может состоять из - Большие латинские бкувы - Маленькие латинские буквы\";\r\n    let res = /^[a-zA-Z0-9-_!#$%^&*()]{6,30}$/.test(password);\r\n    if (!res) return text;\r\n    return false;\r\n  },\r\n};\r\n\r\nconst popup = {\r\n  show: function (txt) {\r\n    const popup = this.el(\"div\", \"popup\");\r\n\r\n    const close = this.el(\"div\", \"popup__close\");\r\n    close.innerText = \"X\";\r\n\r\n    const popup__item = this.el(\"div\", \"popup__item\");\r\n    popup__item.innerText = txt;\r\n    popup__item.append(close);\r\n\r\n    popup.append(popup__item);\r\n    popup.addEventListener(\"click\", this.close, true);\r\n    document.body.append(popup);\r\n\r\n    const hideDelay = 5000;\r\n    setTimeout(() => {\r\n      popup__item.classList.remove(\"popup__item\");\r\n      popup__item.classList.add(\"popup-hide\");\r\n    }, hideDelay);\r\n    const removeDelay = hideDelay + 950;\r\n    setTimeout(() => {\r\n      popup__item.remove();\r\n    }, removeDelay);\r\n  },\r\n\r\n  close: function ({ target }) {\r\n    if (target.classList.contains(\"popup__close\")) {\r\n      this.closest(\".popup\").remove();\r\n    }\r\n  },\r\n  el: function (tagName, className) {\r\n    const el = document.createElement(tagName);\r\n    el.classList.add(className);\r\n    return el;\r\n  },\r\n};\r\n\r\nfunction getPhpSession() {\r\n  return (\r\n    document.querySelector('meta[name=\"phpSession\"]').getAttribute(\"content\") ??\r\n    null\r\n  );\r\n}\r\n\r\nfunction sanitizeInput(input) {\r\n  if (!input) return;\r\n  const map = {\r\n    \"&\": \"&amp;\",\r\n    \"<\": \"&lt;\",\r\n    \">\": \"&gt;\",\r\n    // '\"': '&quot;',\r\n    \"'\": \"&#39;\",\r\n    \"(\": \"&fp\",\r\n    \")\": \"&bp\",\r\n    \"/\": \"&fs\",\r\n    \"\\\\\": \"&bs\",\r\n    // \".\": '&dot',\r\n    \";\": \"&sc\",\r\n    \"|\": \"&or\",\r\n    \"?php\": \"&?php\",\r\n    delete: \"&del\",\r\n  };\r\n  const reg = /[&<>'()\\/\\\\;]/gi;\r\n  const sanitized = input.replace(reg, (match) => {\r\n    return map[match];\r\n  });\r\n  return sanitized.trim();\r\n}\r\n\r\nfunction passwordValidator(pass) {\r\n  const min = 6;\r\n  const errors = [];\r\n\r\n  const replacePattern = /[a-zA-Z0-9\\@\\-\\_\\.А-я]*/;\r\n  if (!pass.length) {\r\n    errors.push(\"Поле не должно быть пустым\");\r\n  }\r\n  if (pass.replace(replacePattern, \"\").length) {\r\n    errors.push(\"Разрешены только английские\");\r\n  }\r\n  if (pass.length < min) {\r\n    errors.push(\"Длина меньше 6 символов\");\r\n  }\r\n  return errors;\r\n}\r\n\r\nfunction emailValidator(mail) {\r\n  const email = decodeURI(mail); //иначе русские буквы после @ шифруются в url\r\n  // const eng = '[а-яА-Я]*'\r\n  const min = 2;\r\n  // const at = '@'\r\n  const minLengthAfterAt = \"(.){2,}@(.){2,}\";\r\n  const dot = \".\";\r\n  const domainLength = \"^(.){2,}@(.){2,}\\.(.){2,}$\";\r\n  const errors = [];\r\n\r\n  const replacePattern = /[a-zA-Z0-9\\@\\-\\_\\.]*/;\r\n  if (!email.length) {\r\n    errors.push(\"Поле не должно быть пустым\");\r\n  }\r\n  if (email.replace(replacePattern, \"\").length) {\r\n    errors.push(\"Разрешены только английские\");\r\n  }\r\n  if (email.length < min) {\r\n    errors.push(\"Длина меньше 2 символов\");\r\n  }\r\n  if (!/[\\@]/.test(email)) {\r\n    errors.push(\"Нет знака @\");\r\n  }\r\n  if (!email.match(minLengthAfterAt)) {\r\n    errors.push(\"Меньше 2 знаков после @\");\r\n  }\r\n  if (!email.includes(dot)) {\r\n    errors.push(\"Нет точки\");\r\n  }\r\n  if (!email.match(domainLength)) {\r\n    errors.push(\"Меньше 2 знаков После точки\");\r\n  }\r\n  return errors;\r\n}\r\n\r\nfunction createEl(tagName, className = \"\", text = \"\") {\r\n  let div = document.createElement(tagName);\r\n  if (className) {\r\n    div.classList.add(className);\r\n  }\r\n  div.innerText = text ? text : \"\";\r\n  return div;\r\n}\r\n\r\nclass createElement {\r\n  constructor() {\r\n    this.attributes = [];\r\n  }\r\n\r\n  tag(tag) {\r\n    this.tag = tag;\r\n    return this;\r\n  }\r\n\r\n  className(className) {\r\n    this._className = className;\r\n    return this;\r\n  }\r\n\r\n  field(field) {\r\n    this._field = field;\r\n    return this;\r\n  }\r\n\r\n  text(txt) {\r\n    this._text = txt;\r\n    return this;\r\n  }\r\n\r\n  html(html) {\r\n    this._html = html;\r\n    return this;\r\n  }\r\n\r\n  attr(key, value) {\r\n    this.attributes.push([key, value]);\r\n    return this;\r\n  }\r\n\r\n  get() {\r\n    let el = document.createElement(this.tag);\r\n    if (this._text) {\r\n      el.innerText = this._text;\r\n    }\r\n    if (this._html) {\r\n      el.innerHTML = this._html;\r\n    }\r\n    if (this._className) {\r\n      el.classList.add(this._className);\r\n    }\r\n    if (this._field) {\r\n      el.dataset.field = this._field;\r\n    }\r\n    this.attributes.forEach((entry, i) => {\r\n      el.setAttribute(entry[0], entry[1]);\r\n    });\r\n    return el;\r\n  }\r\n}\r\n\r\nconst time = {\r\n  m: 60,\r\n  h: 60 * 60,\r\n  d: 60 * 60 * 24,\r\n  mMs: 60 * 1000,\r\n  hMs: 60 * 60 * 1000,\r\n  dMs: 60 * 60 * 24 * 1000,\r\n};\r\n\r\nasync function del(url, data = {}, headers = {}) {\r\n  let p = window.location.search;\r\n  p = p.match(new RegExp(key + \"=([^&=]+)\"));\r\n  return p ? p[1] : false;\r\n}\r\n\r\nasync function post(url, data = {}, headers = {}) {\r\n  const init = setPostBodyHeaders(url, data, headers);\r\n  const res = await sendPost(url, init).catch((err) => {\r\n    console.log(err);\r\n  });\r\n  handleResponse(res);\r\n  showMessage(res);\r\n  return res;\r\n}\r\n\r\nfunction isEmptyObj(obj) {\r\n  return !Object.keys(obj).length;\r\n}\r\n\r\nfunction setPostBodyHeaders(url, body, headers) {\r\n  body.phpSession = getPhpSession();\r\n  headers = isEmptyObj(headers)\r\n    ? { \"X-Requested-With\": \"XMLHttpRequest\" }\r\n    : headers;\r\n  if (!(body instanceof FormData)) {\r\n    headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\r\n  } else {\r\n    return {\r\n      method: \"POST\",\r\n      body: body,\r\n    };\r\n  }\r\n  return {\r\n    method: \"POST\",\r\n    headers,\r\n    body: \"params=\" + JSON.stringify(body, null, 2),\r\n  };\r\n}\r\n\r\nfunction damn_ampersand(str) {\r\n  return str.replaceAll(\"&\", \"%26\");\r\n}\r\n\r\nfunction sendPost(url, init) {\r\n  return new Promise(async (resolve, reject) => {\r\n    const res = await fetch(url, init)\r\n      .then(async (res) => {\r\n        if (res.status === 200) {\r\n          const data = await res.json();\r\n          resolve(data);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"Fetch error\" + err.message);\r\n        reject(err.message);\r\n      });\r\n  });\r\n}\r\n\r\nfunction showMessage(res) {\r\n  const msg = $(\".message\")[0];\r\n  if (!msg) return false;\r\n  if (res.msg) {\r\n    msg.innerHTML = res.msg;\r\n  } else if (res.success) {\r\n    msg.innerHTML = res.success;\r\n  } else if (res.error) {\r\n    msg.innerHTML = res.error;\r\n  }\r\n  $(msg).removeClass(\"success\");\r\n  $(msg).removeClass(\"error\");\r\n}\r\n\r\nfunction handleResponse(res) {\r\n  try {\r\n    if (res?.arr?.popup) {\r\n      popup.show(res?.arr?.popup);\r\n    } else {\r\n      showMessage(res);\r\n    }\r\n    return res;\r\n  } catch (e) {\r\n    console.log(\r\n      \"////////////********* REQUEST ERROR ***********//////////////////////\",\r\n    );\r\n    if (IsJson(res.response)) {\r\n      console.log(JSON.parse(res.response));\r\n    } else {\r\n      console.log(res.response);\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\n// function oldPost(url, data) {\r\n//    return new Promise(async function (resolve, reject) {\r\n//          data.phpSession = getPhpSession();\r\n//\r\n//          let req = new XMLHttpRequest();\r\n//          req.open('POST', url, true);\r\n//          req.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n//\r\n//          if (data instanceof FormData) {\r\n//             req.send(data);\r\n//          } else {\r\n//             req.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n//             req.send('param=' + JSON.stringify(data));\r\n//          }\r\n//\r\n//          req.onerror = function (e) {\r\n//             reject(Error(\"Network Error\" + e.message));\r\n//          };\r\n//          req.onload = function () {\r\n//             resolve(handleResponse(req.response))\r\n//          }\r\n//       }\r\n//    )\r\n// }\r\n\r\nclass ElementCollection extends Array {\r\n  on(event, cbOrSelector, cb) {\r\n    if (typeof cbOrSelector === \"function\") {\r\n      this.forEach((e) => e.addEventListener(event, cbOrSelector));\r\n    } else {\r\n      let elems = this[0].querySelectorAll(cbOrSelector);\r\n      elems.forEach((elem) => {\r\n        elem.addEventListener(event, cb);\r\n      });\r\n    }\r\n  }\r\n\r\n  value = function () {\r\n    return this[0].getAttribute(\"value\");\r\n  };\r\n  first = function () {\r\n    return this[0];\r\n  };\r\n  attr = function (attrName, attrVal) {\r\n    if (attrVal) {\r\n      this[0].setAttribute(attrName, attrVal);\r\n    }\r\n    return this[0].getAttribute(attrName);\r\n  };\r\n  selectedIndexValue = function () {\r\n    if (this.length) return this[0].selectedOptions[0].value;\r\n  };\r\n  options = function () {\r\n    if (this.length) return this[0].options;\r\n  };\r\n  count = function () {\r\n    return this.length;\r\n  };\r\n  text = function () {\r\n    if (this.length) return this[0].innerText;\r\n  };\r\n  checked = function () {\r\n    if (this.length) return this[0].checked;\r\n  };\r\n  getWithStyle = function (attr, val) {\r\n    let arr = [];\r\n    this.forEach((s) => {\r\n      if (s.style[attr] === val) {\r\n        arr.push(s);\r\n      }\r\n    });\r\n    return arr;\r\n  };\r\n  addClass = function (className) {\r\n    this.forEach((s) => {\r\n      s.classList.add(className);\r\n    });\r\n  };\r\n  removeClass = function (className) {\r\n    this.forEach((s) => {\r\n      s.classList.remove(className);\r\n    });\r\n  };\r\n  hasClass = function (className) {\r\n    if (this.classList.contains(className)) return true;\r\n  };\r\n  append = function (el) {\r\n    this[0].appendChild(el);\r\n  };\r\n  find = function (item) {\r\n    if (typeof item === \"string\") {\r\n      return this[0].querySelector(item);\r\n    } else {\r\n      let filtered = this[0].filter((el) => {\r\n        return el === item;\r\n      });\r\n      return filtered[0];\r\n    }\r\n  };\r\n  findAll = function (item) {\r\n    if (typeof item === \"string\") {\r\n      return this[0].querySelectorAll(item);\r\n    }\r\n  };\r\n\r\n  css = function (attr, val) {\r\n    if (!val) {\r\n      return this[0].style[attr];\r\n    }\r\n    this.forEach((s) => {\r\n      s.style[attr] = val;\r\n    });\r\n  };\r\n\r\n  ready(cb) {\r\n    const isReady = this.some((e) => {\r\n      return e.readyState != null && e.readyState != \"loading\";\r\n    });\r\n    if (isReady) {\r\n      cb();\r\n    } else {\r\n      document.addEventListener(\"DOMContentLoaded\", cb);\r\n    }\r\n  }\r\n}\r\n\r\nfunction $(selector) {\r\n  if (typeof selector === \"string\" || selector instanceof String) {\r\n    return new ElementCollection(...document.querySelectorAll(selector));\r\n  } else {\r\n    return new ElementCollection(selector);\r\n  }\r\n}\r\n\r\nfunction getCookie(key) {\r\n  let match = document.cookie.match(\"(^|;)?\" + key + \"=([^;]*)\");\r\n  return match ? match[2] : false;\r\n}\r\n\r\nfunction cookieRemove(key) {\r\n  if (cookieExists(key)) document.cookie = key + \"=; Max-Age=-1;\";\r\n  return false;\r\n}\r\n\r\nfunction cookieExists(key) {\r\n  let match = document.cookie.match(\"(^|;)?\" + key + \"=([^;]*)\");\r\n  return !!match;\r\n}\r\n\r\nfunction getCookieExpires(digit, unit) {\r\n  const units = {\r\n    s: 1,\r\n    m: 60,\r\n    h: 60 * 60,\r\n    d: 60 * 60 * 24,\r\n    w: 60 * 60 * 24 * 7,\r\n    M: 60 * 60 * 24 * 30,\r\n    y: 60 * 60 * 24 * 365,\r\n  };\r\n\r\n  const date = new Date();\r\n  date.setTime(date.getTime() + digit * units.unit);\r\n  return date;\r\n}\r\n\r\nfunction setCookie(\r\n  key,\r\n  value,\r\n  digit,\r\n  unit,\r\n  path = \"/\",\r\n  domain = \"vitexopt.ru\",\r\n  Secure = false,\r\n  HttpOnly = false,\r\n) {\r\n  const expires = getCookieExpires(digit, unit);\r\n  const secure = Secure ? \"Secure\" : \"\";\r\n  const httpOnly = HttpOnly ? \"HttpOnly\" : \"\";\r\n  document.cookie = `${key}=${value}; expires=${expires} path=${path}; SameSite=lax;${secure};${httpOnly}`;\r\n}\r\n\r\nfunction slider() {\r\n  let slider = $(\".slider\").first();\r\n  if (!slider) return false;\r\n  slider.onclick = function ({ target }) {\r\n    if (target.classList.contains(\"slide\")) {\r\n      let wrap = slider.querySelector(\".wrap\");\r\n      if (!wrap.style.height) {\r\n        wrap.style.height = wrap.scrollHeight + \"px\";\r\n      } else {\r\n        wrap.style.height = \"\";\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nexport function fragmentDate(date, order, y, m, d, glue) {\r\n  let o = new Date(date);\r\n\r\n  let monthNames = [\r\n    \"January\",\r\n    \"February\",\r\n    \"March\",\r\n    \"April\",\r\n    \"May\",\r\n    \"June\",\r\n    \"July\",\r\n    \"August\",\r\n    \"September\",\r\n    \"October\",\r\n    \"November\",\r\n    \"December\",\r\n  ];\r\n  let dayNames = [\r\n    \"Понедельник\",\r\n    \"Вторник\",\r\n    \"Среда\",\r\n    \"Четверг\",\r\n    \"Пятница\",\r\n    \"Суббота\",\r\n    \"Воскресенье\",\r\n  ];\r\n\r\n  let yyyy = o.getFullYear();\r\n  let mm = o.getMonth() + 1;\r\n  let dd = o.getDate();\r\n  let M = monthNames[o.getMonth()];\r\n  let D = o.getDay();\r\n  let wd = dayNames[o.getDay()];\r\n\r\n  if (dd < 10) dd = \"0\" + dd;\r\n  if (mm < 10) mm = \"0\" + mm;\r\n  return { yyyy, mm, dd, M, D, wd };\r\n}\r\n\r\nfunction addTooltip(args) {\r\n  [].forEach.call(args, (el) => {\r\n    el.onmouseenter = function () {\r\n      let tip = document.createElement(\"div\");\r\n      tip.classList.add(\"tip\");\r\n      tip.innerText = args.message;\r\n\r\n      el.append(tip);\r\n      let remove = () => tip.remove();\r\n      tip.addEventListener(\"mousemove\", remove.bind(tip), true);\r\n    }.bind(args);\r\n\r\n    el.onmouseleave = () => {\r\n      let tip = el.querySelector(\".tip\");\r\n      tip.remove();\r\n    };\r\n  });\r\n}\r\n\r\nexport {\r\n  passwordValidator,\r\n  // phoneValidator,\r\n  emailValidator,\r\n  sanitizeInput,\r\n  createElement,\r\n  time,\r\n  scrollToTop,\r\n  cookieRemove,\r\n  setCookie,\r\n  getCookie,\r\n  createEl,\r\n  getPhpSession,\r\n  slider,\r\n  cachePage,\r\n  trimStr,\r\n  addTooltip,\r\n  popup,\r\n  debounce,\r\n  IsJson,\r\n  post,\r\n  validate,\r\n  $,\r\n  formatDate,\r\n};\r\n"],"names":["scrollToTop","c","formatter","objAndFiles2FormData","obj","files","formData","i","subKeyStr","value","subKeyStrTrans","debounce","fn","time","timeout","functionCall","IsJson","str","replaceNbsps","re","replaceNs","replaceTs","replaceBackSpace","trimStr","cachePage","className","html","$","damn_ampersand","validate","error","this","email","text","password","popup","txt","close","popup__item","hideDelay","removeDelay","target","tagName","el","getPhpSession","sanitizeInput","input","map","reg","match","passwordValidator","pass","errors","replacePattern","emailValidator","mail","min","minLengthAfterAt","dot","domainLength","createEl","div","createElement","tag","field","key","entry","post","url","data","headers","init","setPostBodyHeaders","res","sendPost","err","handleResponse","showMessage","isEmptyObj","body","resolve","reject","msg","ElementCollection","event","cbOrSelector","cb","e","elem","attrName","attrVal","attr","val","arr","s","item","selector","getCookie","getCookieExpires","digit","unit","units","date","setCookie","path","domain","Secure","HttpOnly","expires","secure","httpOnly","fragmentDate","order","y","m","d","glue","o","monthNames","dayNames","yyyy","mm","dd","M","D","wd"],"mappings":"qkCAEMA,EAAc,IAAM,CACxB,MAAMC,EAAI,SAAS,gBAAgB,WAAa,SAAS,KAAK,UAC1DA,EAAI,IACN,OAAO,sBAAsBD,CAAW,EACxC,OAAO,SAAS,EAAGC,EAAIA,EAAI,CAAC,EAEhC,EACaC,EAAY,IAAI,KAAK,aAAa,KAAM,CACnD,MAAO,WACP,SAAU,MACV,sBAAuB,CACzB,CAAC,EAEM,SAASC,EAAqBC,EAAKC,EAAOC,EAAW,IAAI,SAAY,CAE1E,GADA,KAAK,SAAWA,EACZ,OAAOD,GAAU,WACnB,QAASE,EAAI,EAAGA,EAAIF,EAAM,OAAQE,IAChC,KAAK,SAAS,OAAOA,EAAGF,EAAME,CAAC,CAAC,OAGlC,KAAK,SAAS,OAAO,OAAQF,CAAK,EAEpC,YAAK,eAAiB,SAAUD,EAAKI,EAAY,GAAI,CACnD,QAASD,KAAKH,EAAK,CACjB,IAAIK,EAAQL,EAAIG,CAAC,EACbG,EAAiBF,EAAYA,EAAY,IAAMD,EAAI,IAAMA,EAEzD,OAAOE,GAAU,UAAY,OAAOA,GAAU,SAChD,KAAK,SAAS,OAAOC,EAAgBD,CAAK,EACjC,OAAOA,GAAU,UAC1B,KAAK,eAAeA,EAAOC,CAAc,CAE5C,CACL,EACE,KAAK,eAAeN,CAAG,EAChB,KAAK,QACd,CAEK,MAACO,EAAW,CAACC,EAAIC,EAAO,MAAQ,CACnC,IAAIC,EACJ,OAAO,UAAY,CACjB,MAAMC,EAAe,IAAMH,EAAG,MAAM,KAAM,SAAS,EACnD,aAAaE,CAAO,EACpBA,EAAU,WAAWC,EAAcF,CAAI,CAC3C,CACA,EAEA,SAASG,EAAOC,EAAK,CACnB,GAAI,CACF,KAAK,MAAMA,CAAG,CACf,MAAW,CACV,MAAO,EACR,CACD,MAAO,EACT,CAEA,SAASC,EAAaD,EAAK,CACzB,IAAIE,EAAK,IAAI,OAAO,UAAW,GAAG,EAClC,OAAOF,EAAI,QAAQE,EAAI,GAAG,CAC5B,CAEA,SAASC,EAAUH,EAAK,CACtB,IAAIE,EAAK,IAAI,OAAO,OAAQ,GAAG,EAC/B,OAAOF,EAAI,QAAQE,EAAI,EAAE,CAC3B,CAEA,SAASE,EAAUJ,EAAK,CACtB,IAAIE,EAAK,IAAI,OAAO,OAAQ,GAAG,EAC/B,OAAOF,EAAI,QAAQE,EAAI,EAAE,CAC3B,CAOA,SAASG,EAAiBL,EAAK,CAC7B,OAAOA,EAAI,MACb,CAYA,SAASM,EAAQN,EAAK,CACpB,OAAAA,EAAMC,EAAaD,CAAG,EACtBA,EAAMG,EAAUH,CAAG,EACnBA,EAAMI,EAAUJ,CAAG,EAEnBA,EAAMK,EAAiBL,CAAG,EACnBA,CACT,CAaA,SAASO,EAAUC,EAAW,CAC5B,MAAMC,EAAOC,EAAEF,CAAS,EAAE,MAAK,EAAG,UAElC,OAAOG,EAAeL,EAAQG,CAAI,CAAC,CACrC,CAEK,MAACG,EAAW,CACf,KAAM,IAAM,CACV,MAAMC,EAAQC,SAAK,mBACRA,SAAK,MAAM,MAAM,KAAK,GAE/BD,EAAM,UAAY,eAClBA,EAAM,MAAM,QAAU,KAElBA,EAAM,MAAM,UAAY,MAC1BA,EAAM,MAAM,QAAU,IAG3B,EACD,MAAQE,GAAU,CAChB,GAAI,CAACA,EAAO,MAAO,GACnB,MAAMC,EAAO,4BAIb,MAFE,wJACa,KAAK,OAAOD,CAAK,EAAE,YAAW,CAAE,EAExC,GADUC,CAElB,EACD,SAAWC,GAAa,CACtB,GAAI,CAACA,EAAU,MAAO,GACtB,IAAID,EACF,iFAEF,MADU,iCAAiC,KAAKC,CAAQ,EAEjD,GADUD,CAElB,CACH,EAEME,EAAQ,CACZ,KAAM,SAAUC,EAAK,CACnB,MAAMD,EAAQ,KAAK,GAAG,MAAO,OAAO,EAE9BE,EAAQ,KAAK,GAAG,MAAO,cAAc,EAC3CA,EAAM,UAAY,IAElB,MAAMC,EAAc,KAAK,GAAG,MAAO,aAAa,EAChDA,EAAY,UAAYF,EACxBE,EAAY,OAAOD,CAAK,EAExBF,EAAM,OAAOG,CAAW,EACxBH,EAAM,iBAAiB,QAAS,KAAK,MAAO,EAAI,EAChD,SAAS,KAAK,OAAOA,CAAK,EAE1B,MAAMI,EAAY,IAClB,WAAW,IAAM,CACfD,EAAY,UAAU,OAAO,aAAa,EAC1CA,EAAY,UAAU,IAAI,YAAY,CACvC,EAAEC,CAAS,EACZ,MAAMC,EAAcD,EAAY,IAChC,WAAW,IAAM,CACfD,EAAY,OAAM,CACnB,EAAEE,CAAW,CACf,EAED,MAAO,SAAU,CAAE,OAAAC,GAAU,CACvBA,EAAO,UAAU,SAAS,cAAc,GAC1C,KAAK,QAAQ,QAAQ,EAAE,OAAM,CAEhC,EACD,GAAI,SAAUC,EAASjB,EAAW,CAChC,MAAMkB,EAAK,SAAS,cAAcD,CAAO,EACzC,OAAAC,EAAG,UAAU,IAAIlB,CAAS,EACnBkB,CACR,CACH,EAEA,SAASC,GAAgB,CACvB,OACE,SAAS,cAAc,yBAAyB,EAAE,aAAa,SAAS,GACxE,IAEJ,CAEA,SAASC,EAAcC,EAAO,CAC5B,GAAI,CAACA,EAAO,OACZ,MAAMC,EAAM,CACV,IAAK,QACL,IAAK,OACL,IAAK,OAEL,IAAK,QACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,KAAM,MAEN,IAAK,MACL,IAAK,MACL,OAAQ,QACR,OAAQ,MACZ,EACQC,EAAM,kBAIZ,OAHkBF,EAAM,QAAQE,EAAMC,GAC7BF,EAAIE,CAAK,CACjB,EACgB,MACnB,CAEA,SAASC,EAAkBC,EAAM,CAE/B,MAAMC,EAAS,CAAA,EAETC,EAAiB,0BACvB,OAAKF,EAAK,QACRC,EAAO,KAAK,4BAA4B,EAEtCD,EAAK,QAAQE,EAAgB,EAAE,EAAE,QACnCD,EAAO,KAAK,6BAA6B,EAEvCD,EAAK,OAAS,GAChBC,EAAO,KAAK,yBAAyB,EAEhCA,CACT,CAEA,SAASE,EAAeC,EAAM,CAC5B,MAAMvB,EAAQ,UAAUuB,CAAI,EAEtBC,EAAM,EAENC,EAAmB,kBACnBC,EAAM,IACNC,EAAe,4BACfP,EAAS,CAAA,EAETC,EAAiB,uBACvB,OAAKrB,EAAM,QACToB,EAAO,KAAK,4BAA4B,EAEtCpB,EAAM,QAAQqB,EAAgB,EAAE,EAAE,QACpCD,EAAO,KAAK,6BAA6B,EAEvCpB,EAAM,OAASwB,GACjBJ,EAAO,KAAK,yBAAyB,EAElC,OAAO,KAAKpB,CAAK,GACpBoB,EAAO,KAAK,aAAa,EAEtBpB,EAAM,MAAMyB,CAAgB,GAC/BL,EAAO,KAAK,yBAAyB,EAElCpB,EAAM,SAAS0B,CAAG,GACrBN,EAAO,KAAK,WAAW,EAEpBpB,EAAM,MAAM2B,CAAY,GAC3BP,EAAO,KAAK,6BAA6B,EAEpCA,CACT,CAEA,SAASQ,EAASlB,EAASjB,EAAY,GAAIQ,EAAO,GAAI,CACpD,IAAI4B,EAAM,SAAS,cAAcnB,CAAO,EACxC,OAAIjB,GACFoC,EAAI,UAAU,IAAIpC,CAAS,EAE7BoC,EAAI,UAAY5B,GAAc,GACvB4B,CACT,CAEA,MAAMC,CAAc,CAClB,aAAc,CACZ,KAAK,WAAa,EACnB,CAED,IAAIC,EAAK,CACP,YAAK,IAAMA,EACJ,IACR,CAED,UAAUtC,EAAW,CACnB,YAAK,WAAaA,EACX,IACR,CAED,MAAMuC,EAAO,CACX,YAAK,OAASA,EACP,IACR,CAED,KAAK5B,EAAK,CACR,YAAK,MAAQA,EACN,IACR,CAED,KAAKV,EAAM,CACT,YAAK,MAAQA,EACN,IACR,CAED,KAAKuC,EAAKxD,EAAO,CACf,YAAK,WAAW,KAAK,CAACwD,EAAKxD,CAAK,CAAC,EAC1B,IACR,CAED,KAAM,CACJ,IAAIkC,EAAK,SAAS,cAAc,KAAK,GAAG,EACxC,OAAI,KAAK,QACPA,EAAG,UAAY,KAAK,OAElB,KAAK,QACPA,EAAG,UAAY,KAAK,OAElB,KAAK,YACPA,EAAG,UAAU,IAAI,KAAK,UAAU,EAE9B,KAAK,SACPA,EAAG,QAAQ,MAAQ,KAAK,QAE1B,KAAK,WAAW,QAAQ,CAACuB,EAAO3D,IAAM,CACpCoC,EAAG,aAAauB,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,CACxC,CAAK,EACMvB,CACR,CACH,CAiBA,eAAewB,EAAKC,EAAKC,EAAO,CAAA,EAAIC,EAAU,CAAA,EAAI,CAChD,MAAMC,EAAOC,EAAmBJ,EAAKC,EAAMC,CAAO,EAC5CG,EAAM,MAAMC,EAASN,EAAKG,CAAI,EAAE,MAAOI,GAAQ,CACnD,QAAQ,IAAIA,CAAG,CACnB,CAAG,EACD,OAAAC,EAAeH,CAAG,EAClBI,EAAYJ,CAAG,EACRA,CACT,CAEA,SAASK,EAAW1E,EAAK,CACvB,MAAO,CAAC,OAAO,KAAKA,CAAG,EAAE,MAC3B,CAEA,SAASoE,EAAmBJ,EAAKW,EAAMT,EAAS,CAK9C,GAJAS,EAAK,WAAanC,IAClB0B,EAAUQ,EAAWR,CAAO,EACxB,CAAE,mBAAoB,gBAAkB,EACxCA,EACA,EAAES,aAAgB,UACpBT,EAAQ,cAAc,EAAI,wCAE1B,OAAO,CACL,OAAQ,OACR,KAAMS,CACZ,EAEE,MAAO,CACL,OAAQ,OACR,QAAAT,EACA,KAAM,UAAY,KAAK,UAAUS,EAAM,KAAM,CAAC,CAClD,CACA,CAEA,SAASnD,EAAeX,EAAK,CAC3B,OAAOA,EAAI,WAAW,IAAK,KAAK,CAClC,CAEA,SAASyD,EAASN,EAAKG,EAAM,CAC3B,OAAO,IAAI,QAAQ,MAAOS,EAASC,IAAW,CAChC,MAAM,MAAMb,EAAKG,CAAI,EAC9B,KAAK,MAAOE,GAAQ,CACnB,GAAIA,EAAI,SAAW,IAAK,CACtB,MAAMJ,EAAO,MAAMI,EAAI,OACvBO,EAAQX,CAAI,CACb,CACT,CAAO,EACA,MAAOM,GAAQ,CACd,QAAQ,IAAI,cAAgBA,EAAI,OAAO,EACvCM,EAAON,EAAI,OAAO,CAC1B,CAAO,CACP,CAAG,CACH,CAEA,SAASE,EAAYJ,EAAK,CACxB,MAAMS,EAAMvD,EAAE,UAAU,EAAE,CAAC,EAC3B,GAAI,CAACuD,EAAK,MAAO,GACbT,EAAI,IACNS,EAAI,UAAYT,EAAI,IACXA,EAAI,QACbS,EAAI,UAAYT,EAAI,QACXA,EAAI,QACbS,EAAI,UAAYT,EAAI,OAEtB9C,EAAEuD,CAAG,EAAE,YAAY,SAAS,EAC5BvD,EAAEuD,CAAG,EAAE,YAAY,OAAO,CAC5B,CAEA,SAASN,EAAeH,EAAK,CAC3B,GAAI,CACF,OAAIA,GAAK,KAAK,MACZtC,EAAM,KAAKsC,GAAK,KAAK,KAAK,EAE1BI,EAAYJ,CAAG,EAEVA,CACR,MAAW,CACV,eAAQ,IACN,uEACN,EACQzD,EAAOyD,EAAI,QAAQ,EACrB,QAAQ,IAAI,KAAK,MAAMA,EAAI,QAAQ,CAAC,EAEpC,QAAQ,IAAIA,EAAI,QAAQ,EAEnB,EACR,CACH,CA2BA,MAAMU,UAA0B,KAAM,CACpC,GAAGC,EAAOC,EAAcC,EAAI,CACtB,OAAOD,GAAiB,WAC1B,KAAK,QAASE,GAAMA,EAAE,iBAAiBH,EAAOC,CAAY,CAAC,EAE/C,KAAK,CAAC,EAAE,iBAAiBA,CAAY,EAC3C,QAASG,GAAS,CACtBA,EAAK,iBAAiBJ,EAAOE,CAAE,CACvC,CAAO,CAEJ,CAED,MAAQ,UAAY,CAClB,OAAO,KAAK,CAAC,EAAE,aAAa,OAAO,CACvC,EACE,MAAQ,UAAY,CAClB,OAAO,KAAK,CAAC,CACjB,EACE,KAAO,SAAUG,EAAUC,EAAS,CAClC,OAAIA,GACF,KAAK,CAAC,EAAE,aAAaD,EAAUC,CAAO,EAEjC,KAAK,CAAC,EAAE,aAAaD,CAAQ,CACxC,EACE,mBAAqB,UAAY,CAC/B,GAAI,KAAK,OAAQ,OAAO,KAAK,CAAC,EAAE,gBAAgB,CAAC,EAAE,KACvD,EACE,QAAU,UAAY,CACpB,GAAI,KAAK,OAAQ,OAAO,KAAK,CAAC,EAAE,OACpC,EACE,MAAQ,UAAY,CAClB,OAAO,KAAK,MAChB,EACE,KAAO,UAAY,CACjB,GAAI,KAAK,OAAQ,OAAO,KAAK,CAAC,EAAE,SACpC,EACE,QAAU,UAAY,CACpB,GAAI,KAAK,OAAQ,OAAO,KAAK,CAAC,EAAE,OACpC,EACE,aAAe,SAAUE,EAAMC,EAAK,CAClC,IAAIC,EAAM,CAAA,EACV,YAAK,QAASC,GAAM,CACdA,EAAE,MAAMH,CAAI,IAAMC,GACpBC,EAAI,KAAKC,CAAC,CAElB,CAAK,EACMD,CACX,EACE,SAAW,SAAUpE,EAAW,CAC9B,KAAK,QAASqE,GAAM,CAClBA,EAAE,UAAU,IAAIrE,CAAS,CAC/B,CAAK,CACL,EACE,YAAc,SAAUA,EAAW,CACjC,KAAK,QAASqE,GAAM,CAClBA,EAAE,UAAU,OAAOrE,CAAS,CAClC,CAAK,CACL,EACE,SAAW,SAAUA,EAAW,CAC9B,GAAI,KAAK,UAAU,SAASA,CAAS,EAAG,MAAO,EACnD,EACE,OAAS,SAAUkB,EAAI,CACrB,KAAK,CAAC,EAAE,YAAYA,CAAE,CAC1B,EACE,KAAO,SAAUoD,EAAM,CACrB,OAAI,OAAOA,GAAS,SACX,KAAK,CAAC,EAAE,cAAcA,CAAI,EAElB,KAAK,CAAC,EAAE,OAAQpD,GACtBA,IAAOoD,CACf,EACe,CAAC,CAEvB,EACE,QAAU,SAAUA,EAAM,CACxB,GAAI,OAAOA,GAAS,SAClB,OAAO,KAAK,CAAC,EAAE,iBAAiBA,CAAI,CAE1C,EAEE,IAAM,SAAUJ,EAAMC,EAAK,CACzB,GAAI,CAACA,EACH,OAAO,KAAK,CAAC,EAAE,MAAMD,CAAI,EAE3B,KAAK,QAAS,GAAM,CAClB,EAAE,MAAMA,CAAI,EAAIC,CACtB,CAAK,CACL,EAEE,MAAMN,EAAI,CACQ,KAAK,KAAMC,GAClBA,EAAE,YAAc,MAAQA,EAAE,YAAc,SAChD,EAECD,IAEA,SAAS,iBAAiB,mBAAoBA,CAAE,CAEnD,CACH,CAEA,SAAS3D,EAAEqE,EAAU,CACnB,OAAI,OAAOA,GAAa,UAAYA,aAAoB,OAC/C,IAAIb,EAAkB,GAAG,SAAS,iBAAiBa,CAAQ,CAAC,EAE5D,IAAIb,EAAkBa,CAAQ,CAEzC,CAEA,SAASC,EAAUhC,EAAK,CACtB,IAAIhB,EAAQ,SAAS,OAAO,MAAM,SAAWgB,EAAM,UAAU,EAC7D,OAAOhB,EAAQA,EAAM,CAAC,EAAI,EAC5B,CAYA,SAASiD,EAAiBC,EAAOC,EAAM,CACrC,MAAMC,EAAQ,CAQd,EAEMC,EAAO,IAAI,KACjB,OAAAA,EAAK,QAAQA,EAAK,QAAS,EAAGH,EAAQE,EAAM,IAAI,EACzCC,CACT,CAEA,SAASC,EACPtC,EACAxD,EACA0F,EACAC,EACAI,EAAO,IACPC,EAAS,cACTC,EAAS,GACTC,EAAW,GACX,CACA,MAAMC,EAAUV,EAAiBC,CAAW,EACtCU,EAASH,EAAS,SAAW,GAC7BI,EAAWH,EAAW,WAAa,GACzC,SAAS,OAAS,GAAG1C,CAAG,IAAIxD,CAAK,aAAamG,CAAO,SAASJ,CAAI,kBAAkBK,CAAM,IAAIC,CAAQ,EACxG,CAiBO,SAASC,EAAaT,EAAMU,EAAOC,EAAGC,EAAGC,EAAGC,EAAM,CACvD,IAAIC,EAAI,IAAI,KAAKf,CAAI,EAEjBgB,EAAa,CACf,UACA,WACA,QACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,UACJ,EACMC,EAAW,CACb,cACA,UACA,QACA,UACA,UACA,UACA,aACJ,EAEMC,EAAOH,EAAE,cACTI,EAAKJ,EAAE,SAAQ,EAAK,EACpBK,EAAKL,EAAE,UACPM,EAAIL,EAAWD,EAAE,SAAU,CAAA,EAC3BO,EAAIP,EAAE,SACNQ,EAAKN,EAASF,EAAE,OAAQ,CAAA,EAE5B,OAAIK,EAAK,KAAIA,EAAK,IAAMA,GACpBD,EAAK,KAAIA,EAAK,IAAMA,GACjB,CAAE,KAAAD,EAAM,GAAAC,EAAI,GAAAC,EAAI,EAAAC,EAAG,EAAAC,EAAG,GAAAC,EAC/B"}
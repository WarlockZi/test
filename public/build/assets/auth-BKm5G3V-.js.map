{"version":3,"mappings":";oFAGA,IAAIA,EAAQC,EAAE,eAAe,EAAE,MAAO,EAClCD,GACFA,EAAM,iBAAiB,QAAS,UAAY,CAC1CE,EAAaF,CAAK,CACtB,CAAG,EAGH,eAAeE,EAAaF,EAAO,CACjC,IAAIG,EAASH,EAAM,WACfI,EAASH,EAAEE,CAAM,EAAE,KAAK,iBAAiB,EAE7C,GAAIH,EAAM,MAAM,OAAS,EAAG,CACtBI,IAAQA,EAAO,UAAY,IAC/B,MACJ,CAEE,IAAIC,EAAO,MAAM,MAAM,aAAeL,EAAM,KAAK,EACjDK,EAAO,MAAMA,EAAK,KAAKA,CAAI,EAEvBD,EAAO,WAAW,SAAW,IAC/BA,EAAO,UAAY,IAGrBC,EAAK,IAAKC,GAAM,CACd,IAAIC,EAAI,SAAS,cAAc,GAAG,EAClCA,EAAE,KAAOD,EAAE,MACXC,EAAE,UAAY,kBAAkBD,EAAE,WAAW,UAAUA,EAAE,IAAI,KAAOA,EAAE,KACtEF,EAAO,YAAYG,CAAC,CACxB,CAAG,EAEDN,EAAE,MAAM,EAAE,GAAG,QAAS,SAAUK,EAAG,CAC7BF,GAAUE,EAAE,SAAWF,IACzBA,EAAO,UAAY,GAEzB,CAAG,CACH,CCnCe,SAASI,GAAe,CAChBP,EAAE,mBAAmB,GAExCA,EAAE,mBAAmB,EAAE,GAAG,QAASQ,CAAY,EAGjD,SAASA,EAAa,CAAE,OAAAC,GAAU,CAChC,MAAMV,EAAQU,EAAO,WAAW,cAAc,OAAO,EACjDV,EAAM,aAAa,MAAM,IAAM,WACjCA,EAAM,aAAa,OAAQ,MAAM,EAEjCA,EAAM,aAAa,OAAQ,UAAU,EAEvCU,EAAO,UAAU,OAAO,MAAM,CAClC,CACA,CChBAT,EAAE,iBAAiB,EAAE,GAAG,QAAS,eAAgBK,EAAG,CAClD,IAAID,EAAO,CACT,aAAcJ,EAAE,uBAAuB,EAAE,CAAC,EAAE,MAC5C,aAAcA,EAAE,uBAAuB,EAAE,CAAC,EAAE,KAC7C,EACGU,EAAMV,EAAE,UAAU,EAAE,CAAC,EAErBW,EAAM,MAAMC,EAAK,uBAAwBR,CAAI,EAE7CO,EAAI,SACND,EAAI,UAAYC,EAAI,QACpBX,EAAEU,CAAG,EAAE,SAAS,SAAS,EACzBV,EAAEU,CAAG,EAAE,YAAY,OAAO,GACjBC,EAAI,QACbD,EAAI,UAAYC,EAAI,MACpBX,EAAEU,CAAG,EAAE,SAAS,OAAO,EACvBV,EAAEU,CAAG,EAAE,YAAY,SAAS,EAEhC,CAAC,EClBD,IAAIG,EAAeb,EAAE,wBAAwB,EAAE,CAAC,EAC5Ca,GAEFb,EAAEa,CAAY,EAAE,GAAG,QAASC,CAAQ,EAGtC,SAASA,EAAS,CAAE,OAAAL,GAAU,CAE5BM,EAAsB,MAAO,QAAQ,CACvC,CA0BA,eAAeA,EAAsBC,EAAOC,EAAU,CACpD,MAAMP,EAAMV,EAAE,UAAU,EAAE,CAAC,EACrBI,EAAO,CACX,MAAAY,EACA,SAAAC,EACA,QAASjB,EAAE,kBAAkB,EAAE,CAAC,EAAE,MAClC,KAAMA,EAAE,eAAe,EAAE,CAAC,EAAE,KAC7B,EAGKW,EAAM,MAAMC,EAAK,iBAAkBR,CAAI,EAEzCO,GAAK,KAAK,UAAY,WACxBD,EAAI,UAAU,OAAO,OAAO,EAC5BA,EAAI,UAAU,IAAI,SAAS,EAC3BA,EAAI,UACF,6IAIOC,EAAI,MAAQ,eACrBD,EAAI,UACF,kJACFA,EAAI,UAAU,OAAO,SAAS,EAC9BA,EAAI,UAAU,IAAI,OAAO,IAEzBA,EAAI,UAAYC,EAAI,IACpBD,EAAI,UAAU,OAAO,SAAS,EAC9BA,EAAI,UAAU,IAAI,OAAO,EAE7B,CC/DAV,EAAE,OAAO,EAAE,GAAG,QAAS,eAAgBK,EAAG,CACxCA,EAAE,eAAgB,EAElB,IAAID,EAAO,CACT,KAAMJ,EAAE,iBAAiB,EAAE,CAAC,EAAE,MAC9B,QAASA,EAAE,oBAAoB,EAAE,CAAC,EAAE,MACpC,WAAYA,EAAE,uBAAuB,EAAE,CAAC,EAAE,MAC1C,UAAWA,EAAE,sBAAsB,EAAE,CAAC,EAAE,MACxC,MAAOA,EAAE,kBAAkB,EAAE,CAAC,EAAE,MAChC,IAAK,MACN,EAES,MAAMY,EAAK,aAAcR,CAAI,CACzC,CAAC,ECCD,MAAMc,EAAYlB,EAAE,qBAAqB,EAAE,MAAK,EAChD,GAAIkB,EAAW,CACb,KAAM,CAAE,QAASC,GAAU,MAAKC,EAAA,wBAAAD,CAAA,OAAC,QAAO,qBAAY,iBAAAA,CAAA,2BACpD,IAAIA,CACN,CAEA,GAAInB,EAAE,QAAQ,EAAE,QAAS,CACvB,KAAM,CAAE,QAASqB,GAAU,MAAMD,EAAA,wBAAAC,CAAA,eAAO,qBAA8B,iDACtE,IAAIA,CACN,CAGAd,EAAc","names":["input","$","autocomplete","search","result","data","e","a","showPassword","viewPassword","target","msg","res","post","registerForm","sendData","parseRegisterResponse","email","password","loginForm","Login","__vitePreload","Modal"],"ignoreList":[],"sources":["../../src/components/header/Autocomplete/autocomplete.js","../../src/components/showPassword/showPassword.js","../../src/Auth/changepassword.js","../../src/Auth/register.js","../../src/Auth/edit.js","../../src/Auth/auth.js"],"sourcesContent":["import \"./autocomplete.scss\";\nimport { $ } from \"../../../common\";\n\nlet input = $(\".search input\").first();\nif (input) {\n  input.addEventListener(\"input\", function () {\n    autocomplete(input);\n  });\n}\n\nasync function autocomplete(input) {\n  let search = input.parentNode;\n  let result = $(search).find(\".search__result\");\n\n  if (input.value.length < 1) {\n    if (result) result.innerHTML = \"\";\n    return;\n  }\n\n  let data = await fetch(\"/search?q=\" + input.value);\n  data = await data.json(data);\n\n  if (result.childNodes.length !== 0) {\n    result.innerHTML = \"\";\n  }\n\n  data.map((e) => {\n    let a = document.createElement(\"a\");\n    a.href = e.alias;\n    a.innerHTML = `<img src='/pic/${e.preview_pic}' alt='${e.name}'>` + e.name;\n    result.appendChild(a);\n  });\n\n  $(\"body\").on(\"click\", function (e) {\n    if (result && e.target !== result) {\n      result.innerHTML = \"\";\n    }\n  });\n}\n","import \"./showPassword.scss\";\nimport { $ } from \"../../common\";\n\nexport default function showPassword() {\n  const showPassword = $(\".password-control\");\n  if (showPassword) {\n    $(\".password-control\").on(\"click\", viewPassword);\n  }\n\n  function viewPassword({ target }) {\n    const input = target.parentNode.querySelector(\"input\");\n    if (input.getAttribute(\"type\") === \"password\") {\n      input.setAttribute(\"type\", \"text\");\n    } else {\n      input.setAttribute(\"type\", \"password\");\n    }\n    target.classList.toggle(\"view\");\n  }\n}\n","import { $, post } from \"../common\";\n\n$(\".changepassword\").on(\"click\", async function (e) {\n  let data = {\n    old_password: $('[name=\"old_password\"]')[0].value,\n    new_password: $('[name=\"new_password\"]')[0].value,\n  };\n  let msg = $(\".message\")[0];\n\n  let res = await post(\"/auth/changepassword\", data);\n\n  if (res.success) {\n    msg.innerText = res.success;\n    $(msg).addClass(\"success\");\n    $(msg).removeClass(\"error\");\n  } else if (res.error) {\n    msg.innerText = res.error;\n    $(msg).addClass(\"error\");\n    $(msg).removeClass(\"success\");\n  }\n});\n","import { $, post, trimStr, validate } from \"../common\";\n\nlet registerForm = $(\"[data-auth='register']\")[0];\nif (registerForm) {\n  // debugger\n  $(registerForm).on(\"click\", sendData);\n}\n\nfunction sendData({ target }) {\n  // if (isValid(email, password))\n  parseRegisterResponse(email, password);\n}\n\n// function renderError(error) {\n//   let msg = $('.message')[0];\n//   msg.innerText = '';\n//   msg.innerText = msg.innerText + error;\n//   $(msg).removeClass('success');\n//   $(msg).addClass('error');\n// }\n\n// function isValid() {\n//    const email = trimStr($('input[type = email]')[0].value);\n//    const password = trimStr($('input[name = password]')[0].value);\n//    const error = validate.email(email);\n//    if (error) {\n//       renderError(error);\n//       return false\n//    }\n//    const error = validate.password(password);\n//    if (error) {\n//       renderError(error);\n//       return false\n//    }\n//    return true\n// }\n\nasync function parseRegisterResponse(email, password) {\n  const msg = $(\".message\")[0];\n  const data = {\n    email,\n    password,\n    surName: $(\"[name='surName']\")[0].value,\n    name: $(\"[name='name']\")[0].value,\n  };\n  // debugger\n\n  const res = await post(\"/auth/register\", data);\n\n  if (res?.arr?.success === \"confirm\") {\n    msg.classList.remove(\"error\");\n    msg.classList.add(\"success\");\n    msg.innerHTML =\n      \"-Пользователь зарегистрирован.<br>\" +\n      \"-Для подтверждения регистрации зайдите на почту, \" +\n      \"<bold>email</bold>.<br> \" +\n      \"-Перейдите по ссылке в письме.\";\n  } else if (res.msg === \"mail exists\") {\n    msg.innerHTML =\n      \"Эта почта уже зарегистрирована. Войдите в систему по кнопке внизу Войти или, если не помните пароль, восстановите пароль по кнопке Забыл пароль\";\n    msg.classList.remove(\"success\");\n    msg.classList.add(\"error\");\n  } else {\n    msg.innerHTML = res.msg;\n    msg.classList.remove(\"success\");\n    msg.classList.add(\"error\");\n  }\n}\n","import \"./edit.scss\";\nimport { post, $ } from \"../common\";\nimport getSex from \"./getSex\";\n\n$(\"#save\").on(\"click\", async function (e) {\n  e.preventDefault();\n\n  let data = {\n    name: $('[name = \"name\"]')[0].value,\n    surName: $('[name = \"surName\"]')[0].value,\n    middleName: $('[name = \"middleName\"]')[0].value,\n    birthDate: $('[name = \"birthDate\"]')[0].value,\n    phone: $('[name = \"phone\"]')[0].value,\n    sex: getSex(),\n  };\n\n  let res = await post(\"/user/edit\", data);\n});\n","import \"../components/header/Autocomplete/autocomplete\";\r\n\r\nimport \"../components/showPassword/showPassword\";\r\n\r\nimport \"../components/cookie/cookie\";\r\n\r\nimport \"./changepassword\";\r\n\r\nimport \"./register\";\r\nimport \"./profile\";\r\nimport \"./return_pass\";\r\nimport \"./edit\";\r\nimport \"./auth.scss\";\r\nimport \"./../../../pic/icons/arrowUp.svg\";\r\n// import './login'\r\nimport showPassword from \"../components/showPassword/showPassword\";\r\nimport { $ } from \"../common\";\r\n\r\nconst loginForm = $(\"[data-auth='login']\").first();\r\nif (loginForm) {\r\n  const { default: Login } = await import(\"./login.js\");\r\n  new Login();\r\n}\r\n\r\nif ($(\".modal\").first()) {\r\n  const { default: Modal } = await import(\"../components/Modal/modal.js\");\r\n  new Modal();\r\n}\r\nconst f = 1;\r\n\r\nshowPassword();\r\n"],"file":"assets/auth-BKm5G3V-.js"}
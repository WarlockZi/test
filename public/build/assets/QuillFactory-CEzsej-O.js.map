{"version":3,"file":"QuillFactory-CEzsej-O.js","sources":["../../src/components/quill/QuillConstans.js","../../src/components/quill/AdminQuill.js","../../src/components/quill/AdminProductDescrioption.js","../../src/components/quill/AdminProductSeoArticle.js","../../src/components/quill/QuillFactory.js"],"sourcesContent":["export const QuillConst = {\r\n   'ADMIN_PRODUCT_DESCRIPTION': 'description',\r\n   'ADMIN_PRODUCT_SEO_ARTICLE': 'seo-article',\r\n   'ADMIN_CATEGORY_SEO_ARTICLE': 'seo-article',\r\n}","import {$, debounce, IsJson, post} from \"@src/common.js\";\r\nimport DTO from \"@src/Admin/DTO.js\";\r\nimport Quill from \"quill\";\r\nimport {ael} from \"@src/constants.js\";\r\n\r\nexport default class AdminQuill {\r\n   constructor(selector, options) {\r\n      const el = $(selector).first()\r\n      if (!el) return\r\n      this.el = el\r\n      this.autosave = options?.autosave || true\r\n      this.editable = options?.editable || true\r\n      this.theme = options?.theme || 'snow'\r\n      this.placeholder = options?.theme || 'Начните писать...'\r\n\r\n      this.options = this.setOptions()\r\n      this.quill = new Quill(selector, this.options);\r\n      this.dto = this.setDTO()\r\n      this.setContent()\r\n      if (this.autosave) this.el[ael]('keyup', debounce(this.save.bind(this)))\r\n   }\r\n\r\n   async save() {\r\n      this.dto.relation.fields[this.el?.dataset?.field]\r\n         = JSON.stringify(this.quill.getContents())\r\n      const res = await post(`/adminsc/${this.dto.model}/updateOrCreate`, this.dto)\r\n   }\r\n\r\n   setContent() {\r\n      if (IsJson(this.el.innerText)) {\r\n         this.quill.setContents(JSON.parse(this.el.innerText + '\\n'))\r\n      } else {\r\n         this.quill.setText(this.el.innerText)\r\n      }\r\n   }\r\n\r\n\r\n   setDTO() {\r\n      const parent = this.el.closest(`[data-model]`)\r\n      const model = parent?.dataset.model\r\n      const id = parent.dataset.id\r\n      const dto = new DTO(id)\r\n      dto.model = model\r\n      dto.relation.name = this.el.dataset.relation\r\n      return dto\r\n   }\r\n\r\n   setToolbar() {\r\n      return [\r\n         [{ 'header': [2, 3, 4, false] }],\r\n         ['bold', 'italic', 'underline', 'strike'],        // toggled buttons\r\n         // ['blockquote'],\r\n\r\n         // [{ 'header': 1 }, { 'header': 2 }],               // custom button values\r\n         [{'list': 'ordered'}, {'list': 'bullet'}],\r\n         [{'script': 'sub'}, {'script': 'super'}],      // superscript/subscript\r\n         [{'indent': '-1'}, {'indent': '+1'}],          // outdent/indent\r\n         // [{ 'direction': 'rtl' }],                         // text direction\r\n\r\n         [{'size': ['small', false, 'large', 'huge']}],  // custom dropdown\r\n\r\n         [{'color': []}, {'background': []}],          // dropdown with defaults from theme\r\n         [{'font': []}],\r\n         [{'align': []}],\r\n\r\n         ['clean']                                         // remove formatting button\r\n      ];\r\n   }\r\n\r\n   setOptions() {\r\n      return {\r\n         theme: this.theme,\r\n         // theme: 'bubble',\r\n         placeholder: this.placeholder,\r\n         modules: {\r\n            toolbar: this.setToolbar()\r\n         },\r\n      };\r\n   }\r\n}","import {createElement} from \"@src/common.js\";\r\nimport AdminQuill from \"@src/components/quill/AdminQuill.js\";\r\n\r\nexport default class AdminProductDescrioption extends AdminQuill{\r\n   constructor(selector, options) {\r\n      super(selector, options);\r\n   }\r\n}","import {createElement} from \"@src/common.js\";\r\nimport AdminQuill from \"@src/components/quill/AdminQuill.js\";\r\n\r\nexport default class AdminProductSeoArticle extends AdminQuill{\r\n   constructor(selector, options) {\r\n      super(selector, options);\r\n   }\r\n}","import Quill from \"quill\";\r\nimport {QuillConst} from \"@src/components/quill/QuillConstans.js\";\r\nimport AdminProductDescrioption from \"@src/components/quill/AdminProductDescrioption.js\";\r\nimport AdminProductSeoArticle from \"@src/components/quill/AdminProductSeoArticle.js\";\r\n\r\nexport default class QuillFactory {\r\n   constructor() {\r\n      this.quill = new Quill();\r\n      debugger\r\n   }\r\n\r\n   static create(selector, type, options) {\r\n      if (type === QuillConst.ADMIN_PRODUCT_DESCRIPTION) {\r\n         return new AdminProductDescrioption(selector, options)\r\n      } else if (type === QuillConst.ADMIN_PRODUCT_SEO_ARTICLE) {\r\n      }\r\n      return new AdminProductSeoArticle(selector, options)\r\n   }\r\n\r\n}"],"names":["QuillConst","AdminQuill","selector","options","el","$","Quill","ael","debounce","post","IsJson","parent","model","id","dto","DTO","AdminProductDescrioption","AdminProductSeoArticle","QuillFactory","type"],"mappings":"sHAAY,MAACA,EAAa,CACvB,0BAA6B,cAC7B,0BAA6B,cAC7B,2BAA8B,aACjC,ECCe,MAAMC,CAAW,CAC7B,YAAYC,EAAUC,EAAS,CAC5B,MAAMC,EAAKC,EAAEH,CAAQ,EAAE,MAAO,EACzBE,IACL,KAAK,GAAKA,EACV,KAAK,SAAWD,GAAS,UAAY,GACrC,KAAK,SAAWA,GAAS,UAAY,GACrC,KAAK,MAAQA,GAAS,OAAS,OAC/B,KAAK,YAAcA,GAAS,OAAS,oBAErC,KAAK,QAAU,KAAK,WAAY,EAChC,KAAK,MAAQ,IAAIG,EAAMJ,EAAU,KAAK,OAAO,EAC7C,KAAK,IAAM,KAAK,OAAQ,EACxB,KAAK,WAAY,EACb,KAAK,UAAU,KAAK,GAAGK,CAAG,EAAE,QAASC,EAAS,KAAK,KAAK,KAAK,IAAI,CAAC,CAAC,EACzE,CAED,MAAM,MAAO,CACV,KAAK,IAAI,SAAS,OAAO,KAAK,IAAI,SAAS,KAAK,EAC3C,KAAK,UAAU,KAAK,MAAM,YAAW,CAAE,EAChC,MAAMC,EAAK,YAAY,KAAK,IAAI,KAAK,kBAAmB,KAAK,GAAG,CAC9E,CAED,YAAa,CACNC,EAAO,KAAK,GAAG,SAAS,EACzB,KAAK,MAAM,YAAY,KAAK,MAAM,KAAK,GAAG,UAAY;AAAA,CAAI,CAAC,EAE3D,KAAK,MAAM,QAAQ,KAAK,GAAG,SAAS,CAEzC,CAGD,QAAS,CACN,MAAMC,EAAS,KAAK,GAAG,QAAQ,cAAc,EACvCC,EAAQD,GAAQ,QAAQ,MACxBE,EAAKF,EAAO,QAAQ,GACpBG,EAAM,IAAIC,EAAIF,CAAE,EACtB,OAAAC,EAAI,MAAQF,EACZE,EAAI,SAAS,KAAO,KAAK,GAAG,QAAQ,SAC7BA,CACT,CAED,YAAa,CACV,MAAO,CACJ,CAAC,CAAE,OAAU,CAAC,EAAG,EAAG,EAAG,EAAK,EAAG,EAC/B,CAAC,OAAQ,SAAU,YAAa,QAAQ,EAIxC,CAAC,CAAC,KAAQ,SAAS,EAAG,CAAC,KAAQ,QAAQ,CAAC,EACxC,CAAC,CAAC,OAAU,KAAK,EAAG,CAAC,OAAU,OAAO,CAAC,EACvC,CAAC,CAAC,OAAU,IAAI,EAAG,CAAC,OAAU,IAAI,CAAC,EAGnC,CAAC,CAAC,KAAQ,CAAC,QAAS,GAAO,QAAS,MAAM,CAAC,CAAC,EAE5C,CAAC,CAAC,MAAS,CAAE,CAAA,EAAG,CAAC,WAAc,CAAE,CAAA,CAAC,EAClC,CAAC,CAAC,KAAQ,CAAA,CAAE,CAAC,EACb,CAAC,CAAC,MAAS,CAAA,CAAE,CAAC,EAEd,CAAC,OAAO,CACjB,CACI,CAED,YAAa,CACV,MAAO,CACJ,MAAO,KAAK,MAEZ,YAAa,KAAK,YAClB,QAAS,CACN,QAAS,KAAK,WAAY,CAC5B,CACV,CACI,CACJ,CC5Ee,MAAME,UAAiCf,CAAU,CAC7D,YAAYC,EAAUC,EAAS,CAC5B,MAAMD,EAAUC,CAAO,CACzB,CACJ,CCJe,MAAMc,UAA+BhB,CAAU,CAC3D,YAAYC,EAAUC,EAAS,CAC5B,MAAMD,EAAUC,CAAO,CACzB,CACJ,CCFe,MAAMe,CAAa,CAC/B,aAAc,CACX,KAAK,MAAQ,IAAIZ,EACjB,QACF,CAED,OAAO,OAAOJ,EAAUiB,EAAMhB,EAAS,CACpC,OAAIgB,IAASnB,EAAW,0BACd,IAAIgB,EAAyBd,EAAUC,CAAO,EAGjD,IAAIc,EAAuBf,EAAUC,CAAO,CACrD,CAEJ"}
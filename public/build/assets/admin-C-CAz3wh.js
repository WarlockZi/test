const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/modal-Ci7aEDC-.js","assets/search-CM1Tatb6.js","assets/search-CgsZ06fR.css","assets/modal-CAAhepBS.css","assets/index-DXGsHsLo.js","assets/index-DmAyeOWP.css","assets/chartjs-CHNF-Ruf.js","assets/chartjs-Dap-k2NF.css","assets/card_panel-8E-qgJzq.js","assets/card_panel-UF59AJVy.css","assets/Product-D0X4RKnu.js","assets/QuillFactory-B-m-JjYU.js","assets/MyQuill-DcSx1sFp.js","assets/MyQuill-GClCj9AP.css","assets/table-kSt3ZMz0.js","assets/table-D-iEpebi.css","assets/Promotion-ndKZUbLZ.js","assets/Promotion--2U3bzhI.css","assets/Product-C9KtOBb-.css","assets/catalog-item-DpwvnKwI.js","assets/catalog-item-CC5C5WoE.css","assets/order-B3nUEWX2.js","assets/order-D46ScIno.css","assets/Category-C7TpwMDz.js"])))=>i.map(i=>d[i]);
import{$ as s,p as m,q as o,a as u,b as d,S as h,c as p,_ as l}from"./search-CM1Tatb6.js";import{M as w}from"./MyQuill-DcSx1sFp.js";import"./table-kSt3ZMz0.js";import g from"./Promotion-ndKZUbLZ.js";class _{constructor(t){this.$sync=t,this.$log_content=s(t).find("#log_content"),this.$sync.onclick=this.handleClick.bind(this)}async handleClick({target:t}){if(t.classList.contains("button")){let e=await m(`/adminsc/sync/${t.id}`);e?.arr?.success&&(this.$log_content.innerText=e.arr?.content)}}}let f=s(".sync").first();f&&new _(f);class b{constructor(t){t&&(this.wrap=t,this.panel=t[o](".list-filter"),this.url="/adminsc/report/filter",this.wrap[u]("click",this.handleClick.bind(this)),this.setSelects())}setSelects(){const t=this.wrap[d]("[select-new]");[].map.call(t,e=>{new h(e)})}async handleClick(t){if(t.target.classList.contains("filter-button")){t.preventDefault();const c=this.getClickedFilters(),i=await m(this.url,c);this.renderDataFromResponce(i)}}getClickedFilters(){const t={},e=this.wrap[d]("[select-new]");[].map.call(e,i=>(t[i.getAttribute("name")]=i.dataset.value,null));const c=this.panel[d]("[type='checkbox']:checked");return[].forEach.call(c,i=>{t[i.name]="on"}),t}renderDataFromResponce(t){s(".used-filters").first().innerHTML=t?.arr?.filterString,s(".list-filter").first().innerHTML=t?.arr?.filterPanel;const e=s("[custom-table]").first();e.innerHTML=t?.arr?.productsTable,this.setSelects()}}function v(){const r=s(".admin-panel").first();document.addEventListener("scroll",t.bind(r),{passive:!0});function t(){r&&(window.scrollY>40?r.classList.add("fixed"):r.classList.remove("fixed"))}}class L{constructor(){const t=window.location.pathname;/\/adminsc\/settings/.test(t)||/\/adminsc\/right\/list/.test(t)||/\/adminsc\/post\/list/.test(t)||/\/adminsc\/todo\/list/.test(t)?s("[settings]").addClass("current"):/\/auth\/profile/.test(t)||(/\/adminsc\/crm/.test(t)?s("[crm]").addClass("current"):/\/adminsc\/planning/.test(t)?s("[plan]").addClass("current"):/\/adminsc\/category/.test(t)||/\/adminsc\/product/.test(t)?s("[catalog]").addClass("current"):/\/test/.test(t)||/\/opentest/.test(t)||/\/adminsc\/opentest/.test(t)||/\/adminsc\/test/.test(t)?s("[test]").addClass("current"):s("[href='/adminsc']").addClass("current"))}}class y{constructor(){this.setTabs(),this.setPages(),this.setQuils()}setTabs(){const t=s(".tab");t[0].classList.add("active"),[].forEach.call(t,e=>{e.addEventListener("click",c=>{const i=c.target.dataset.id;s(".page.active").first().classList.remove("active"),s(`.page[data-id='${i}']`).first().classList.add("active"),s(".tab.active").first().classList.remove("active"),c.target.classList.add("active")})})}setPages(){s(".page")[0].classList.add("active")}setQuils(){const t=s(".quill[data-id]");t[0].classList.add("active"),[].forEach.call(t,e=>{this.id=e.dataset.id,new w(`.quill[data-id='${this.id}']`,!0,!0,!0,"snow",this.dto.bind(this))})}dto(t){return{id:this.id,model:"pages",fields:{content:t}}}}class E{constructor(){if(!s('[data-model="user"]')[0])return!1;this.setSelects()}setSelects(){const t=s("[select-new]:has(option)");[].forEach.call(t,e=>{new h(e)})}setRights(){let t=rights().replace(/,$/,""),e=s("[data-field='rights']")[0];e.dataset.value=t}rights(){let t=s(".right:checked"),e="";return[].map.call(t,c=>{let i=c.previousElementSibling.innerText+",";e+=i},e),e}confirm(){const t=s("#conf option");for(let e of t)if(e.selected)return e.value;return"0"}}class C{constructor(t){if(!t)return!1;this.sidebar=t,this.sidebar[u]("click",this.handleClick.bind(this)),this.burger=document[o](".burger"),this.burger[u]("click",this.handleClick.bind(this))}handleClick({target:t}){t===this.burger?this.sidebar.classList.toggle("show"):this.openUl(t)}openUl(t){const e=t.closest("li");e&&(e?.classList?.contains("open")||this.closeUls(),e.classList.toggle("open"),this.rotateArrow(e))}closeUls(){const t=s(this.sidebar).find(".open");t&&(t[o](".rotate").classList.toggle("rotate"),t.classList.toggle("open"))}rotateArrow(t){const e=s(t).find(".arrow");e&&e.classList.toggle("rotate")}}s(document).ready(async function(){if(document.body.classList.remove("preload"),!window.location.pathname.includes("adminsc"))return!1;if(new p(!0),new L,v(),new C(s(".sidebar").first()),new g,document[o](".modal")){const{default:a}=await l(async()=>{const{default:n}=await import("./modal-Ci7aEDC-.js");return{default:n}},__vite__mapDeps([0,1,2,3]));new a}if(window.location.pathname==="/adminsc/pages"?new y:window.location.pathname==="/adminsc/user"||(window.location.pathname.startsWith("/adminsc/user/edit")?new E:window.location.href.includes("/test")?await l(async()=>{const{default:a}=await import("./index-DXGsHsLo.js").then(n=>n.i);return{default:a}},__vite__mapDeps([4,1,2,5])):window.location.pathname==="/adminsc"?await l(async()=>{const{default:a}=await import("./chartjs-CHNF-Ruf.js");return{default:a}},__vite__mapDeps([6,7])):window.location.pathname==="/adminsc/report/filter"&&new b(s(".products-filter").first())),document[o](".card-panel")){const{default:a}=await l(async()=>{const{default:n}=await import("./card_panel-8E-qgJzq.js");return{default:n}},__vite__mapDeps([8,1,2,9]));new a}if(document[o](".item-wrap[data-model='product']")){const{default:a}=await l(async()=>{const{default:n}=await import("./Product-D0X4RKnu.js");return{default:n}},__vite__mapDeps([10,1,2,11,12,13,14,15,16,17,18]));new a}const c=document[o](".item-wrap");if(c){const{default:a}=await l(async()=>{const{default:n}=await import("./catalog-item-DpwvnKwI.js");return{default:n}},__vite__mapDeps([19,1,2,20]));new a(c)}if(document[o](".order-edit")){const{default:a}=await l(async()=>{const{default:n}=await import("./order-B3nUEWX2.js");return{default:n}},__vite__mapDeps([21,1,2,22]));new a}const i=document[o](".item-wrap[data-model='category']");if(i){const{default:a}=await l(async()=>{const{default:n}=await import("./Category-C7TpwMDz.js");return{default:n}},__vite__mapDeps([23,1,2,11,12,13,14,15,16,17]));new a(i)}});
//# sourceMappingURL=admin-C-CAz3wh.js.map

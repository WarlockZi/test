import"./admin-DGH2t94a.js";import{q as l,a as n,k as a,p as c,$ as i}from"./search-DV8UsOr4.js";import{S as o}from"./SelectNew-ChaMbA7q.js";import"./MyQuill-gEQ7mOZi.js";class u{constructor(t){t&&(this.wrap=t,this.panel=t[l](".list-filter"),this.url="/adminsc/report/filter",this.wrap[n]("click",this.handleClick.bind(this)),this.setSelects())}setSelects(){const t=this.wrap[a]("[select-new]");[].map.call(t,e=>{new o(e)})}async handleClick(t){if(t.target.classList.contains("filter-button")){t.preventDefault();const r=this.getClickedFilters(),s=await c(this.url,r);this.renderDataFromResponce(s)}}getClickedFilters(){const t={},e=this.wrap[a]("[select-new]");[].map.call(e,s=>(t[s.getAttribute("name")]=s.dataset.value,null));const r=this.panel[a]("[type='checkbox']:checked");return[].forEach.call(r,s=>{t[s.name]="on"}),t}renderDataFromResponce(t){i(".used-filters").first().innerHTML=t?.arr?.filterString,i(".list-filter").first().innerHTML=t?.arr?.filterPanel;const e=i("[custom-table]").first();e.innerHTML=t?.arr?.productsTable,this.setSelects()}}export{u as default};
//# sourceMappingURL=ProductFilter-8nV8kJXn.js.map

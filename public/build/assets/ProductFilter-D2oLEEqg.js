import"./admin-DGpQ9U9A.js";import{q as l,a as n,b as a}from"./constants-D_Ps4z6O.js";import{p as c,$ as i}from"./common-BmjU9IJD.js";import{S as o}from"./SelectNew-C9ebDqkZ.js";import"./search-DgdaroTd.js";import"./MyQuill-uS4Hutk7.js";class b{constructor(t){t&&(this.wrap=t,this.panel=t[l](".list-filter"),this.url="/adminsc/report/filter",this.wrap[n]("click",this.handleClick.bind(this)),this.setSelects())}setSelects(){const t=this.wrap[a]("[select-new]");[].map.call(t,e=>{new o(e)})}async handleClick(t){if(t.target.classList.contains("filter-button")){t.preventDefault();const s=this.getClickedFilters(),r=await c(this.url,s);this.renderDataFromResponce(r)}}getClickedFilters(){const t={},e=this.wrap[a]("[select-new]");[].map.call(e,r=>(t[r.getAttribute("name")]=r.dataset.value,null));const s=this.panel[a]("[type='checkbox']:checked");return[].forEach.call(s,r=>{t[r.name]="on"}),t}renderDataFromResponce(t){i(".used-filters").first().innerHTML=t?.arr?.filterString,i(".list-filter").first().innerHTML=t?.arr?.filterPanel;const e=i("[custom-table]").first();e.innerHTML=t?.arr?.productsTable,this.setSelects()}}export{b as default};
//# sourceMappingURL=ProductFilter-D2oLEEqg.js.map

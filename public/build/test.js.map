{"version":3,"sources":["webpack://vitalik/./public/jscss/Test/do.js","webpack://vitalik/./public/jscss/Test/edit/edit.js","webpack://vitalik/./public/jscss/common.js","webpack://vitalik/./public/jscss/components/header/autocomplete.js","webpack://vitalik/./public/jscss/components/test-pagination/test-pagination.js","webpack://vitalik/webpack/bootstrap","webpack://vitalik/webpack/runtime/define property getters","webpack://vitalik/webpack/runtime/hasOwnProperty shorthand","webpack://vitalik/webpack/runtime/make namespace object"],"names":["window","onload","$","on","document","querySelector","remove","testId","this","data","ajax","url","PROJ","type","action","success","res","after","add","fadeIn","text","tId","cache","confirm","hide","parent","error","alert","fadeOut","testName","val","parentTest","isTest","sort","enable","prop","test_name","obj","JSON","parse","divTestName","pagination","question","answer","html","show","append","menuItem","edit","attr","lastQuest","querySelectorAll","length","testid","questQnt","removeClass","addClass","before","block","check","qid","siblings","last","setTimeout","prevActive","find","id","question_id","test_id","controller","location","pathname","indexOf","qpic","trim","qtext","apic","right_answer","aid","atext","slideUp","each","index","elem","holder","getElementsByClassName","tests","filereader","FileReader","dnd","createElement","formdata","FormData","progress","XMLHttpRequest","support","acceptedTypes","fileupload","getElementById","message","split","key","className","collItem","key1","i","ondragover","ondragleave","ondrop","e","preventDefault","readfiles","dataTransfer","files","onchange","previewfile","file","imageContainer","reader","event","getElementsByTagName","image","Image","getAttribute","src","target","result","width","appendChild","readAsDataURL","innerHTML","name","size","console","log","formData","pref","fid","xhr","open","send","onreadystatechange","readyState","status","statusText","link","uniq","array","Array","from","Set","async","get","p","search","match","RegExp","post","Promise","resolve","reject","req","setRequestHeader","stringify","onerror","Error","response","autocomplete","Input","fetch","json","fetchJson","forEach","alias","preview_pic","addEventListener","value","style","display","classList","contains","clicked_btn","closest","active_btn","link_to_hide","dataset","link_to_show","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","d","definition","o","Object","defineProperty","enumerable","prototype","hasOwnProperty","call","r","Symbol","toStringTag"],"mappings":"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","file":"test.js","sourcesContent":["import {post} from '../common'\r\nimport './do.scss'\r\n\r\nwindow.onload = function () {\r\n// // Показать первый вопрос\r\n//     document.querySelector('.test-data .question:first-child').style.display = \"flex\"\r\n//     document.querySelector('.pagination:first-child').classList.add('nav-active')\r\n// alert(document.querySelector('.pagination:first-child').tagName)\r\n// // Пагинация\r\n//     document.querySelector('.pagination').addEventListener('click', function (e) {\r\n//         let clicked_btn = e.target.closest('[data-pagination]')\r\n//         if (clicked_btn.classList.contains('.p-no-active')) return false\r\n//\r\n//         let active_btn = this.querySelector('.nav-active')\r\n//         let link_to_hide = active_btn.getAttribute('[data-pagination]')\r\n//         active_btn.classList.remove('nav-active')\r\n//         active_btn.classList.add('p-no-active')\r\n//         clicked_btn.classList.remove('p-no-active')\r\n//         clicked_btn.classList.add('nav-active')\r\n//\r\n//         // show the card\r\n//         let link_to_show = clicked_btn.dataset['pagination']\r\n//         document.querySelector(link_to_show).style.display = 'flex'\r\n//         // hide the card\r\n//         document.querySelector(link_to_hide).style.display = 'none'\r\n//\r\n//\r\n//     })\r\n};\r\n\r\n/////////////////////////////////////////////////////////////////////////////\r\n///////////  RESULTS  TEST  Закончить тест/////////////////////////////\r\n/////////////////////////////////////////////////////////////////////////////\r\n\r\n\r\n//     $('.content').on('click', '#btnn', function () {\r\n//         event.preventDefault();\r\n//         var button = document.querySelector('#btnn');\r\n//         if (button.text == \"ПРОЙТИ ТЕСТ ЗАНОВО\") {\r\n//             location.reload();\r\n//             return;\r\n//         }\r\n//\r\n//         var data = {action: 'getCorrectAnswers'};\r\n// // получим от сервера правильные ответы\r\n//         post(PROJ + '/test/do', data)\r\n//             .then(function (corrAnswers) {\r\n// // раскарасим кнопочки в соответсвии с прав ответами,\r\n// // посчитаем ошибки, отправим их и кеш страницы на сервер\r\n//                 return colorView(JSON.parse(corrAnswers))\r\n//             })\r\n//             .then(function (errorCnt) {\r\n//                 debugger;\r\n//                 return sendMailResults(errorCnt)\r\n//             })\r\n//             .then(function (data) {\r\n// //         debugger;\r\n//                 return post(PROJ + '/test/do', data)\r\n//             })\r\n//         ;\r\n//\r\n//         function colorView(correctAnswers) {\r\n//             return new Promise(function (resolve, reject) {\r\n//                     var green = 'rgb(0, 255, 41) 0px 2px 11px 3px', //'#e5f7d0',\r\n//                         bxShdRed = 'rgb(255, 41, 41) 0px 2px 11px 3px';\r\n// //            var loader = document.querySelector('.overlay-loader').remove();\r\n//                     var q = document.querySelectorAll('.question'),\r\n//                         errorsCnt = q.length;\r\n//\r\n//                     for (var j = 0; j < q.length; j++) {\r\n//                         var a = q[j].querySelectorAll('.a');\r\n//                         for (var i = 0; i < a.length; i++) {\r\n//                             var answer = a[i];\r\n//                             var input = answer.getElementsByTagName('input')[0],\r\n//                                 inpVal = input.value;\r\n// //                  if (correctAnswers.indexOf(inpVal) != -1) { // это правильный ответ\r\n//                             label = answer.getElementsByTagName('label')[0], // Чтобы прикрепить зеленый значек к этому элементу\r\n//                                 questId = +input.getAttribute('name').replace(\"question-\", \"\"); // id question\r\n//                             paginItem = document.querySelectorAll('a[href=\"#question-' + questId + '\"]')[0];\r\n//\r\n//                             if (input.checked == true && correctAnswers.indexOf(inpVal) != -1) {// checkbox нажат. а в correct answer нету. в correct_answers есть, его всегда подсвечиваем зеленым\r\n//                                 label.classList.add('done'); //green check зеленый значек\r\n//                             } else if (input.checked == true && correctAnswers.indexOf(inpVal) == -1) {// checkbox нажат,и есть в correct answer. в correct_answers нет, кнопка не нажата\r\n//                                 paginItem.autocomplete.boxShadow = bxShdRed; // red\r\n//                             } else if (input.checked == false && correctAnswers.indexOf(inpVal) != -1) {// кнопка не нажата, в correct_answers есть\r\n//                                 paginItem.autocomplete.boxShadow = bxShdRed; // red\r\n//                                 label.classList.add('done');// green check зеленый значек\r\n//                             } else if (input.checked == false && correctAnswers.indexOf(inpVal) == -1) {// кнопка не нажата, в correct_answers нет\r\n// //                        paginItem.style.boxShadow = bxShdRed;\r\n//                             }\r\n//                             ;\r\n//                         }\r\n//                         ;\r\n//                     }\r\n//                     ;\r\n// // Правильные ответы зеленым\r\n//                     var a = document.querySelectorAll(\"a[href^='#question-']\");\r\n//                     for (var i = 0; i < a.length; i++) {\r\n//                         if (a[i].autocomplete.boxShadow != bxShdRed) {// Если не красный, раскрасим в зеленый\r\n//                             a[i].autocomplete.boxShadow = \"rgb(159, 212, 104) 0px 2px 11px 3px\";\r\n//                             errorsCnt--;\r\n//                         }\r\n//                     }\r\n//\r\n//                     var btn = document.getElementById(\"btnn\");\r\n//                     btn.href = location.href, //\"?test=\"+testId;\r\n//                         btn.text = \"ПРОЙТИ ТЕСТ ЗАНОВО\";\r\n//                     resolve(errorsCnt);\r\n//                 }\r\n//             );\r\n//         }\r\n//\r\n//\r\n//         function sendMailResults(errorCnt) {\r\n//             return new Promise(function (resolve, reject) {\r\n//                 var doctypeHtml = \"<!DOCTYPE \" + document.doctype.name + '>',\r\n//                     pageCache = doctypeHtml + document.documentElement.outerHTML,\r\n//                     url = PROJ + '/test/do';\r\n//                 var testId = +button.dataset.id;\r\n//                 var test_name = $('.test-name').text();\r\n//                 var name = $('.user-button span').text();\r\n//                 var userAnswers = {};\r\n//                 $('.question').each(function (index, element) {\r\n//                     var id = $(this).data('id'),\r\n//                         textarea = element.lastElementChild.innerText;\r\n//                     userAnswers[id] = textarea; // Сохраним в массиве под уникальным номером\r\n//                 });\r\n//\r\n//                 var data = {\r\n//                     questionCnt: $('.question').length,\r\n//                     errorCnt: errorCnt,\r\n//                     pageCache: pageCache,\r\n//                     action: 'send_mail',\r\n// //               userAnswers: userAnswers,\r\n//                     testId: testId,\r\n//                     name: name,\r\n//                     test_name: test_name\r\n//                 };\r\n//\r\n//                 resolve(data);\r\n//             });\r\n//         }\r\n//     });\r\n\r\n","import './edit.scss'\r\n\r\nwindow.onload = function () {\r\n\r\n   var controller = 'test';\r\n\r\n//////////////////////////////// Параметры теста///////////////\r\n\r\n// Открываем панель параметров теста\r\n   $('body').on('click', \".add-test, .test-params\", function () {\r\n// Если форма открытa, закроем ее \r\n//debugger;\r\n      if (document.querySelector('.testParamsBorder')) {\r\n         $('.testParamsBorder').remove();\r\n      }\r\n      var testId = $(this).data('testid');\r\n//      var data = {testId: testId, action: 'testParams'};\r\n//      data = 'param=' + JSON.stringify(data);\r\n      \r\n      $.ajax({\r\n         url: PROJ + '/test/edit',\r\n         type: 'POST',\r\n         data: ({testId: testId, action: 'testParams'}),\r\n         success: function (res) {\r\n            $('.wrap').after(res);\r\n            $('.overlay').add('.testParamsBorder').fadeIn();\r\n         }\r\n      });\r\n   });\r\n// Удалить тест\r\n   $('body').on('click', '#TestParamsDEL', function () {\r\n\r\n      var testId = +$('.testId').text();\r\n      $.ajax({\r\n         url: PROJ + '/test/edit',\r\n         type: 'POST',\r\n         data: ({tId: testId, action: 'tDel'}),\r\n         cache: false,\r\n         success: function (res) {\r\n            if (confirm('Удалить тест?')) {\r\n               $('.testParamsBorder').hide(100, function () {\r\n                  $(this).remove();\r\n                  $('body .test-params[data-testid =' + testId + ']').parent().add('.overlay').remove();\r\n               });\r\n// Удаляем из второго меню тест\r\n               $('[href=\"/test/edit/' + testId + '\"]').parent().remove();\r\n            }\r\n\r\n         },\r\n         error: function () {\r\n            alert('Тест не удалился.');\r\n         }\r\n      });\r\n   });\r\n// Кнопка \"Отмена\"  - не сохранять параметры теста\r\n   $('body').on('click', '#saveTestParmsCansel, .overlay', function () {\r\n      $('.testParamsBorder').add('.overlay').fadeOut(400, function () {\r\n         $(this).remove();\r\n      });\r\n   });\r\n// Кнопака \"ОК\"  - сохранить параметры теста/Добавить новый тест  \r\n   $('body').on('click', '#saveTestParamsOK', function () {\r\n      var testId = +$('.testId').text(),\r\n      testName = $('#saveTestName').val(),\r\n      parentTest = +$('#selectParenTest option:selected').val(),\r\n      isTest = +$('#isTest option:selected').val(),\r\n      sort = +$('.sort input').val(),\r\n      enable = $('input[data-test-id]').prop(\"checked\") ? 1 : 0;\r\n      if ($('input[data-test-id]').prop(\"checked\"))\r\n         var enable = 1;\r\n      else\r\n         var enable = 0;\r\n      \r\n      if (testId) { // Редактируем существующий тест\r\n         $.ajax({\r\n            url: PROJ + '/test/edit',\r\n            type: 'POST',\r\n            data: ({action: 'tUpd', testId: testId, testName: testName, parentTest: parentTest, isTest: isTest, sort: sort, enable: enable}),\r\n            cache: false,\r\n            success: function (res) {\r\n               if (res) {\r\n\r\n                  $('a[href=\"' + PROJ + '/edit/' + testId + '\"]').text(res);\r\n                  $('.test-name').text('Тест - ' + res);\r\n                  $('.testParamsBorder').add('.overlay').hide(100, function () {\r\n                     $(this).remove()\r\n                  });\r\n               }\r\n               else {\r\n                  window.alert('Заполнитe название');\r\n               }\r\n            },\r\n            error: function () {\r\n               window.alert(\"Обновление не прошло\");\r\n            }\r\n         });\r\n      }\r\n      else { // Создаем новый тест\r\n         if (testName) {\r\n            $.ajax({\r\n               url: PROJ + '/test/edit',\r\n               type: 'POST',\r\n               data: ({action: 'tAdd', testId: testId, test_name: testName, parentTest: parentTest, isTest: isTest, sort: sort, enable: enable}),\r\n               success: function (res) {\r\n                  var obj = JSON.parse(res);\r\n// Если открыт тест и есть в DOM назв теста удаляем вопросы\r\n                  if (!$('.test-name')) {\r\n                     $('div.block').remove();\r\n                     $('.test-name').after(obj.answer);\r\n                     $('.test-name').after(obj.question);\r\n// Находимся в папке а не в тесте, поэтому контент добавляем\r\n                  }\r\n                  else {\r\n// Всатвляем все после контента\r\n                     var divTestName = '<p class=\"test-name\" name = \"test_id\" value = \"1\">Тест - ' + obj.testName + '</p>' + obj.pagination + obj.question + obj.answer;\r\n                     $('.content').html(divTestName);\r\n                     $('.content .block').show();\r\n                  }\r\n// Закрываем рамку создания нового теста\r\n                  $('.testParamsBorder').add('.overlay').fadeOut(150);\r\n// Добавим пункты меню \r\n                  $('.menu').append(obj.menuItem);\r\n               },\r\n               error: function () {\r\n               }\r\n            });\r\n         }\r\n         else {\r\n            window.alert('Укажите название теста');\r\n            return;\r\n         }\r\n      }\r\n   });\r\n///////////////////\r\n\r\n// Изменить сортировку Вопросов\r\n   $('body').on('change', \"input[data-q-sort]\", function () {\r\n      var qid = +$(this).data('q-sort');\r\n      edit(\"save_q\", null, qid);\r\n   });\r\n// Textarea Вопрос\r\n   $('body').on('change', \"textarea[data-question-id]\", function () {\r\n      var qid = +$(this).data('question-id');\r\n      edit(\"save_q\", null, qid); //,null,null,sort);\r\n   });\r\n// Textarea Ответ\r\n   $('body').on('change', \"textarea[data-answer-id]\", function () {\r\n      var id = $(this).data('answer-id');\r\n      edit(\"save_a\", id);\r\n   });\r\n// Включить-выключить Checkbox Right Answer\r\n   $('body').on('change', \"input[data-answer]\", function () {\r\n      var id = $(this).data('answer');\r\n      edit(\"save_a\", id);\r\n   });\r\n\r\n\r\n/////////////////////// Добавить В О П Р О С  ///////////\r\n   $('.add-question').on('click', function () {\r\n\r\n      var testId = +$('.test-name').attr('value');\r\n      debugger;\r\n      var questionCollection = document.querySelectorAll(\".pagination>[class$='active']\");\r\n      var lastQuest = questionCollection.length - 1;\r\n      $.ajax({\r\n         url: `${PROJ}/${controller}/edit`,\r\n         type: 'POST',\r\n         data: ({action: 'qAdd', testid: testId, questQnt: lastQuest + 1}),\r\n         cache: false,\r\n         success: function (res) {\r\n            var obj = JSON.parse(res);\r\n\r\n// Пагинация \r\n            $('.pagination>.nav-active').removeClass('nav-active').addClass('p-no-active'); // убираем активность\r\n//                alert(obj.menuItem);// Порядковый номер вопроса\r\n            $('.pagination>a:last').before(obj.pagination); // Добавить следующий пункт пагинации \r\n            $('.pagination>a:last').text('+'); // Порядковый номер вопроса \r\n\r\n            $('.block:visible').hide(); // Спрячем видимый блок\r\n            $('.block:last').after(obj.block); // Выведем новый блок\r\n            $('.content .block:last').show(200); //Покажем новый блок \r\n            check(0);\r\n         },\r\n         error: function () {\r\n            alert('Произошел сбой.');\r\n         }\r\n\r\n      });\r\n   });\r\n/////////////////////// Добавить О Т В Е Т   ///////////\r\n   $('body').on('click', '.add-answer', function () {\r\n      var qid = +$(this).data('id');\r\n      $.ajax({\r\n         url: PROJ + '/test/edit',\r\n         type: 'POST',\r\n         data: ({action: 'aAdd', qid: qid}),\r\n         cache: false,\r\n         success: function (res) {\r\n            var holder = document.querySelectorAll('.holder');\r\n            var a = $('.e-block-q[id = \"' + qid + 'q\"]').siblings(\".e-block-a\").last().after(res);\r\n            setTimeout(function () {\r\n               check(1);\r\n            }, 150);\r\n         },\r\n         error: function () {\r\n         }\r\n      });\r\n      check();\r\n   });\r\n\r\n\r\n\r\n//////////// Edit pagination\r\n   var prevActive = $('.pagination').find('.nav-active').attr('href');\r\n   $('.content').add('.test-data').find(prevActive).show();\r\n// Пагинация\r\n   $('.pagination').on('click', '.p-no-active', function () {\r\n      if ($(this).attr('class') == 'nav-active')\r\n         return false;\r\n// Сылка нажатой клавищи \r\n      var link = $(this).attr('href');\r\n// Ссылка активной клавиши\r\n      var prevActive = $('.pagination>a.nav-active ').attr('href');\r\n// C активной клавищи снимаем активность\r\n      $('.pagination>.nav-active').removeClass('nav-active').addClass('p-no-active');\r\n// Нажатой клавище добавляем активность\r\n      $(this).removeClass('p-no-active').addClass('nav-active');\r\n      if ($(prevActive) !== 0) {// Если удалили вопрос из DOM, его длинна будет 0 и следующий вопрос не покажется\r\n         $(prevActive).fadeOut(100, function () {\r\n            if (link != '#') {\r\n               $(link).fadeIn(100);\r\n            }\r\n         });\r\n      }\r\n      else {\r\n         $(link).fadeIn(100);\r\n      }\r\n      return false;\r\n   });\r\n\r\n/////////// Удалить картинку\r\n   $('body').on('click', \".pic-del\", function () {\r\n      var a = $(this).data('a');\r\n      var q = $(this).data('q');\r\n      edit(\"del_a_q_pic\", a, q);\r\n   });\r\n////////////////////////////////// Функции ///////////////////////\r\n\r\n\r\n   function edit(action, id, question_id, test_id, test_name) {\r\n      var controller = 'test';\r\n      debugger;\r\n      if (window.location.pathname.indexOf('freetest') + 1) {\r\n         controller = 'freetest';\r\n      }\r\n      if (action == \"save_q\") {\r\n         var qpic = $('#imq[data-id = \"' + question_id + '\"]').attr('src'),\r\n         text = $.trim($('textarea[name = \"' + question_id + 'q\"]').val()),\r\n         sort = $.trim($('input[data-q-sort = ' + question_id + ']').val()),\r\n         k_word = $.trim($('input[data-q-sort = ' + question_id + ']').val()),\r\n         data = ({action: 'qUpd', data, qid: question_id, qpic: qpic, qtext: text, sort: sort}),\r\n         url = `${PROJ}/${controller}/edit`;\r\n         $.ajax({\r\n            url: url,\r\n            type: 'POST',\r\n            data: data,\r\n         });\r\n      }\r\n      else if (action == \"save_a\") {\r\n         var apic = $('#ima[data-id = \"' + id + '\"]').attr('src');\r\n         var text = $.trim($('textarea[name = ' + id + ']').val());\r\n         var right_answer = ($('#right_answer' + id).prop(\"checked\")) ? \"1\" : \"0\";\r\n         var url = PROJ + `/${controller}/edit`;\r\n         $.ajax({\r\n            url: url,\r\n            type: 'POST',\r\n            data: ({action: 'aUpd', aid: id, apic: apic, atext: text, right_answer: right_answer}),\r\n            cache: false,\r\n         });\r\n      }\r\n      else if (action == \"delete_a\") {\r\n         //debugger;\r\n         var url = PROJ + '/test/edit';\r\n         $.ajax({\r\n            url: url,\r\n            type: 'POST',\r\n            data: ({aid: id, qid: question_id, action: action}),\r\n            cache: false,\r\n            success: function (res) {\r\n               if (+res > 1) {\r\n                  if (confirm('Удалить ответ?')) {\r\n                     $('#' + id).slideUp(200, function () {\r\n                        $(this).remove()\r\n                     });\r\n                  }\r\n               }\r\n               else {\r\n                  if (confirm('Это последний ответ для данного вопроса. Если его удалите, удалится и весь вопрос. Удалять?')) {\r\n                     edit('delete_q_a', id, question_id);\r\n                  }\r\n                  else {\r\n                     return;\r\n                  }\r\n               }\r\n            },\r\n            error: function () {\r\n               alert('Ошибка при удалении');\r\n            }\r\n         });\r\n      }\r\n      else if (action == \"delete_q_a\") {\r\n         var activePagination = +$('.pagination>a.nav-active ').text();\r\n         $.ajax({\r\n            url: PROJ + '/test/edit',\r\n            type: 'POST',\r\n            data: ({action: 'delete_q_a', aid: id, qid: question_id}),\r\n            cache: false,\r\n            success: function (res) {\r\n\r\n               $('#' + question_id + 'q').parent().add('.pagination>a.nav-active ').slideUp(400, function () {\r\n                  $(this).remove();\r\n                  $('.pagination>a').each(function (index, elem) {// Пересчет номеров пагинации\r\n                     index++\r\n                     $(this).text('' + index);\r\n                  });\r\n               });\r\n            },\r\n            error: function () {\r\n               alert('Ошибка при удалении');\r\n            },\r\n         });\r\n      }\r\n      else if (action == \"del_a_q_pic\") {\r\n\r\n         $.ajax({\r\n            url: `${PROJ}/${controller}/edit`,\r\n            type: 'POST',\r\n            data: ({action: 'aqPicDel', aid: id, qid: question_id}),\r\n            cache: false,\r\n            success: function (res) {\r\n               $('#ima' + id).remove();\r\n               $('#imq' + question_id).remove();\r\n            },\r\n            error: function () {\r\n               alert('Ошибка при удалении');\r\n            },\r\n         });\r\n      }\r\n\r\n\r\n   }\r\n\r\n   function check() {\r\n\r\n      var holder = document.getElementsByClassName('holder'),\r\n      tests = {\r\n         filereader: typeof FileReader != 'undefined',\r\n         dnd: 'draggable' in document.createElement('span'),\r\n         formdata: !!window.FormData,\r\n         progress: \"upload\" in new XMLHttpRequest\r\n      },\r\n      support = {\r\n         filereader: document.querySelectorAll('.filereader'),\r\n         formdata: document.querySelectorAll('.formdata'),\r\n         progress: document.querySelectorAll('.progress')\r\n      },\r\n      acceptedTypes = {\r\n         'image/png': true,\r\n         'image/jpeg': true,\r\n         'image/gif': true\r\n      },\r\n      progress = document.getElementById('uploadprogress'),\r\n      fileupload = document.getElementById('upload'),\r\n      message = \"filereader formdata progress\".split(' '); // преобразует строку в массив, разбив по сепаратору\r\n\r\n\r\n      for (var key in message) { //(function (api) \r\n         if (tests[message[key]] === false) {\r\n            support[message[key]].className = 'fail'; // присвоим класс \r\n         }\r\n         else {\r\n            collItem = support[message[key]];\r\n            for (var key1 = 0; key1 < collItem.length; ++key1) {\r\n               var item = collItem[key1]; // Вызов myNodeList.item(i) необязателен в JavaScript\r\n               item.className = 'hidden';\r\n            }\r\n         }\r\n      }\r\n\r\n      if (tests.dnd) {\r\n\r\n         for (i = 0; i < holder.length; i++) {\r\n            holder[i].ondragover = function () {\r\n               this.className = 'hover';\r\n               return false;\r\n            };\r\n            holder[i].ondragleave = function () {\r\n               this.className = 'holder';\r\n               return false;\r\n            };\r\n//        holder[i].ondragend = function () {\r\n//            this.className = '';\r\n//            return false;\r\n//        };\r\n            holder[i].ondrop = function (e) {\r\n               this.className = 'holder';\r\n               e.preventDefault();\r\n               readfiles(e.dataTransfer.files, this);\r\n            };\r\n         }\r\n\r\n      }\r\n      else {\r\n         fileupload.className = 'hidden'; // прячем кнопку загрузки\r\n         fileupload.querySelector('input').onchange = function () {// загружаем файлы\r\n            readfiles(this.files);\r\n         };\r\n      }\r\n\r\n      function previewfile(file, elem) {\r\n         if (tests.filereader === true && acceptedTypes[file.type] === true) {\r\n            var imageContainer = elem, //document.querySelector('#'+fid+' [data-prefix = \"'+pref+'\"]');\r\n            reader = new FileReader();\r\n            reader.onload = function (event) {\r\n\r\n               if (!imageContainer.getElementsByTagName('img').length == 0) {\r\n                  var elem = imageContainer.getElementsByTagName('img')[0];\r\n                  elem.remove();\r\n               }\r\n               var image = new Image();\r\n               if (imageContainer.getAttribute('data-prefix') == 'q') {\r\n                  image.id = 'imq' + imageContainer.getAttribute('id');\r\n               }\r\n               else if (imageContainer.getAttribute('data-prefix') == 'a') {\r\n                  image.id = 'ima' + imageContainer.getAttribute('id');\r\n               }\r\n               image.src = event.target.result;\r\n               image.width = 150; // a fake resize\r\n               imageContainer.appendChild(image);\r\n            };\r\n            reader.readAsDataURL(file);\r\n         }\r\n         else {\r\n            holder.innerHTML += '<p>Загружен ' + file.name + ' ' + (file.size ? (file.size / 1024 | 0) + 'K' : '');\r\n            console.log(file);\r\n         }\r\n      }\r\n\r\n      function readfiles(files, elem) {\r\n\r\n         var formData = tests.formdata ? new FormData() : null;\r\n         for (var i = 0; i < files.length; i++) {\r\n            var pref = elem.getAttribute('data-prefix');\r\n            var fid = elem.id;\r\n            if (tests.formdata) {\r\n               formData.append('file', files[i]);\r\n//window.alert( files[i]['name']);\r\n               previewfile(files[i], elem);\r\n            }\r\n         }\r\n         formData.append('pref', pref);\r\n         formData.append('fid', fid);\r\n// now post a new XHR request\r\n         if (tests.formdata) {\r\n            var xhr = new XMLHttpRequest(),\r\n            controller = 'test';\r\n            if (window.location.pathname.indexOf('freetest') + 1) {\r\n               controller = 'freetest';\r\n            }\r\n            xhr.open('POST', `${PROJ}/${controller}/edit`, true);\r\n            xhr.send(formData);\r\n            xhr.onreadystatechange = function () {\r\n               if (xhr.readyState != 4) {\r\n                  return\r\n               }\r\n               if (xhr.status != 200) {\r\n                  alert(xhr.status + ': Ошибка' + xhr.statusText); // пример вывода: 404: Not Found\r\n               }\r\n            }\r\n         }\r\n      }\r\n\r\n   }\r\n\r\n\r\n   check();\r\n\r\n}\r\n\r\nfunction check() {\r\n\r\n   var holder = document.getElementsByClassName('holder'),\r\n   tests = {\r\n      filereader: typeof FileReader != 'undefined',\r\n      dnd: 'draggable' in document.createElement('span'),\r\n      formdata: !!window.FormData,\r\n      progress: \"upload\" in new XMLHttpRequest\r\n   },\r\n   support = {\r\n      filereader: document.querySelectorAll('.filereader'),\r\n      formdata: document.querySelectorAll('.formdata'),\r\n      progress: document.querySelectorAll('.progress')\r\n   },\r\n   acceptedTypes = {\r\n      'image/png': true,\r\n      'image/jpeg': true,\r\n      'image/gif': true\r\n   },\r\n   progress = document.getElementById('uploadprogress'),\r\n   fileupload = document.getElementById('upload'),\r\n   message = \"filereader formdata progress\".split(' '); // преобразует строку в массив, разбив по сепаратору\r\n\r\n\r\n   for (var key in message) { //(function (api) \r\n      if (tests[message[key]] === false) {\r\n         support[message[key]].className = 'fail'; // присвоим класс \r\n      }\r\n      else {\r\n         collItem = support[message[key]];\r\n         for (var key1 = 0; key1 < collItem.length; ++key1) {\r\n            var item = collItem[key1]; // Вызов myNodeList.item(i) необязателен в JavaScript\r\n            item.className = 'hidden';\r\n         }\r\n      }\r\n   }\r\n\r\n   if (tests.dnd) {\r\n\r\n      for (i = 0; i < holder.length; i++) {\r\n         holder[i].ondragover = function () {\r\n            this.className = 'hover';\r\n            return false;\r\n         };\r\n         holder[i].ondragleave = function () {\r\n            this.className = 'holder';\r\n            return false;\r\n         };\r\n//        holder[i].ondragend = function () {\r\n//            this.className = '';\r\n//            return false;\r\n//        };\r\n         holder[i].ondrop = function (e) {\r\n            this.className = 'holder';\r\n            e.preventDefault();\r\n            readfiles(e.dataTransfer.files, this);\r\n         };\r\n      }\r\n\r\n   }\r\n   else {\r\n      fileupload.className = 'hidden'; // прячем кнопку загрузки\r\n      fileupload.querySelector('input').onchange = function () {// загружаем файлы\r\n         readfiles(this.files);\r\n      };\r\n   }\r\n\r\n   function previewfile(file, elem) {\r\n      if (tests.filereader === true && acceptedTypes[file.type] === true) {\r\n         var imageContainer = elem, //document.querySelector('#'+fid+' [data-prefix = \"'+pref+'\"]');\r\n         reader = new FileReader();\r\n         reader.onload = function (event) {\r\n\r\n            if (!imageContainer.getElementsByTagName('img').length == 0) {\r\n               var elem = imageContainer.getElementsByTagName('img')[0];\r\n               elem.remove();\r\n            }\r\n            var image = new Image();\r\n            if (imageContainer.getAttribute('data-prefix') == 'q') {\r\n               image.id = 'imq' + imageContainer.getAttribute('id');\r\n            }\r\n            else if (imageContainer.getAttribute('data-prefix') == 'a') {\r\n               image.id = 'ima' + imageContainer.getAttribute('id');\r\n            }\r\n            image.src = event.target.result;\r\n            image.width = 150; // a fake resize\r\n            imageContainer.appendChild(image);\r\n         };\r\n         reader.readAsDataURL(file);\r\n      }\r\n      else {\r\n         holder.innerHTML += '<p>Загружен ' + file.name + ' ' + (file.size ? (file.size / 1024 | 0) + 'K' : '');\r\n         console.log(file);\r\n      }\r\n   }\r\n\r\n   function readfiles(files, elem) {\r\n\r\n      var formData = tests.formdata ? new FormData() : null;\r\n      for (var i = 0; i < files.length; i++) {\r\n         var pref = elem.getAttribute('data-prefix');\r\n         var fid = elem.id;\r\n         if (tests.formdata) {\r\n            formData.append('file', files[i]);\r\n//window.alert( files[i]['name']);\r\n            previewfile(files[i], elem);\r\n         }\r\n      }\r\n      formData.append('pref', pref);\r\n      formData.append('fid', fid);\r\n// now post a new XHR request\r\n      if (tests.formdata) {\r\n         var xhr = new XMLHttpRequest(),\r\n         controller = 'test';\r\n         if (window.location.pathname.indexOf('freetest') + 1) {\r\n            controller = 'freetest';\r\n         }\r\n         xhr.open('POST', `${PROJ}/${controller}/edit`, true);\r\n         xhr.send(formData);\r\n         xhr.onreadystatechange = function () {\r\n            if (xhr.readyState != 4) {\r\n               return\r\n            }\r\n            if (xhr.status != 200) {\r\n               alert(xhr.status + ': Ошибка' + xhr.statusText); // пример вывода: 404: Not Found\r\n            }\r\n         }\r\n      }\r\n   }\r\n\r\n}\r\n\r\nfunction edit(action, id, question_id, test_id, test_name) {\r\n   var controller = 'test';\r\n//        debugger;\r\n   if (window.location.pathname.indexOf('freetest') + 1) {\r\n      controller = 'freetest';\r\n   }\r\n   if (action == \"save_q\") {\r\n      var qpic = $('#imq[data-id = \"' + question_id + '\"]').attr('src'),\r\n      text = $.trim($('textarea[name = \"' + question_id + 'q\"]').val()),\r\n      sort = $.trim($('input[data-q-sort = ' + question_id + ']').val()),\r\n      k_word = $.trim($('input[data-q-sort = ' + question_id + ']').val()),\r\n      data = ({action: 'qUpd', data, qid: question_id, qpic: qpic, qtext: text, sort: sort}),\r\n      url = `${PROJ}/${controller}/edit`;\r\n      $.ajax({\r\n         url: url,\r\n         type: 'POST',\r\n         data: data,\r\n      });\r\n   }\r\n   else if (action == \"save_a\") {\r\n      var apic = $('#ima[data-id = \"' + id + '\"]').attr('src');\r\n      var text = $.trim($('textarea[name = ' + id + ']').val());\r\n      var right_answer = ($('#right_answer' + id).prop(\"checked\")) ? \"1\" : \"0\";\r\n      var url = PROJ + `/${controller}/edit`;\r\n      $.ajax({\r\n         url: url,\r\n         type: 'POST',\r\n         data: ({action: 'aUpd', aid: id, apic: apic, atext: text, right_answer: right_answer}),\r\n         cache: false,\r\n      });\r\n   }\r\n   else if (action == \"delete_a\") {\r\n      //debugger;\r\n      var url = PROJ + '/test/edit';\r\n      $.ajax({\r\n         url: url,\r\n         type: 'POST',\r\n         data: ({aid: id, qid: question_id, action: action}),\r\n         cache: false,\r\n         success: function (res) {\r\n            if (+res > 1) {\r\n               if (confirm('Удалить ответ?')) {\r\n                  $('#' + id).slideUp(200, function () {\r\n                     $(this).remove()\r\n                  });\r\n               }\r\n            }\r\n            else {\r\n               if (confirm('Это последний ответ для данного вопроса. Если его удалите, удалится и весь вопрос. Удалять?')) {\r\n                  edit('delete_q_a', id, question_id);\r\n               }\r\n               else {\r\n                  return;\r\n               }\r\n            }\r\n         },\r\n         error: function () {\r\n            alert('Ошибка при удалении');\r\n         }\r\n      });\r\n   }\r\n   else if (action == \"delete_q_a\") {\r\n      var activePagination = +$('.pagination>a.nav-active ').text();\r\n      //debugger;\r\n      $.ajax({\r\n         url: PROJ + '/test/edit',\r\n         type: 'POST',\r\n         data: ({action: 'delete_q_a', aid: id, qid: question_id}),\r\n         cache: false,\r\n         success: function (res) {\r\n            $('#' + question_id + 'q').parent().add('.pagination>a.nav-active ').slideUp(400, function () {\r\n               $(this).remove();\r\n               var paginationACollection = $('.pagination>a');\r\n               var len = paginationACollection.length;\r\n               paginationACollection.each(function (index, elem) {// Пересчет номеров пагинации\r\n                  index++;\r\n                  if (index < len) {\r\n                     $(this).text('' + index);\r\n                  }\r\n               });\r\n               var paginItem = $('.pagination a:first').removeClass('p-no-active').addClass('nav-active');\r\n               var questId = paginItem[0].hash.replace('#question-', '');\r\n               $('#question-' + questId).show();\r\n            });\r\n         },\r\n         error: function () {\r\n            alert('Ошибка при удалении');\r\n         },\r\n      });\r\n   }\r\n   else if (action == \"del_a_q_pic\") {\r\n\r\n      $.ajax({\r\n         url: `${PROJ}/${controller}/edit`,\r\n         type: 'POST',\r\n         data: ({action: 'aqPicDel', aid: id, qid: question_id}),\r\n         cache: false,\r\n         success: function (res) {\r\n            $('#ima' + id).remove();\r\n            $('#imq' + question_id).remove();\r\n         },\r\n         error: function () {\r\n            alert('Ошибка при удалении');\r\n         },\r\n      });\r\n   }\r\n\r\n}\r\n\r\n\r\nfunction up() {\r\n   var top = Math.max(document.body.scrollTop, document.documentElement.scrollTop);\r\n   if (top > 0) {\r\n      window.scrollBy(0, -100);\r\n      var t = setTimeout('up()', 20);\r\n   }\r\n   else\r\n      clearTimeout(t);\r\n   return false;\r\n}","function autocomplete() {\r\n    $('#autocomplete').autocomplete({\r\n        source: '/search',\r\n        minLength: 1,\r\n        appendTo: $(\"#autocomplete\").parent(),\r\n        select: function (event, ui) {\r\n            window.location = 'http://catalog/search?search=' + encodeURIcomponent(ui.item.value);\r\n        }\r\n    });\r\n};\r\n\r\n\r\nfunction get_cookie(cookie_name) {\r\n    var results = document.cookie.match('(^|;)?' + cookie_name + '=([^;]*)');\r\n\r\n    if (results)\r\n        $('#cookie-notice').css({bottom: \"-100%\"});\r\n    // return (unescape(results[2]));\r\n    else\r\n        $('#cookie-notice').css({bottom: \"0\"});\r\n    setCookie();\r\n    return null;\r\n}\r\n\r\nfunction setCookie() {\r\n    const date = new Date(),\r\n        minute = 60 * 1000,\r\n        day = minute * 60 * 24;\r\n\r\n    var days = 1;\r\n    date.setTime(date.getTime() + (days * day));\r\n    $('#cookie-notice').css({bottom: \"-100%\"});\r\n    document.cookie = \"cn=1; expires=\" + date + \"path=/; SameSite=lax\";\r\n}\r\n\r\nconst uniq = (array) => Array.from(new Set(array));\r\n\r\nasync function get(key) {\r\n    var p = window.location.search;\r\n    p = p.match(new RegExp(key + '=([^&=]+)'));\r\n    return p ? p[1] : false;\r\n}\r\n\r\nasync function post(url, data) {\r\n//      debugger;\r\n    return new Promise(function (resolve, reject) {\r\n        var req = new XMLHttpRequest();\r\n        req.open('POST', url);\r\n        req.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n        req.setRequestHeader('Content-Type', 'application/json');\r\n        req.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n        req.send('param=' + JSON.stringify(data));\r\n        req.onerror = function () {\r\n            reject(Error(\"Network Error\"));\r\n        };\r\n        req.onload = function () {\r\n            resolve(req.response);\r\n        };\r\n    });\r\n}\r\n\r\n\r\nexport {post, get, uniq}; //, autocomplete};\r\n","import './autocomplete.sass';\r\n\r\nwindow.onload = function() {\r\n    let inp = document.querySelector('#autocomplete').\r\n    addEventListener('input', function () {\r\n        autocomplete(this.value)\r\n    })\r\n}\r\n\r\nasync function fetchJson(Input) {\r\n    let response = await fetch('/search?q=' + Input);\r\n    return await response.json();\r\n}\r\n\r\nasync function autocomplete(val) {\r\n    if (val.length<1) {\r\n        result.innerHTML = '';\r\n        return\r\n    }\r\n\r\n    var data = await fetchJson(val);\r\n    debugger;\r\n\r\n    var res = '<ul>';\r\n    data.forEach(e => {\r\n        res += '<li>' +\r\n            `<a href = '${e.alias}'>` +\r\n            `<img src='/pic/${e.preview_pic}' alt='${e.name}'>` +\r\n            e.name +\r\n            '</a></li>';\r\n    });\r\n    res += '</ul>';\r\n    var result = document.querySelector('.result-search');\r\n    result.innerHTML = res;\r\n\r\n    document.querySelector('body').addEventListener('click', function (e) {\r\n        const search = document.querySelector('.result-search ul');\r\n        if (document.querySelector('.result-search ul') && e.target !== search) {\r\n            search.remove();\r\n        }\r\n    });\r\n}\r\n\r\nexport default autocomplete\r\n","import './test-pagination.scss'\r\n\r\nwindow.onload = function () {\r\n\r\n//Показать первый вопрос\r\n    document.querySelector('.test-data .question:first-child').style.display = \"flex\"\r\n// Показать первую кнопку\r\n    document.querySelector('[data-pagination]:first-child').classList.add('nav-active')\r\n\r\n// Пагинация\r\n    document.querySelector('.pagination').addEventListener('click', function (e) {\r\n        let target = e.target\r\n        if (target.classList.contains('pagination')) return\r\n        let clicked_btn = target.closest('[data-pagination]')\r\n        if (clicked_btn.classList.contains('nav-active')) return\r\n\r\n        let active_btn = document.querySelector('.pagination .nav-active')\r\n        active_btn.classList.remove('nav-active')\r\n        clicked_btn.classList.add('nav-active')\r\n\r\n        // hide the card\r\n        let id_to_hide = active_btn.dataset['pagination']\r\n        let link_to_hide = `.question[data-id=\"${id_to_hide}\"]`\r\n        document.querySelector(link_to_hide).style.display = 'none'\r\n        // show the card\r\n        let id_to_show = clicked_btn.dataset['pagination']\r\n        let link_to_show = `.question[data-id=\"${id_to_show}\"]`\r\n        document.querySelector(link_to_show).style.display = 'flex'\r\n    })\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}